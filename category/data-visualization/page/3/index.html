<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="HandheldFriendly" content="True" />
<meta name="MobileOptimized" content="320" />

<title>data visualization | jckr.github.io/blog | Page 3</title>

<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="/xmlrpc.php">
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="jckr.github.io/blog &raquo; Feed" href="/feed/" />
<link rel="alternate" type="application/rss+xml" title="jckr.github.io/blog &raquo; Comments Feed" href="/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="jckr.github.io/blog &raquo; data visualization Category Feed" href="/category/data-visualization/feed/" />
<!-- This site uses the Google Analytics by MonsterInsights plugin v7.0.5 - Using Analytics tracking - https://www.monsterinsights.com/ -->
<!-- Note: MonsterInsights is not currently configured on this site. The site owner needs to authenticate with Google Analytics in the MonsterInsights settings panel. -->
<!-- No UA code set -->
<!-- / Google Analytics by MonsterInsights -->
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/localhost:8888\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.10"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='YoutubeShortcodeMargenn-css'  href='/wp-content/plugins/youtube-shortcode/youtube-shortcode.css?ver=4.6.10' type='text/css' media='all' />
<link rel='stylesheet' id='casper-google-fonts-css'  href='//fonts.googleapis.com/css?family=Noto+Serif%3A400%2C700%2C400italic%7COpen+Sans%3A700%2C400&#038;ver=4.6.10' type='text/css' media='all' />
<link rel='stylesheet' id='casper-style-css'  href='/wp-content/themes/casper/style.css?ver=4.6.10' type='text/css' media='all' />
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.6.10" />

   	<style type="text/css">
					.blog-title a, .blog-description, .social-icons a { color: #222222; }
		
						                
		
							.main-navigation a { color: ; }
		                                            </style>
    		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
			<style type="text/css">
			.site-title a,
		.site-description {
			color: #222222;
		}
		</style>
	<style type="text/css" id="syntaxhighlighteranchor"></style>
</head>

<body class="archive paged category category-data-visualization category-8 paged-3 category-paged-3 group-blog">

<header id="masthead" role="banner" class="site-head site-header" style="background-image: url(/wp-content/uploads/2018/04/Screenshot-2018-04-09-19.38.59.png);">
    <nav id="site-navigation" class="main-navigation" role="navigation">
        <div>
            <h1 class="menu-toggle">
                <a class="icon-bars" href="#">
                    <span class="hidden">Menu</span>
                </a>
            </h1>
            <a class="skip-link screen-reader-text" href="#content">Skip to content</a>
            <div class="menu"><ul><li ><a href="/">Home</a></li></ul></div>
        </div>
    </nav><!-- #site-navigation -->

    <div class="vertical-row">
        <div class="vertical">
            <div class="site-head-content inner">
                
                <div class="social-icons">
                                                                                                                                                                                                                                                                                                                                                                                                                                                    </div>
                <h1 class="blog-title"><a class="blog-logo" href='/blog/' rel='home'>jckr.github.io/blog</a></h1>
                <h2 class="blog-description">Just another WordPress site</h2>
            </div>
        </div>
    </div>
</header><!-- #masthead -->

<main id="content" class="content" role="main">

	<section id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			<header class="page-header">
				<h1 class="page-title">
					data visualization				</h1>
							</header><!-- .page-header -->

						
				
<article id="post-1395" class="post-1395 post type-post status-publish format-standard hentry category-d3 category-data-visualization category-tips tag-d3 tag-embedding tag-tableau tag-wordpress">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/2012/07/02/embedding-tableau-visualizations-on-the-web/" rel="bookmark"><time class="entry-date published" datetime="2012-07-02T19:42:13+00:00">July 2, 2012</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> on <a href="/category/d3/" rel="category tag">d3</a>, <a href="/category/data-visualization/" rel="category tag">data visualization</a>, <a href="/category/tips/" rel="category tag">tips</a>			</span>
		        <h1 class="post-title"><a href="/2012/07/02/embedding-tableau-visualizations-on-the-web/" rel="bookmark">Embedding tableau visualizations on the web</a></h1>
         
    </header>
	<section class="post-content">

		<p>I&#8217;m writing this short post because I see that exact phrase come up in the search engine terms of the blog now and again (along with &#8220;<a href="http://thazing.com/hello-this-is-bathtub/#.T_HYBsXxqGM">Hello this is bathtub</a>&#8221; but I can&#8217;t really help there).</p>
<p>Long story short. I run into problems all the time trying to properly embed Tableau vis into wordpress blog posts. Does it happen outside of wordpress, I don&#8217;t know, because I don&#8217;t really try to embed Tableau vis outside of wordpress. That said, I have the same problem with d3 vis in wordpress and I&#8217;ve been asked several times how do I do it.</p>
<h3>iframes.</h3>
<p>That&#8217;s how.</p>
<p>Here is what I did <a href="http://jckr.github.io/blog/blog/2012/06/30/tableau-2012-sports-visualization-contest-entry/">last time</a>.</p>
<pre class="brush: jscript; title: ; notranslate" title="">
&lt;iframe
  style=&quot;border: 0px;&quot;
  src=&quot;http://public.tableausoftware.com/views/champions/champions?:embed=y&amp;amp;:from_wg=true&quot;
  scrolling=&quot;no&quot;
  width=&quot;652px&quot;
  height=&quot;756px&quot;&gt;
&lt;/iframe&gt;
</pre>
<p>so you&#8217;ll have to go to HTML mode and type it out. When it&#8217;s done, you can safely go back to visual mode if you feel like it.<br />
Let&#8217;s go through these lines one by one (btw, they don&#8217;t have to appear one line at a time, it&#8217;s just for presentation purposes).</p>
<p>Most important, what in on src. That&#8217;s simply the link to the page of your tableau vis. And if that&#8217;s not clear enough, it goes like this:<br />
http://public.tableausoftware.com/views/ + <em>name of your workbook</em> + / + <em>name of your dashboard or sheet</em>.</p>
<p>Since I want to show a dashboard called champions in a workbook called champions as well, that&#8217;sÂ http://public.tableausoftware.com/views/champions/champions.</p>
<p>I&#8217;m not sure whether what&#8217;s after the dashboard name is important. I&#8217;ll leave that as an exercise to figure it out. I&#8217;m pretty confident things work without it.</p>
<p>Then the rest.</p>
<p>style=&#8221;border: 0px&#8221; Yes, because you don&#8217;t want an ugly border around your iframe. or do you?</p>
<p>scrolling=&#8221;no&#8221;. So there&#8217;s no scrollbar. Look. Scrollbars in iframes were pretty rad in 1996, but if you want to give that embed feeling, you have to do without them.</p>
<p>height=&#8230;px, width=&#8230;px. Here&#8217;s the tricky part. You have to manually set the size of your visualisation and add a couple of pixels for good measure.</p>
<p>In tableau, when creating dashboards, I have always used the option to size themÂ <em>exactlyÂ </em>at a precise size and I recommend you do that too. Then add 2-6 px to each dimension and use that as width and height.</p>
<p>In my experience going through these steps is really less painful than using the &#8220;native&#8221; embed functionality of tableau vis which sometimes work and sometimes doesn&#8217;t. The added bonus is that the resulting html is much more legible than what Tableau generates, which, for the record, is:</p>
<pre>&lt;script type="text/javascript" src="http://public.tableausoftware.com/javascripts/api/viz_v1.js"&gt;&lt;/script&gt;&lt;div style="width:654px; height:799px;"&gt;&lt;noscript&gt;&lt;a href="http:&amp;#47;&amp;#47;www.jckr.github.io/blog&amp;#47;blog&amp;#47;2012&amp;#47;06&amp;#47;30&amp;#47;tableau-2012-sports-visualization-contest-entry&amp;#47;"&gt;&lt;img alt="champions " src="http:&amp;#47;&amp;#47;public.tableausoftware.com&amp;#47;static&amp;#47;images&amp;#47;ch&amp;#47;champions&amp;#47;champions&amp;#47;1_rss.png" style="border: none" /&gt;&lt;/a&gt;&lt;/noscript&gt;&lt;object width="654" height="799" style="display:none;"&gt;&lt;param name="host_url" value="http%3A%2F%2Fpublic.tableausoftware.com%2F" /&gt;&lt;param name="site_root" value="" /&gt;&lt;param name="name" value="champions&amp;#47;champions" /&gt;&lt;param name="tabs" value="no" /&gt;&lt;param name="toolbar" value="yes" /&gt;&lt;param name="static_image" value="http:&amp;#47;&amp;#47;public.tableausoftware.com&amp;#47;static&amp;#47;images&amp;#47;ch&amp;#47;champions&amp;#47;champions&amp;#47;1.png" /&gt;&lt;param name="animate_transition" value="yes" /&gt;&lt;param name="display_static_image" value="yes" /&gt;&lt;param name="display_spinner" value="yes" /&gt;&lt;param name="display_overlay" value="yes" /&gt;&lt;param name="display_count" value="yes" /&gt;&lt;param name="from_wg" value="true" /&gt;&lt;/object&gt;&lt;/div&gt;&lt;div style="width:654px;height:22px;padding:0px 10px 0px 0px;color:black;font:normal 8pt verdana,helvetica,arial,sans-serif;"&gt;&lt;div style="float:right; padding-right:8px;"&gt;&lt;a href="http://www.tableausoftware.com/public?ref=http://public.tableausoftware.com/views/champions/champions" target="_blank"&gt;Powered by Tableau&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;</pre>
<p>Yeah. You say &amp;#47; i say %2F. anyway, this is a bit difficult to troubleshoot.</p>
<p>The drawback when using iframes is that you lose the nice static image which is generated for RSS flows and other environments without interactivity. If you don&#8217;t know what I&#8217;m talking about (if you&#8217;re not familiar with that large orange arrow at the center) you&#8217;ll have no regrets.</p>
<h3>Bonus: d3.</h3>
<p>It turns out that the iframe is the simplest solution to have d3 work within wordpress, too. Sure, in theory it is possible to upload a js file as a media file, so you get a url with the date in it or something, which you can link to from the&#8230; whatever. It just never works and it&#8217;s a pain to maintain.</p>
<p>so instead, use iframes. Make your d3 visualisation into an html file which will have all the necessary links. Then upload the file to a location you know (and possibly dependencies) and you&#8217;re all set! set an iframe with the same guidelines as above. To make the process even less painful, I use a plug-in called <a href="http://wordpress.org/extend/plugins/wp-filemanager/">FileManager</a> which lets me upload and manage files from within my dashboard environment. On another server I use another app also called <a href="http://www.gerd-tentler.de/tools/filemanager/">FileManager</a> (quite a catchy name, apparently) which runs outside of the wordpress environment.</p>
<p>Happy embedding!</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-1384" class="post-1384 post type-post status-publish format-standard hentry category-data-visualization tag-apoel-nicosia tag-chamions-league tag-contest tag-football tag-real-madrid tag-sports tag-tableau">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/2012/06/30/tableau-2012-sports-visualization-contest-entry/" rel="bookmark"><time class="entry-date published" datetime="2012-06-30T01:21:26+00:00">June 30, 2012</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> on <a href="/category/data-visualization/" rel="category tag">data visualization</a>			</span>
		        <h1 class="post-title"><a href="/2012/06/30/tableau-2012-sports-visualization-contest-entry/" rel="bookmark">Tableau 2012 sports visualization contest entry</a></h1>
         
    </header>
	<section class="post-content">

		<p><iframe style="border: 0px;" src="http://public.tableausoftware.com/views/champions/champions?:embed=y&amp;:from_wg=true" scrolling="no" width="652px" height="756px"></iframe></p>
<p>So here goes for the 2012 Tableau contest entry.<br />
Before I go on explaining what this is about and how it&#8217;s been made, I&#8217;d like to express my thanks to <a href="http://www.optasports.com/">Opta</a> for letting me use this awesome dataset. They have been very reactive and supportive.</p>
<h2>So what is this?</h2>
<p>So the assignment was to create a visualization about sports. and who says sports, says football. There&#8217;s been a number of epic football games in recent history, and the Real Madrid / APOEL Nicosia match up last April is definitely one of them. It&#8217;s that game where APOEL defender Paolo Jorge, after losing 2 teeth after an unfortunate collision with a teammate, decided to pull out a third one that was hanging lose. And although Real ended up winning by a large margin 5-2, few teams were able to score 1 goal against 2012&#8217;s Real Madrid, let alone 2.</p>
<p>So I chose to represent the game as a network.</p>
<p>The circles on the right (Real Madrid) are much larger, which means that Real players were involved in more events in the game than their APOEL counterparts. The dataset I could work from had all sorts of events recorded such as passes or shots. The lines linking the left side also seem darker. You can also tell that lines across attackers (lower part of screen) are much thinner than those who involve mid-fields, who are really building the game, or defenders. Lines are colored by the team who initiated the action. So if a line of the color of one team ends connected to the player of another team, it means the ball has been stolen. So you can explore how defenders were able to stop individual attackers, duels among midfielders, etc.</p>
<p>This being a contest, I&#8217;ve thrown in a little subtlety with the possibility of switching the form of the display from a more abstract circle diagram network, to a second representation where players are positioned according to their average physical position during the game. For this second representation, I&#8217;ve chosen to show teams side by side, and not one on top of the other, as to keep the chart legible.</p>
<h2>How is this done?</h2>
<p>First let me explain what I attempt to do in a contest.</p>
<p>I try to do three things. First, work on interesting, non-trivial data. Second, aim for virtuosity in the execution, try to come up with a difficult technique and hopefully pull it out nicely. Finally, link the two together: make the visualization relevant, so it supports the interestingness of the data, without being too busy or complex.</p>
<p>So we talked about the data. Again I must say it&#8217;s been really comfortable working with a professional dataset. The football statistics that reach mass audiences are usually very aggregated, so it&#8217;s really nice to have access to a degree of finesse. And by the way, I only used the tip of the iceberg of that data.</p>
<p>Now the technique.</p>
<p>Some time ago I wrote how <a href="http://www.google.fr/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;ved=0CFQQFjAA&amp;url=http%3A%2F%2Fwww.jckr.github.io/blog%2Fblog%2F2011%2F11%2F04%2Fan-open-letter-to-tableau%2F&amp;ei=gzDuT8WQPMfK0QWn5rmJDg&amp;usg=AFQjCNFHshZKvXmHRXzX1KnxvxTBc-dJKA&amp;sig2=i3qKGtUrVLrR0OWQkZnpoA">I regretted that Tableau doesn&#8217;t have a network graph module</a>. Though, I had a fair idea how to hack one.</p>
<p>As in a previous post on treemaps, we are using the line mark with aptly chosen coordinates. Note that since the lines I am drawing rely on two records, we won&#8217;t be needing the path shelf this time.</p>
<p>There are two kinds of &#8220;lines&#8221; here: those who act as nodes, and those who act as links.</p>
<p>Nodes are where the players circles are, and are also used to support labels. Those are given a size depending on the number of events each player is involved in. That number has been precomputed and is made available with the data.</p>
<p>To explain how links work, I have 3 sheets in my data. One on players (which provide the location of each player depending on each mode, their names, and other such details), one on points, which lists all the begin- and end-points of all the links, all of these points being linked to a record in the player sheet. The final sheet is the one on lines, where each record has a start and an end point.</p>
<p>So essentially, all the positioning happens in the player sheet. Each player and each special location there is assigned two positions, one around the circle diagram and one in the other form. Both are calculated before the data is supplied to Tableau. In Tableau using a parameter we can simulate a transition from one form to another &#8211; the intermediary states are even legible ðŸ™‚</p>
<p>For the tooltips, I have prepared different scenarios depending on the type of line which will be mouseovered (passes, shots, goals, players&#8230;) so one formula can be used to generate a useful and relevant text.</p>
<p>Finally, I used a little trick around transparency. Here it is absolutely necessary to use transparency because else the networks will become very, very busy and difficult to read. However, I did want the goal lines to stand out. I wanted them to be not transparent. Problem: there is no transparency shelf. You can only set transparency for all the marks at once. So, each goal link is really several links one on top of the other, so the resulting line is really opaque.</p>
<p>And finally the relevance.</p>
<p>I didn&#8217;t want to pack too much data at once, I mean sure there is much more data than on a traditional game report we see in the sports press, but not to the point that it&#8217;s overwhelming. I tried to make it so that it&#8217;s possible to immediately see the outcome of the game by counting the thicker lines going out of the circle. 2 to 5.</p>
<p>Instead of packing the dashboard with tightly fitted panels I have used just this one and only used one control to let the user change the representation.</p>
<p>So, I hope you all like it!</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-1246" class="post-1246 post type-post status-publish format-standard hentry category-d3 category-data-visualization category-tips">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/2012/05/28/manipulating-data-like-a-boss-with-d3/" rel="bookmark"><time class="entry-date published" datetime="2012-05-28T03:27:24+00:00">May 28, 2012</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> on <a href="/category/d3/" rel="category tag">d3</a>, <a href="/category/data-visualization/" rel="category tag">data visualization</a>, <a href="/category/tips/" rel="category tag">tips</a>			</span>
		        <h1 class="post-title"><a href="/2012/05/28/manipulating-data-like-a-boss-with-d3/" rel="bookmark">Manipulating data like a boss with d3</a></h1>
         
    </header>
	<section class="post-content">

		<p>Updates:<br />
1) I&#8217;ve put all the code examples in http://codepen.io/collection/njzYxo/<br />
2) I will rewrite this post after I&#8217;m done publishing my <a href="/2016/08/09/visualization-with-react/">Visualization with React</a> series, because it&#8217;s 4 years old and there are other ways to do this now.</p>
<p>Data is the first D in d3 (or possibly the 3rd, but it&#8217;s definitely one of these).</p>
<p>Anyway. Putting your data in the right form is crucial to have concise code that runs fast and is easy to read (and, later, troubleshoot).</p>
<p>So what shape should your data be in?<br />
You undoubtedly have many options. </p>
<p>To follow through this tutorial, let&#8217;s assume you want to plot the relationship between R&#038;D expenditure and GDP growth for a number of countries. You have got <a href="http://jckr.github.io/blog/stuff/data%20example/data.csv">this file</a>, full of tabular data, which lists for every country a name, a continent, the gross R&#038;D expenditure as a percentage of GDP, GDP growth, and for context population and GDP per capita.</p>
<p>So one very basic approach would be to put each of these variables into one independent array.</p>
<pre class="brush: jscript; title: ; notranslate" title="">var GERD=[2.21367, 2.74826, 1.96158, 1.80213, 0.39451, 1.52652, 3.01937, 1.44122, 3.84137, 2.20646, 2.78056, 0.5921, 1.14821, 2.64107, 1.78988, 4.2504, 1.26841, 3.33499, 3.3609, 1.67862, 0.41322, 1.81965, 1.13693, 1.75922, 0.67502, 1.65519, 1.24252, 0.48056, 1.85642, 0.92523, 1.38357, 3.61562, 2.99525, 0.84902, 1.82434, 2.78518];
var growth=[2.48590317, 3.10741128, 1.89308521, 3.21494841, 5.19813626, 1.65489834, 1.04974368, 7.63563272, 2.85477157, 1.47996142, 2.99558644, -6.90796403, 1.69192342, -3.99988322, -0.42935239, 4.84602001, 0.43108032, 3.96559062, 6.16184325, 2.67806902, 5.56185685, 1.18517739, 2.33052515, 1.59773989, 4.34962928, -1.60958484, 4.03428262, 3.34920254, -0.17459255, 2.784, -0.06947685, 3.93555895, 2.71404473, 9.00558548, 2.09209263, 3.02171711];
var GDPcap=[40718.78167, 42118.46375, 38809.66436, 39069.91407, 15106.73205, 25956.76492, 40169.83173, 22403.02459, 37577.71225, 34147.98907, 39389.25874, 26878.00015, 21731.55484, 35641.55402, 40457.94273, 28595.68799, 32580.06572, 33751.23348, 29101.34563, 86226.3276, 15200.22119, 43455.30129, 29870.67748, 57230.89, 19882.99226, 25425.59561, 19833, 24429.61828, 27559.75186, 10497.583, 32779.3288, 41526.2995, 46621.77334, 15666.18783, 35715.4691, 46587.61843];
var population=[22319.07, 8427.318, 10590.44, 33909.7, 17248.45, 10286.3, 5495.246, 1335.347, 5366.482, 62747.78, 82852.47, 11312.16, 9993.116, 308.038, 4394.382, 7623.6, 59059.66, 126912.8, 48988.83, 483.701, 109219.9, 16480.79, 4291.9, 4789.628, 37725.21, 10684.97, 142822.5, 5404.493, 2029.418, 50384.55, 44835.48, 9276.365, 7889.345, 73497, 62761.35, 313232];
var country=[&quot;Australia&quot;, &quot;Austria&quot;, &quot;Belgium&quot;, &quot;Canada&quot;, &quot;Chile&quot;, &quot;Czech Republic&quot;, &quot;Denmark&quot;, &quot;Estonia&quot;, &quot;Finland&quot;, &quot;France&quot;, &quot;Germany&quot;, &quot;Greece&quot;, &quot;Hungary&quot;, &quot;Iceland&quot;, &quot;Ireland&quot;, &quot;Israel&quot;, &quot;Italy&quot;, &quot;Japan&quot;, &quot;Korea&quot;, &quot;Luxembourg&quot;, &quot;Mexico&quot;, &quot;Netherlands&quot;, &quot;New Zealand&quot;, &quot;Norway&quot;, &quot;Poland&quot;, &quot;Portugal&quot;, &quot;Russian Federation&quot;, &quot;Slovak Republic&quot;, &quot;Slovenia&quot;, &quot;South Africa&quot;, &quot;Spain&quot;, &quot;Sweden&quot;, &quot;Switzerland&quot;, &quot;Turkey&quot;, &quot;United Kingdom&quot;, &quot;United States&quot;];
var continent=[&quot;Oceania&quot;, &quot;Europe&quot;, &quot;Europe&quot;, &quot;America&quot;, &quot;America&quot;, &quot;Europe&quot;, &quot;Europe&quot;, &quot;Europe&quot;, &quot;Europe&quot;, &quot;Europe&quot;, &quot;Europe&quot;, &quot;Europe&quot;, &quot;Europe&quot;, &quot;Europe&quot;, &quot;Europe&quot;, &quot;Asia&quot;, &quot;Europe&quot;, &quot;Asia&quot;, &quot;Asia&quot;, &quot;Europe&quot;, &quot;America&quot;, &quot;Europe&quot;, &quot;Oceania&quot;, &quot;Europe&quot;, &quot;Europe&quot;, &quot;Europe&quot;, &quot;Europe&quot;, &quot;Europe&quot;, &quot;Europe&quot;, &quot;Africa&quot;, &quot;Europe&quot;, &quot;Europe&quot;, &quot;Europe&quot;, &quot;Europe&quot;, &quot;Europe&quot;, &quot;America&quot;];</pre>
<p>(don&#8217;t bother scrolling, it&#8217;s more of the same ðŸ™‚ )<br />
Then, you can just create marks for each data item and fetch each attribute independently.<br />
Let&#8217;s do a bubble chart for instance.<br />
(small aside: in the post I won&#8217;t go through the code to set up the svg container or the scales, instead focusing on the data structures. That code, which is really nothing special, can be found in the source code of the examples).</p>
<p>So to create our circles we would write something like: </p>
<pre class="brush: jscript; title: ; notranslate" title="">svg.selectAll(&quot;circle&quot;).data(country).enter()
  .append(&quot;circle&quot;)
  .attr(&quot;cx&quot;,function(d,i) {return x(GERD[i]);})
  .attr(&quot;cy&quot;,function(d,i) {return y(growth[i]);})
  .attr(&quot;r&quot;,function(d,i) {return r(Math.sqrt(population[i]));})

  .style(&quot;fill&quot;,function(d,i) {return c(continent[i]);})
  .style(&quot;opacity&quot;,function(d,i) {return o(GDPcap[i]);})

    .append(&quot;title&quot;)
    .text(String)</pre>
<p>and this works:<br />
<iframe src="https://jckr.github.io/blog/stuff/data%20example/data-example0.html" width=512px height=520px scrolling=no style="border:0px"></iframe><br />
<a href="http://jckr.github.io/blog/stuff/data%20example/data-example0.html">See example in its own tab or window</a><br />
but this is hell to maintain. If for some reason there is an error in one of the values, for instance due to a cat or a small child in the proximity of the computer, the error will be very difficult to troubleshoot.<br />
Another problem is that it&#8217;s very difficult to apply any kind of subsequent treatment to the data. For instance, you will notice that there are smaller bubbles entirely within the large orange bubble which happens to be on top of them. So it&#8217;s not possible to mouseover the smaller bubbles. One way to address that would be to sort data in order of decreasing population (the size of the bubbles) so that it would be impossible to have this kind of situation. Now while it is possible sorting 6 arrays according to the values of one, it&#8217;s very messy.</p>
<p><strong>Ideally, you should have all the values that will be translated graphically within one, single object.</strong> You want to have an array of these objects that you will pass to the data method, and be able to write something like: </p>
<pre class="brush: jscript; title: ; notranslate" title="">svg.selectAll(&quot;circle&quot;).data(data).enter()
  .append(&quot;circle&quot;)
  .attr(&quot;cx&quot;,function(d) {return x(+d.GERD);})
  .attr(&quot;cy&quot;,function(d) {return y(+d.growth);})
  .attr(&quot;r&quot;,function(d) {return r(Math.sqrt(+d.population));})

  .style(&quot;fill&quot;,function(d) {return c(d.continent);})
  .style(&quot;opacity&quot;,function(d) {return o(+d.GDPcap);})</pre>
<p>Here, you have just one data source, which is much safer. </p>
<p>So if you&#8217;re thinking: I know, I should create a variable like this: </p>
<pre class="brush: jscript; title: ; notranslate" title="">var data=[
  {&quot;country&quot;:&quot;Australia&quot;,&quot;continent&quot;:&quot;Oceania&quot;,&quot;population&quot;:22319.07,&quot;GDPcap&quot;:40718.78167,&quot;GERD&quot;:2.21367,&quot;growth&quot;:2.48590317},
  {&quot;country&quot;:&quot;Austria&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:8427.318,&quot;GDPcap&quot;:42118.46375,&quot;GERD&quot;:2.74826,&quot;growth&quot;:3.10741128},
  {&quot;country&quot;:&quot;Belgium&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:10590.44,&quot;GDPcap&quot;:38809.66436,&quot;GERD&quot;:1.96158,&quot;growth&quot;:1.89308521},
  {&quot;country&quot;:&quot;Canada&quot;,&quot;continent&quot;:&quot;America&quot;,&quot;population&quot;:33909.7,&quot;GDPcap&quot;:39069.91407,&quot;GERD&quot;:1.80213,&quot;growth&quot;:3.21494841},
  {&quot;country&quot;:&quot;Chile&quot;,&quot;continent&quot;:&quot;America&quot;,&quot;population&quot;:17248.45,&quot;GDPcap&quot;:15106.73205,&quot;GERD&quot;:0.39451,&quot;growth&quot;:5.19813626},
  {&quot;country&quot;:&quot;Czech Republic&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:10286.3,&quot;GDPcap&quot;:25956.76492,&quot;GERD&quot;:1.52652,&quot;growth&quot;:1.65489834},
  {&quot;country&quot;:&quot;Denmark&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:5495.246,&quot;GDPcap&quot;:40169.83173,&quot;GERD&quot;:3.01937,&quot;growth&quot;:1.04974368},
  {&quot;country&quot;:&quot;Estonia&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:1335.347,&quot;GDPcap&quot;:22403.02459,&quot;GERD&quot;:1.44122,&quot;growth&quot;:7.63563272},
  {&quot;country&quot;:&quot;Finland&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:5366.482,&quot;GDPcap&quot;:37577.71225,&quot;GERD&quot;:3.84137,&quot;growth&quot;:2.85477157},
  {&quot;country&quot;:&quot;France&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:62747.78,&quot;GDPcap&quot;:34147.98907,&quot;GERD&quot;:2.20646,&quot;growth&quot;:1.47996142},
  {&quot;country&quot;:&quot;Germany&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:82852.47,&quot;GDPcap&quot;:39389.25874,&quot;GERD&quot;:2.78056,&quot;growth&quot;:2.99558644},
  {&quot;country&quot;:&quot;Greece&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:11312.16,&quot;GDPcap&quot;:26878.00015,&quot;GERD&quot;:0.5921,&quot;growth&quot;:-6.90796403},
  {&quot;country&quot;:&quot;Hungary&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:9993.116,&quot;GDPcap&quot;:21731.55484,&quot;GERD&quot;:1.14821,&quot;growth&quot;:1.69192342},
  {&quot;country&quot;:&quot;Iceland&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:308.038,&quot;GDPcap&quot;:35641.55402,&quot;GERD&quot;:2.64107,&quot;growth&quot;:-3.99988322},
  {&quot;country&quot;:&quot;Ireland&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:4394.382,&quot;GDPcap&quot;:40457.94273,&quot;GERD&quot;:1.78988,&quot;growth&quot;:-0.42935239},
  {&quot;country&quot;:&quot;Israel&quot;,&quot;continent&quot;:&quot;Asia&quot;,&quot;population&quot;:7623.6,&quot;GDPcap&quot;:28595.68799,&quot;GERD&quot;:4.2504,&quot;growth&quot;:4.84602001},
  {&quot;country&quot;:&quot;Italy&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:59059.66,&quot;GDPcap&quot;:32580.06572,&quot;GERD&quot;:1.26841,&quot;growth&quot;:0.43108032},
  {&quot;country&quot;:&quot;Japan&quot;,&quot;continent&quot;:&quot;Asia&quot;,&quot;population&quot;:126912.8,&quot;GDPcap&quot;:33751.23348,&quot;GERD&quot;:3.33499,&quot;growth&quot;:3.96559062},
  {&quot;country&quot;:&quot;Korea&quot;,&quot;continent&quot;:&quot;Asia&quot;,&quot;population&quot;:48988.83,&quot;GDPcap&quot;:29101.34563,&quot;GERD&quot;:3.3609,&quot;growth&quot;:6.16184325},
  {&quot;country&quot;:&quot;Luxembourg&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:483.701,&quot;GDPcap&quot;:86226.3276,&quot;GERD&quot;:1.67862,&quot;growth&quot;:2.67806902},
  {&quot;country&quot;:&quot;Mexico&quot;,&quot;continent&quot;:&quot;America&quot;,&quot;population&quot;:109219.9,&quot;GDPcap&quot;:15200.22119,&quot;GERD&quot;:0.41322,&quot;growth&quot;:5.56185685},
  {&quot;country&quot;:&quot;Netherlands&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:16480.79,&quot;GDPcap&quot;:43455.30129,&quot;GERD&quot;:1.81965,&quot;growth&quot;:1.18517739},
  {&quot;country&quot;:&quot;New Zealand&quot;,&quot;continent&quot;:&quot;Oceania&quot;,&quot;population&quot;:4291.9,&quot;GDPcap&quot;:29870.67748,&quot;GERD&quot;:1.13693,&quot;growth&quot;:2.33052515},
  {&quot;country&quot;:&quot;Norway&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:4789.628,&quot;GDPcap&quot;:57230.89,&quot;GERD&quot;:1.75922,&quot;growth&quot;:1.59773989},
  {&quot;country&quot;:&quot;Poland&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:37725.21,&quot;GDPcap&quot;:19882.99226,&quot;GERD&quot;:0.67502,&quot;growth&quot;:4.34962928},
  {&quot;country&quot;:&quot;Portugal&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:10684.97,&quot;GDPcap&quot;:25425.59561,&quot;GERD&quot;:1.65519,&quot;growth&quot;:-1.60958484},
  {&quot;country&quot;:&quot;Russian Federation&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:142822.5,&quot;GDPcap&quot;:19833,&quot;GERD&quot;:1.24252,&quot;growth&quot;:4.03428262},
  {&quot;country&quot;:&quot;Slovak Republic&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:5404.493,&quot;GDPcap&quot;:24429.61828,&quot;GERD&quot;:0.48056,&quot;growth&quot;:3.34920254},
  {&quot;country&quot;:&quot;Slovenia&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:2029.418,&quot;GDPcap&quot;:27559.75186,&quot;GERD&quot;:1.85642,&quot;growth&quot;:-0.17459255},
  {&quot;country&quot;:&quot;South Africa&quot;,&quot;continent&quot;:&quot;Africa&quot;,&quot;population&quot;:50384.55,&quot;GDPcap&quot;:10497.583,&quot;GERD&quot;:0.92523,&quot;growth&quot;:2.784},
  {&quot;country&quot;:&quot;Spain&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:44835.48,&quot;GDPcap&quot;:32779.3288,&quot;GERD&quot;:1.38357,&quot;growth&quot;:-0.06947685},
  {&quot;country&quot;:&quot;Sweden&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:9276.365,&quot;GDPcap&quot;:41526.2995,&quot;GERD&quot;:3.61562,&quot;growth&quot;:3.93555895},
  {&quot;country&quot;:&quot;Switzerland&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:7889.345,&quot;GDPcap&quot;:46621.77334,&quot;GERD&quot;:2.99525,&quot;growth&quot;:2.71404473},
  {&quot;country&quot;:&quot;Turkey&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:73497,&quot;GDPcap&quot;:15666.18783,&quot;GERD&quot;:0.84902,&quot;growth&quot;:9.00558548},
  {&quot;country&quot;:&quot;United Kingdom&quot;,&quot;continent&quot;:&quot;Europe&quot;,&quot;population&quot;:62761.35,&quot;GDPcap&quot;:35715.4691,&quot;GERD&quot;:1.82434,&quot;growth&quot;:2.09209263},
  {&quot;country&quot;:&quot;United States&quot;,&quot;continent&quot;:&quot;America&quot;,&quot;population&quot;:313232,&quot;GDPcap&quot;:46587.61843,&quot;GERD&quot;:2.78518,&quot;growth&quot;:3.02171711}
]</pre>
<p>and get this done, and furthermore if you are thinking &#8220;Hey, I can do this in Excel from my csv file, with one formula that I will copy across the rows&#8221;, <strong>you need to stop right now in the name of all that is good and holy</strong>.<br />
Even though it works: </p>
<p><iframe src="https://jckr.github.io/blog/stuff/data%20example/data-example1.html" width=512px height=520px scrolling=no style="border:0px"></iframe><br />
<a href="http://jckr.github.io/blog/stuff/data%20example/data-example1.html">See example in its own tab or window</a></p>
<p>This approach has a number of flaws which you can all avoid if you read on.<br />
First, the execution of your program will be stopped while your browser reads the source code that contains the &#8220;data&#8221; variable. This is negligible for 36 rows, but as objects get bigger and more complex, an equivalent variable may take seconds or even minutes to load. And now we have a problem.<br />
That&#8217;s a problem for your users. Now to you: creating a JSON variable from tabular data is tedious and error prone. The formula editing interface in Excel doesn&#8217;t really help you spot where you have misplaced a quote or a colon. As a result, this is very time-consuming. </p>
<p>Don&#8217;t do that: there is a much simpler way.</p>
<p>Enters the d3.csv function.</p>
<pre class="brush: jscript; title: ; notranslate" title="">d3.csv(&quot;data.csv&quot;,function(csv) {
  // we first sort the data

  csv.sort(function(a,b) {return b.population-a.population;});

  // then we create the marks, which we put in an initial position

  svg.selectAll(&quot;circle&quot;).data(csv).enter()
    .append(&quot;circle&quot;)
    .attr(&quot;cx&quot;,function(d) {return x(0);})
    .attr(&quot;cy&quot;,function(d) {return y(0);})
    .attr(&quot;r&quot;,function(d) {return r(0);})

    .style(&quot;fill&quot;,function(d) {return c(d.continent);})
    .style(&quot;opacity&quot;,function(d) {return o(+d.GDPcap);})

      .append(&quot;title&quot;)
      .text(function(d) {return d.country;})
  
  // now we initiate - moving the marks to their position

  svg.selectAll(&quot;circle&quot;).transition().duration(1000)
    .attr(&quot;cx&quot;,function(d) {return x(+d.GERD);})
    .attr(&quot;cy&quot;,function(d) {return y(+d.growth);})
    .attr(&quot;r&quot;,function(d) {return r(Math.sqrt(+d.population));})
})</pre>
<p>Here&#8217;s how it works.<br />
You tell your d3.csv function the location of a csv file, (which we had all along) and a function that must run on the array of objects (what we always wanted) created by using the first row as keys.<br />
In other words, once inside the d3.csv function, the &#8220;csv&#8221; variable will be worth exactly what we assigned to &#8220;data&#8221; earlier, with one major difference, it&#8217;s that we didn&#8217;t have to manufacture this variable or do any kind of manual intervention: we are certain it corresponds to the file exactly. </p>
<p>One nice thing with this method is that since your variable is not explicitly in the source code, your browser can read it much faster. The data is only read when the d3.csv function is called, as opposed to the previous approach where the entirety of the source code (including the data) had to be read before the first statement could be executed. Of course, it only makes a difference when the data size is significant. But using the d3.csv approach would let you display a &#8220;loading data&#8221; warning somewhere on your page, and remove it when inside d3.csv. Much better than a blank page.</p>
<p>Three caveats with this method.</p>
<ul>
<li>This will no longer work in a local file system (ie opening a file in the browser). The resulting file can only run on a webserver, which can be local (ie the page has a url). </li>
<li>whatever happens within the d3.csv function is no longer in the global scope of the program. This means that after the program has run its course you cannot open the javascript console and inspect the value of &#8220;csv&#8221;, for instance. This makes these programs slightly more difficult to debug (there are obviously ways, though).</li>
<li>Everything read from the file is treated as strings. Javascript does a lot of type conversion but be mindful of that or you will have surprises. This is why I wrote x(+d.GERD) for instance (+ before a string converts it to a number).</li>
</ul>
<p>To celebrate this superior way of aquiring data, we&#8217;ve thrown in animated data entry: the circles are initiated at a default value and move towards their position. You may want to check the link to see the transition effect.</p>
<p><iframe src="https://jckr.github.io/blog/stuff/data%20example/data-example2.html" width=512px height=520px scrolling=no style="border:0px"></iframe><br />
<a href="http://jckr.github.io/blog/stuff/data%20example/data-example2.html">See example in its own tab or window</a></p>
<p>So, at the level of the mark (ie our circles) the most comfortable form of data is an object with at least as many keys as there will be graphical properties to change dynamically.<br />
One flat array of data is fine if we have just one series of data. But what if we have several series? Indeed, most visualizations have a structure and a hierarchy.<br />
So let&#8217;s proceed with our data but now let&#8217;s assume that we want to show values for different continents as different little scatterplots (&#8220;small multiples&#8221;).<br />
Intuitively:
<ul>
<li>we&#8217;ll want to add 5 &#8220;g&#8221; groups to our svg container, one for each continent,</li>
<li>and then add one dots per country in each continent to those groups.</li>
</ul>
<p>Our flat array won&#8217;t work so well then. What to do?</p>
<p>The d3 answer to this problem is the d3.nest() set of methods.<br />
d3.nest() turns a flat array of objects, which thanks to d3.csv() is a very easily available format, in an array of arrays with the hierarchy you need.<br />
Following our intuition, wouldn&#8217;t it be nice if our data would be: </p>
<ul>
<li>An array of 5 items, one for each continent, so we could create the &#8220;g&#8221; groups, </li>
<li>And if each of these 5 items contained an array with the data of all the corresponding countries, still in that object format that we love? </li>
</ul>
<p>This is exactly what d3.nest() does. d3.nest(), go!</p>
<pre class="brush: jscript; title: ; notranslate" title="">var data=d3.nest()
  .key(function(d) {return d.continent;})
  .sortKeys(d3.ascending)
  .entries(csv);</pre>
<p>With the .key() method, we are indicating what we will be using to create the hierarchy. We want to group those data by continent, so we use this syntax.<br />
.sortKeys is used to sort the keys in alphabetical order, so our panels appear in the alphabetical order of the continents. If we omit that, the panels will show up in the order of the data (ie Oceania first as Australia is the first country). We could have avoided that by sorting the data by continent first before nesting it, but it&#8217;s easier like this.<br />
Here, we just have one level of grouping, but we could have several by chaining several .key() methods.<br />
The last part of the statement, .entries(csv), says that we want to do that operation on our csv variable.</p>
<p>Here is what the data variable will look like: </p>
<pre class="brush: jscript; title: ; notranslate" title="">[
  {&quot;key&quot;:&quot;Africa&quot;,&quot;values&quot;:[...]},
  {&quot;key&quot;:&quot;America&quot;,&quot;values&quot;:[
    {&quot;country&quot;:&quot;United States&quot;,&quot;continent&quot;:&quot;America&quot;,&quot;population&quot;:&quot;313232&quot;,&quot;GDPcap&quot;:&quot;46587.61843&quot;,&quot;GERD&quot;:&quot;2.78518&quot;,&quot;growth&quot;:&quot;3.02171711&quot;},
     {&quot;country&quot;:&quot;Mexico&quot;,&quot;continent&quot;:&quot;America&quot;,&quot;population&quot;:&quot;109219.9&quot;,&quot;GDPcap&quot;:&quot;15200.22119&quot;,&quot;GERD&quot;:&quot;0.41322&quot;,&quot;growth&quot;:&quot;5.56185685&quot;},
      {&quot;country&quot;:&quot;Canada&quot;,&quot;continent&quot;:&quot;America&quot;,&quot;population&quot;:&quot;33909.7&quot;,&quot;GDPcap&quot;:&quot;39069.91407&quot;,&quot;GERD&quot;:&quot;1.80213&quot;,&quot;growth&quot;:&quot;3.21494841&quot;},      {&quot;country&quot;:&quot;Chile&quot;,&quot;continent&quot;:&quot;America&quot;,&quot;population&quot;:&quot;17248.45&quot;,&quot;GDPcap&quot;:&quot;15106.73205&quot;,&quot;GERD&quot;:&quot;0.39451&quot;,&quot;growth&quot;:&quot;5.19813626&quot;}
  ]
}, 
  {&quot;key&quot;:&quot;Asia&quot;,&quot;values&quot;:[...]},
  {&quot;key&quot;:&quot;Europe&quot;,&quot;values&quot;:[...]},
  {&quot;key&quot;:&quot;Oceania&quot;,&quot;values&quot;:[...]},
]</pre>
<p>Now that we have our data in an ideal form let&#8217;s draw those marks: </p>
<pre class="brush: jscript; title: ; notranslate" title="">  // One cell for each continent
  var g=svg.selectAll(&quot;g&quot;).data(data).enter()
    .append(&quot;g&quot;)
    .attr(&quot;transform&quot;,function(d,i) {return &quot;translate(&quot;+(100*i)+&quot;,0)&quot;;});
  // we add a rect element with a title element
  // so that mousing over the cell will tell us which continent it is
  g
    .append(&quot;rect&quot;)
    .attr(&quot;x&quot;,cmargin)
    .attr(&quot;y&quot;,cmargin)
    .attr(&quot;width&quot;,cwidth-2*cmargin)
    .attr(&quot;height&quot;,cheight-2*cmargin)
      .append(&quot;title&quot;)
      .text(function(d) {return d.key;})
  // we also write its name below.
  g
    .append(&quot;text&quot;)
    .attr(&quot;y&quot;,cheight+10)
    .attr(&quot;x&quot;,cmargin)
    .text(function(d) {return d.key;})
  
  // now marks, initiated to default values
  g.selectAll(&quot;circle&quot;)
  // we are getting the values of the countries like this:
  .data(function(d) {return d.values}) 
  .enter()
      .append(&quot;circle&quot;)
      .attr(&quot;cx&quot;,cmargin)
      .attr(&quot;cy&quot;,cheight-cmargin)
      .attr(&quot;r&quot;,1)
      // throwing in a title element
      .append(&quot;title&quot;)
        .text(function(d) {return d.country;});

  // finally, we animate our marks in position
  g.selectAll(&quot;circle&quot;).transition().duration(1000)
      .attr(&quot;r&quot;,3)
      .attr(&quot;cx&quot;,function(d) {return x(+d.GERD);})
      .attr(&quot;cy&quot;,function(d) {return y(+d.growth);})
      .style(&quot;opacity&quot;,function(d) {return o(d.population)})
      .style(&quot;opacity&quot;,function(d) {return o(+d.GDPcap);})</pre>
<p>(you may want to click on the link to see the transition effect and read the full source).<br />
<iframe src="https://jckr.github.io/blog/stuff/data%20example/data-example3.html" width=512px height=122px scrolling=no style="border:0px"></iframe><br />
<a href="http://jckr.github.io/blog/stuff/data%20example/data-example3.html">See example in its own tab or window</a></p>
<p>This is all very nice but wouldn&#8217;t it be better if we could characterize some aggregate information from the continents? Let&#8217;s try to find out the average values for R&#038;D expenditure and GDP growth. </p>
<p>Can it be done easily? This is a job for the other main d3.nest method, rollup.</p>
<p>rollup is the aggregating function. Here&#8217;s an example.</p>
<pre class="brush: jscript; title: ; notranslate" title="">var avgs=d3.nest()
    .key(function(d) {return d.continent;})
    .sortKeys(d3.ascending)
    .rollup(function(d) {
      return {
        GERD:d3.mean(d,function(g) {return +g.GERD;}),
        growth:d3.mean(d,function(g) {return +g.growth})
      };
    })
    .entries(csv);
</pre>
<p>Remember how the combination of .key() and .entries() rearranges an array into arrays of smaller arrays, depending on these keys? well, the value that is being passed to the function inside the rollup method is each of these arrays (ie an array of all the objects corresponding to countries in America, then an array of all the objects corresponding to countries in Europe, etc.)<br />
Also, if we use sortKeys in our previous nesting effort we&#8217;d better use it here too.<br />
Here is what the variable will look like: </p>
<pre class="brush: jscript; title: ; notranslate" title="">[
  {
    &quot;key&quot;:&quot;Africa&quot;,
    &quot;values&quot;:{
      &quot;GERD&quot;:0.92523,
      &quot;growth&quot;:2.784
    }
  },  
  {
    &quot;key&quot;:&quot;America&quot;,
    &quot;values&quot;:{
      &quot;GERD&quot;:1.34876,
      &quot;growth&quot;:4.2491646575
    }
  },
  {
    &quot;key&quot;:&quot;Asia&quot;,
    &quot;values&quot;:{
      &quot;GERD&quot;:3.6487633333333336,
      &quot;growth&quot;:4.991151293333334
    }
  },
  {
    &quot;key&quot;:&quot;Europe&quot;,
    &quot;values&quot;:{
      &quot;GERD&quot;:1.8769234615384616,
      &quot;growth&quot;:1.7901778096153846
    }
  },
  {
    &quot;key&quot;:&quot;Oceania&quot;,
    &quot;values&quot;:{
      &quot;GERD&quot;:1.6753,
      &quot;growth&quot;:2.40821416
    }
  }
]</pre>
<p>Incredible! just the values we need.<br />
Now it&#8217;s just a matter of adding them to the sketch. Two little additions here: </p>
<pre class="brush: jscript; title: ; notranslate" title="">// we add 2 lines for the average. They will start at a default value.
  g
    .append(&quot;line&quot;).classed(&quot;growth&quot;,1)
    .attr(&quot;x1&quot;,cmargin).attr(&quot;x2&quot;,cwidth-cmargin)
    .attr(&quot;y1&quot;,cheight-cmargin)
    .attr(&quot;y2&quot;,cheight-cmargin)
    // we give these lines a title for mouseover interaction.
      .append(&quot;title&quot;).text(function(d,i) {
        return &quot;Average growth:&quot;+avgs[i].values.growth
      });
  g.append(&quot;line&quot;).classed(&quot;GERD&quot;,1)
    .attr(&quot;y1&quot;,cmargin)
    .attr(&quot;y2&quot;,cheight-cmargin)
    .attr(&quot;x1&quot;,cmargin)
    .attr(&quot;x2&quot;,cmargin)
      .append(&quot;title&quot;).text(function(d,i) {
        return &quot;Average GERD:&quot;+avgs[i].values.GERD
      });

 ...
  // we also animate the lines
  g.select(&quot;.growth&quot;).transition().duration(1000)
    .attr(&quot;y1&quot;,function(d,i) {return y(avgs[i].values.growth);})
    .attr(&quot;y2&quot;,function(d,i) {return y(avgs[i].values.growth);})
  g.select(&quot;.GERD&quot;).transition().duration(1000)
    .attr(&quot;x1&quot;,function(d,i) {return x(avgs[i].values.GERD);})
    .attr(&quot;x2&quot;,function(d,i) {return x(avgs[i].values.GERD);})</pre>
<p>This is the final example &#8211; again you may want to click on the link to see the transition and get the entirety of the source.<br />
<iframe src="https://jckr.github.io/blog/stuff/data%20example/data-example4.html" width=512px height=122px scrolling=no style="border:0px"></iframe><br />
<a href="http://jckr.github.io/blog/stuff/data%20example/data-example4.html">See example in its own tab or window</a></p>
<p>To wrap up:</p>
<ul>
<li>At the mark level, you want to have objects with as many properties as you need graphical variables (like x,y, fill, etc.)</li>
<li>using d3.csv() and a flat file will make this easy (d3 also provides functions like d3.json or d3.xml to process data in another format).</li>
<li>d3.nest can help you group your entries to structure your data and create more sophisticated visualizations</li>
<li>rollup can be used to aggregate the data grouped using d3.nest</li>
</ul>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-1297" class="post-1297 post type-post status-publish format-standard hentry category-d3 category-data-visualization category-tips">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/2012/05/24/making-of-the-map-of-congress-equality/" rel="bookmark"><time class="entry-date published" datetime="2012-05-24T12:36:37+00:00">May 24, 2012</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> on <a href="/category/d3/" rel="category tag">d3</a>, <a href="/category/data-visualization/" rel="category tag">data visualization</a>, <a href="/category/tips/" rel="category tag">tips</a>			</span>
		        <h1 class="post-title"><a href="/2012/05/24/making-of-the-map-of-congress-equality/" rel="bookmark">Making-of: the map of congress equality</a></h1>
         
    </header>
	<section class="post-content">

		<p><div id="attachment_1290" style="width: 620px" class="wp-caption aligncenter"><a href="http://jckr.github.io/blog/projects/elections/parite.html"><img class="size-full wp-image-1290" title="La paritÃ©, c'est maintenant" src="https://jckr.github.io/blog/wp-content/uploads/2012/05/parite.png" alt="" width="610" height="572" /></a><p class="wp-caption-text">It&#39;s all about this map (click for interactive version)</p></div></p>
<p>To my datavis readers, sorry for that string of posts in French but what better data to visualize than political data, and what better time to visualize political data than election time, and what better audience for such visualizations than the folks who are asked to vote?</p>
<p><a href="http://jckr.github.io/blog/blog/2012/05/15/making-of-cutting-paris-in-voting-districts/">Like last time</a>, though, I am writing a follow-up technical post about how I dealt with the issues of this visualization.</p>
<p>So anyone who ever tried to make data visualizations knows that you can hardly start without <strong>data</strong>.</p>
<p>My ingredients for the recipe were:</p>
<p>2012 presidential election results <a href="http://www.data.gouv.fr/donnees/view/Pr%C3%A9sidentielle-2012%2C-r%C3%A9sultats-par-circonscriptions-l%C3%A9gislatives%2C-2%C3%A8me-tour-551768?xtmc=presidentielle+circonscription&amp;xtcr=4">by circonscription</a>, plus those <a href="http://www.data.gouv.fr/donnees/view/R%C3%A9sultats-par-circonscription-%C3%A9lection-pr%C3%A9sidentielle-2007---Tours-1-et-2-30379819?xtmc=presidentielle+circonscription&amp;xtcr=1">of 2007</a>.</p>
<p>Results of the <a href="http://www.data.gouv.fr/donnees/view/R%C3%A9sultats-par-circonscription-%C3%A9lections-l%C3%A9gislatives-2007---Tour-1-383529">previous</a> <a href="http://www.data.gouv.fr/donnees/view/R%C3%A9sultats-par-circonscription-%C3%A9lections-l%C3%A9gislatives-2007---Tour-2-383531">congressional </a>election. There were 2 files, one per round, as opposed to a flat file of <em>dÃ©putÃ©s </em>in place (I didn&#8217;t find one that didn&#8217;t required some significant editing to be of use). Most importantly, I needed their political orientation which required some tweaking.</p>
<p>Matching tables between <a href="http://www.data.gouv.fr/donnees/view/Table-de-correspondance-des-communes-et-des-cantons-avec-les-circonscriptions-l%C3%A9gislat-551418?xtmc=communes+circonscription&amp;xtcr=1">circonscriptions and cities</a>.Â Â From a previous project, presidential election data at the city level. Also, <a href="http://professionnels.ign.fr/ficheProduitCMS.do?idDoc=5323862">geo coordinates of the cities</a>.</p>
<p>The data which was most painful to extract was the list of candidates. In all fairness, UMP made it easier than PS as they had them all on <a href="http://www.u-m-p.org/actualites/a-la-une/candidats-investis-ou-soutenus-par-le-conseil-national-de-lump-du-4982102">a page</a>. For PS, they had a google fusion table which had <a href="https://www.google.com/fusiontables/DataSource?docid=14Nu51pqxD4PmZd8FlcSqQNruHR1yfZgg0QJwe_A">this</a> as a data source. That file required a lot of massaging. Eventually local pages of the PS site would list the candidates missing from the map (or provide alternate names). When it was up, I also used theÂ <a href="http://www.elections-legislatives.fr/">http://www.elections-legislatives.fr/</a>Â site to check for the missing names.</p>
<p>Finally, I figured out the genders of all the candidates by extracting their first name and looking up all the ones I wasn&#8217;t sure about (there are quite a few unisex first names in French).</p>
<p>Now <strong>calculations</strong>.</p>
<p>There is a pretty strong statistical link between the score of a party on an election in a certain territory, and the chances of a congress candidate of the same party of winning the district.</p>
<p>Predicting these chances is a well-known problem known as <em>classification </em>Â for which the textbook method is <em>logistic regression.</em></p>
<p>All we need was the 575 districtsÂ for which I had results. We then associate the score of a party at the 2nd round of the election to whether the corresponding congress candidate got elected (1 or 0). That gives us <a href="http://jckr.github.io/blog/projects/elections/deputes.txt">1150 pairs of values</a> which we throw in the mathematical cooking pot.</p>
<p>And what we get is the following formula:</p>
<p><a href="http://jckr.github.io/blog/wp-content/uploads/2012/05/equation.png"><img class="aligncenter size-full wp-image-1305" title="equation" src="https://jckr.github.io/blog/wp-content/uploads/2012/05/equation.png" alt="" width="297" height="66" /></a></p>
<p>where x is the score in the previous election (between 0 and 1). Â As you can see when x gets close to 0, the denominator becomes a very large number and the probability quickly drops to virtually nothing, and converserly when x gets close to 1, the denominator becomes very close to 1 so the probability rises up to 1 equally fast.</p>
<p><iframe style="border: none;" src="https://jckr.github.io/blog/stuff/littlesigmoid.html" scrolling="no" width="502px" height="270px"></iframe></p>
<p>With this and that in place, it is possible to come up with a <a href="http://jckr.github.io/blog/projects/elections/pariteFM.csv">reasonable estimation</a> of the chances of any candidate based on the recent results. As an aside, the current Prime Minister has renewed the tradition started by his predecessor to ask ministers to seek office and to force them to step down if they fail to win their district. As a result, 24 out of the 37 ministers are campaigning. Out of those 24, 2 are taking very serious risks according to this model: Marie-Anne Carlotti and BenoÃ®t Hamon.</p>
<p>Finally, <strong>geography</strong>.</p>
<p>In an ideal world, there will be an abundance of geoJSON files describing France and its many administrative entities. Usable data must exist somewhere, because the maps onÂ <a href="view-source:http://www.elections-legislatives.fr/candidats.asp">www.elections-legislatives.fr</a>Â have all been generated (by Raphael.js says the source code). If I&#8217;m doing another project on these elections I might reverse engineer the shape of the maps to extract the coordinates.</p>
<p>Without a dataset, the work of drawing the boundaries of 577 districts is just huge. However, accuracy is not required as I&#8217;m only putting the districts on a map so people can look up where they live or places they know. <a href="http://jckr.github.io/blog/blog/2012/05/15/making-of-cuttâ€¦ting-districts/">In my previous work</a> in order to let users change the composition of the districts, I wanted to be rigorous in the placement of everything but here we can live with imperfection.</p>
<p>So I am using the same <a href="http://jckr.github.io/blog/blog/2012/05/15/making-of-cuttâ€¦ting-districts/">principle as I did</a>: voronoi tesselation.</p>
<p>For each district I am picking the largest city, for which I have the coordinates. But most large cities belong to several districts. So I am adding random noise to each point. Then, I am drawing shapes around them.</p>
<p><iframe style="border: none;" src="https://jckr.github.io/blog/stuff/littlevoronoi.html" scrolling="no" width="502px" height="270px"></iframe></p>
<p>That would normally fill a rectangle, so in order to make it look like France, I have drawn a <a href="http://commons.oreilly.com/wiki/index.php/SVG_Essentials/Clipping_and_Masking">clipping mask</a> on top of it (that, I&#8217;ve done by hand, picking coordinates of the outline of France).</p>
<p>That about wraps it up!</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-1289" class="post-1289 post type-post status-publish format-standard hentry category-d3 category-data-visualization category-francais">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/2012/05/23/la-parite-cest-maintenant/" rel="bookmark"><time class="entry-date published" datetime="2012-05-23T17:56:51+00:00">May 23, 2012</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> on <a href="/category/d3/" rel="category tag">d3</a>, <a href="/category/data-visualization/" rel="category tag">data visualization</a>, <a href="/category/francais/" rel="category tag">franÃ§ais</a>			</span>
		        <h1 class="post-title"><a href="/2012/05/23/la-parite-cest-maintenant/" rel="bookmark">La paritÃ©, c&#8217;est maintenant?</a></h1>
         
    </header>
	<section class="post-content">

		<p><div id="attachment_1290" style="width: 620px" class="wp-caption aligncenter"><a href="http://jckr.github.io/blog/projects/elections/parite.html"><img class="size-full wp-image-1290" title="La paritÃ©, c'est maintenant" src="https://jckr.github.io/blog/wp-content/uploads/2012/05/parite.png" alt="" width="610" height="572" /></a><p class="wp-caption-text">Cliquez sur l&#39;image pour arriver Ã  l&#39;application interactive</p></div></p>
<p>J&#8217;ai eu l&#8217;idÃ©e de crÃ©er cette carte quand j&#8217;ai pu mettre la main sur les donnÃ©es des rÃ©sultats de la prÃ©sidentielle par circonscription lÃ©gislative. En 2007, les rÃ©sulats du deuxiÃ¨me tour ont Ã©tÃ© un trÃ¨s bon prÃ©dicteur de ceux des lÃ©gislatives qui ont suivi: une circonscription pour qui un candidat Ã  la prÃ©sidentielle au second tour a fait ne serait-ce que 52% a plus de 75% de chances d&#8217;Ãªtre remportÃ©e par le dÃ©putÃ© du mÃªme parti.<br />
Et encore, tout le monde s&#8217;Ã©tait accordÃ© Ã  dire qu&#8217;en 2007, la gauche avait fait une trÃ¨s bonne campagne et qu&#8217;elle avait <a href="http://www.rfi.fr/actufr/articles/090/article_52924.asp">endiguÃ© la vague bleue</a>. Les probabilitÃ©s sont sÃ»rement encore plus Ã©levÃ©es.</p>
<p>Or, presque 80% des circonscriptions ont Ã©tÃ© gagnÃ©es avec un score supÃ©rieur Ã  52%, ce qui est donc une trÃ¨s grosse marge. Dans plus du quart d&#8217;entre elles, le gagnant du scrutin a mÃªme rÃ©coltÃ© plus de 60% des voix&#8230;</p>
<p>Bref. Dans la plupart des circonscriptions, il n&#8217;y aura pas tellement de suspsens. LÃ  oÃ¹ je vote, on n&#8217;a pas souvent le droit Ã  un deuxiÃ¨me tour.</p>
<p>Comme pour<a href="http://jckr.github.io/blog/blog/2012/05/15/le-decoupage-de-paris-en-circonscriptions/"> le dÃ©coupage Ã©lectoral</a>, je trouve Ã§a un peu dÃ©rangeant. L&#8217;Ã©lection n&#8217;est pas tant la rencontre entre une personne et une population qui la choisit, mais surtout le fait d&#8217;un parti qui place ses pions, surtout si on rajoute les &#8220;accords Ã©lectoraux&#8221;. Je crois que j&#8217;ai moins de chance de rencontrer la candidate <em>challenger</em> de ma circonscription que de voir FranÃ§ois Hollande ou Nicolas Sarkozy &#8220;en vrai&#8221;.</p>
<p>Alors pourquoi ne pas en profiter pour s&#8217;approcher de la paritÃ© Ã  l&#8217;assemblÃ©e?</p>
<p>Pourquoi ne pas le faire d&#8217;abord: si un parti ne prÃ©sente pas autant de femmes que d&#8217;hommes, il rÃ©cupÃ¨re une amende. Ou plutÃ´t, comme l&#8217;explique bien <a href="http://www.lemonde.fr/politique/article/2012/05/22/les-manquements-a-la-parite-coutent-cher-aux-partis_1705246_823448.html">Alexandre LÃ©chenet</a>, Â il perd des financements. Mais le mode de calcul est biaisÃ©. Un parti rÃ©cupÃ¨re une certaine somme par voix Â au niveau national, puis cette somme est minorÃ©e si les femmes reprÃ©sentent moins de la moitiÃ© des candidats. Pour contrer ce systÃ¨me, il aurait Ã©tÃ© plus judicieux de le baser sur la proportion des voix <em>remportÃ©es</em> par des femmes, pas sur celles qu&#8217;on a alignÃ©es au dÃ©part.</p>
<p>Donc, on envoie les femmes au casse-pipe: on les met dans des circonscriptions impossibles Ã  gagner, histoire d&#8217;Ã©viter l&#8217;amende. Il y a presque 100 candidates qui se retrouvent contre le reprÃ©sentant d&#8217;un parti qui a fait plus de 55% au second tour.</p>
<p>A Paris, par exemple, Annie Novelli dÃ©fie Claude Goasguen dans la 14Ã¨me circonscription (qui a votÃ© Ã  77% pour Sarkozy) et c&#8217;est AgnÃ¨s Pannier qui affronte Bernard DebrÃ© dans la 4Ã¨me (75% pour Sarkozy). Pendant ce temps, Roxane Decorte se frotte Ã  Daniel Vaillant dans la 17Ã¨me circonscription (qui a votÃ© Hollande Ã  72%).</p>
<p>Et encore, en thÃ©orie elles pourraient gagner, mais dans 238 circonscriptions, soit plus de 40%, ni le PS ni l&#8217;UMP n&#8217;ont investi de femme, comme Ã§a on est tranquille.</p>
<p>Ce qui fait qu&#8217;au final, mÃªme s&#8217;il y a 40% de candidates, le nombre d&#8217;Ã©lues devrait tourner autour de 175 soit 28%. Ce serait quand mÃªme presque 70 de plus qu&#8217;aujourd&#8217;hui, malgrÃ© le cynisme de l&#8217;actuel patron de l&#8217;UMP. EspÃ©rons qu&#8217;elle pourront aller Ã  l&#8217;AssemblÃ©e<a href="http://www.lemonde.fr/politique/article/2011/06/07/l-assemblee-se-defend-d-etre-un-bastion-du-sexisme_1533148_823448.html"> habillÃ©es comme elles veulent</a>.</p>
<p><a href="http://www.insee.fr/fr/themes/tableau.asp?reg_id=0&amp;ref_id=NATnon02145">Mine de rien</a>, il y aurait 51.5% de femmes en France.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-1277" class="post-1277 post type-post status-publish format-standard hentry category-d3 category-data-visualization category-tips">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/2012/05/15/making-of-cutting-paris-in-voting-districts/" rel="bookmark"><time class="entry-date published" datetime="2012-05-15T15:33:44+00:00">May 15, 2012</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> on <a href="/category/d3/" rel="category tag">d3</a>, <a href="/category/data-visualization/" rel="category tag">data visualization</a>, <a href="/category/tips/" rel="category tag">tips</a>			</span>
		        <h1 class="post-title"><a href="/2012/05/15/making-of-cutting-paris-in-voting-districts/" rel="bookmark">Making-of: cutting Paris in voting districts</a></h1>
         
    </header>
	<section class="post-content">

		<p>Hi, in my previous post I showcased <a href="http://jckr.github.io/blog/projects/elections/circonscriptions.html#">one of my recent projects</a>. I really enjoyed building it and so would like to share how this has been done.</p>
<p>First, getting the data. I already scraped the results of both rounds of the presidential election by city. The districts for the congress election are also known, but it&#8217;s not possible to do a match, because large cities are almost systematically broken down into several such districts. Paris, for instance, will be represented by no less than 18 <em>dÃ©putÃ©s</em>.</p>
<p>So I needed the results by the finest possible unit, that is by individual polling station. During the election night these results are compiled by city and centralized, so you would assume that the raw data of each polling station is available somewhere. That is not the case, unfortunately. Although it seems that they will be made public eventually, that may not be the case before the June 2012 election.</p>
<p>Fortunately, <a href="http://opendata.paris.fr/opendata/jsp/site/Portal.jsp?document_id=133&amp;portlet_id=102">Open Data Paris</a>Â had the results by polling station. More: it had their address and matching of every inhabited building in Paris to its corresponding polling station.</p>
<p>To map the polling stations, my first intuition was to create a <a href="http://en.wikipedia.org/wiki/Voronoi_diagram">voronoi tesselation</a> of their projected, geocoded coordinates (I only had their addresses in the raw data file). In short, voronoi polygons can be generated for a certain number of control points and correspond to the area nearer to that control point than to any other. So it&#8217;s a good approximation of the areas Â which correspond to a given polling station.</p>
<p><iframe style="border:none;" src="https://jckr.github.io/blog/stuff/littlevoronoi.html" scrolling="no" width="502px" height="270px"></iframe></p>
<p>Problem: several polling stations could be in the same address, and for the voronoi algorithm the control points have to be distinct. So I tried jittering them (adding random noise to each one). A tesselation could be done that kind of looked like Paris but voting districts will look messy as there were frequent inversions between neighboring districts.</p>
<p>So I had to come up with a better approximation of what part of the city corresponded to what voting district. So I used the address to polling station correspondance, and for each polling station I took the first and the last street number of any street that was covered by it. Then I geocoded the whole lot. That&#8217;s about 16000 points. It took some time.</p>
<p><div id="attachment_1280" style="width: 616px" class="wp-caption aligncenter"><a href="http://jckr.github.io/blog/wp-content/uploads/2012/05/centroids.png"><img class="wp-image-1280" title="centroids" src="https://jckr.github.io/blog/wp-content/uploads/2012/05/centroids.png" alt="" width="606" height="478" /></a><p class="wp-caption-text">Here&#39;s my polling station as an example.</p></div></p>
<p>Then, for each polling station area, I took the minimum and maximum longitude and latitude, which formed a bounding box, and assigned the polling station to the center of that box. Then, I used tesselation again.</p>
<p>I found a number of oddities in the geocoding that I had to correct manually, because if one address was not accurately coded, chances are it would change the shape of the bounding box drastically and so the position of its corresponding polling station. Sometimes the geocoding service wouldn&#8217;t find the street and/or would use a street of the same name in another city, sometimes they did find the street but the coordinates were way off&#8230; So the dataset required a lot of massaging before it got into shape.</p>
<p>The last geographic errand I had to do for this visualization was to create a perimeter of Paris to use as a clipping mask, else the tesselation would be done on a rectangular shape with the edge polygons being very large and very skewed. So I collected coordinates of points around Paris to create one polygon. Only what&#8217;s inside of this polygon is shown (.style(&#8220;clip-path&#8221;) in d3).</p>
<p>After the data has been acquired, the building of the rest of the datavis was nothing special. I have used extensively mouseover and click events to trigger transformations as I always do, although this time I did prepare a lot of rules.</p>
<p>Originally I wanted to make the whole of France like this, though it will be difficult: one, to get the data, and two, to get it into shape. As of today the location (i.e. street address) of most of the polling stations is not available online, so even if we got the number of votes for each of the polling stations (there should be about 40000 of them) the geographic part of the problem will remain unsolved. Though, it&#8217;s a worthy endeavour. While the election results have little interest at a macro-geographic level &#8211; by region or by <em>dÃ©partement &#8211; </em>they are very useful at a very fine level as strategies can be constructed.</p>
<p>For instance, it&#8217;s worthwhile to send heavyweights to conquer districts that are winnable, but it&#8217;s a waste to keep them in their respective fiefdoms if victory in these districts is already certain. Also, when districts would have to be redefined, having this kind of information can be invaluable to the political force which gets to draw their new limits, or to their opponents.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-1273" class="post-1273 post type-post status-publish format-standard hentry category-data-visualization category-francais">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/2012/05/15/le-decoupage-de-paris-en-circonscriptions/" rel="bookmark"><time class="entry-date published" datetime="2012-05-15T15:33:18+00:00">May 15, 2012</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> on <a href="/category/data-visualization/" rel="category tag">data visualization</a>, <a href="/category/francais/" rel="category tag">franÃ§ais</a>			</span>
		        <h1 class="post-title"><a href="/2012/05/15/le-decoupage-de-paris-en-circonscriptions/" rel="bookmark">Le dÃ©coupage de Paris en circonscriptions</a></h1>
         
    </header>
	<section class="post-content">

		<p>Mon <a href="http://jckr.github.io/blog/projects/elections/circonscriptions.html">dernier projet</a>Â permet de voir les rÃ©sultats des Ã©lections prÃ©sidentielles Ã  Paris par bureau de vote et de les projeter sur les circonscriptions qui serviront aux Ã©lections lÃ©gislatives de juin 2012.</p>
<p><a href="http://jckr.github.io/blog/projects/elections/circonscriptions.html"><img class="aligncenter size-full wp-image-1274" title="votes" src="https://jckr.github.io/blog/wp-content/uploads/2012/05/votes.jpg" alt="" width="556" height="385" /></a>Et surtout il permet de changer la composition de ces circonscriptions, dont le tracÃ© aujourd&#8217;hui est assez arbitraire. Il y aura 18 circonscriptions Ã  Paris contre 21 aujourd&#8217;hui, et elles ne suivent pas les arrondissements.</p>
<p>Le tracÃ© de ces circonscriptions est dÃ©terminant pour le rÃ©sultat des Ã©lections. Aujourd&#8217;hui, par exemple, il y a deux circonscriptions oÃ¹ Nicolas Sarkozy a rÃ©cupÃ©rÃ© plus de 75% des voix au 2Ã¨me tour de l&#8217;Ã©lection prÃ©sidentielle, j&#8217;imagine que la gauche ne place pas trop d&#8217;espoir sur leur reconquÃªte. De mÃªme, il existe pas moins de 9 circonscriptions oÃ¹ FranÃ§ois Hollande a reÃ§u plus de 60% des votes. En l&#8217;Ã©tat actuel des choses, 12 circonscriptions semblent acquises Ã  la gauche et 6 Ã  la droite, dont 3 pourraient peut-Ãªtre quand mÃªmeÂ Ãªtre gagnÃ©es par la gauche.</p>
<p>Le dÃ©coupage actuel n&#8217;est optimum ni pour la gauche, ni pour la droite. En modifiant le tracÃ© des circonscriptions, la gauche pourrait toutes les remporter, et la droite pourrait en gagner 12 sur 18 (ou peut-Ãªtre plus, 12 restant mon <em>high-score</em>Â personnel). Pour favoriser un camp, l&#8217;idÃ©e consiste Ã  rÃ©partir les bureaux de votes les plus favorables entre le plus de circonscriptions possibles, plutÃ´t que de les garder dans peu de circonscriptions. En gÃ©nÃ©ralisant sur le territoire, on imagine ce que Ã§a peut donner!</p>
<p>Donc, quelque soit le sentiment actuel, tel ou tel redÃ©coupage peut complÃ¨tement redistribuer les cartes. C&#8217;est un sentiment dÃ©rangeant parce que ces redÃ©coupages arrivent rÃ©guliÃ¨rement et sont relativement opaques. D&#8217;ailleurs, il est assez difficile de faire le lien entre les donnÃ©es des Ã©lections prÃ©sidentielles et les circonscriptions lÃ©gislatives parce que les rÃ©sultats ne sont que rarement disponibles par bureau de vote.</p>
<p>Je donnerai les dÃ©tails techniques de l&#8217;implÃ©mentation dans un futur post.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-1264" class="post-1264 post type-post status-publish format-standard hentry category-d3 category-data-visualization category-francais tag-coordonnees-paralleles tag-elections">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/2012/05/07/a-la-decouverte-des-resultats-des-presidentielles-avec-les-coordonnees-paralleles/" rel="bookmark"><time class="entry-date published" datetime="2012-05-07T19:20:39+00:00">May 7, 2012</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> on <a href="/category/d3/" rel="category tag">d3</a>, <a href="/category/data-visualization/" rel="category tag">data visualization</a>, <a href="/category/francais/" rel="category tag">franÃ§ais</a>			</span>
		        <h1 class="post-title"><a href="/2012/05/07/a-la-decouverte-des-resultats-des-presidentielles-avec-les-coordonnees-paralleles/" rel="bookmark">Ã€ la dÃ©couverte des rÃ©sultats des prÃ©sidentielles avec les coordonnÃ©es parallÃ¨les</a></h1>
         
    </header>
	<section class="post-content">

		<p style="text-align: center;"><a href="http://jckr.github.io/blog/projects/elections/dtour2012.html"><img class="aligncenter size-full wp-image-1265" title="front" src="https://jckr.github.io/blog/wp-content/uploads/2012/05/front.jpg" alt="" width="700" height="374" /></a></p>
<p>Qui dit Ã©lection prÃ©sidentielle, dit rÃ©sultats.</p>
<p>Et qui dit rÃ©sultats dit reprÃ©sentation visuelle dans les mÃ©dias.</p>
<p>Et donc souvent carte.</p>
<p>Cela dit, une carte ne nous apprend pas grand chose de ce qui s&#8217;est vraiment passÃ© dans une Ã©lection. C&#8217;est vrai que c&#8217;est utile pour retrouver sa rÃ©gion ou sa ville, mais les rÃ©sultats de deux villes proches gÃ©ographiquement (par exemple, Boulogne-Billancourt et Issy-les-Moulineaux) n&#8217;a strictement rien Ã  voir.</p>
<p>En revanche, avec une carte c&#8217;est trÃ¨s difficile de rÃ©pondre Ã  certaines questions, comme: oÃ¹ a-t-on le plus votÃ© pour Nicolas Sarkozy? Qu&#8217;est ce qui s&#8217;est passÃ© dans les villes qui ont beaucoup votÃ© pour Marine Le Pen ou FranÃ§ois Bayrou? D&#8217;oÃ¹ vient l&#8217;explosion du vote blanc au deuxiÃ¨me tour?</p>
<p>Pour rÃ©pondre Ã  ces questions, on peut utiliser les <a href="http://jckr.github.io/blog/projects/elections/dtour2012.html">coordonnÃ©es parallÃ¨les</a>.</p>
<p>Chaque axe vertical correspond Ã  un vote possible &#8211; d&#8217;abord ceux du premier tour, puis ceux du deuxiÃ¨me. Chaque ligne de couleur correspond Ã  une ville (ou Ã  un dÃ©partement, Ã  une rÃ©gion, ou Ã  la France). Chacune de ces lignes coupe chaque axe Ã  une hauteur qui correspond Ã  la proportion des gens qui ont fait tel ou tel choix. Par exemple, les villes oÃ¹ on a beaucoup votÃ© pour Jean-Luc MÃ©lenchon, comme Bagnolet ou Gennevilliers, se retrouveront vers le haut de l&#8217;axe du milieu.</p>
<p>En s&#8217;approchant des axes, le curseur devient une croix. Il suffit alors de le faire glisser le long de l&#8217;axe pour dessiner un rectangle, et mettre en valeur toutes les lignes qui passent par ce rectangle. Par exemple, voici les villes qui ont donnÃ© plus de 70% de leurs voix du second tour Ã  FranÃ§ois Hollande:</p>
<p><a href="http://jckr.github.io/blog/projects/elections/dtour2012.html"><img class="aligncenter size-full wp-image-1266" title="hollande70" src="https://jckr.github.io/blog/wp-content/uploads/2012/05/hollande70.jpg" alt="" width="700" height="500" /></a></p>
<p>&nbsp;</p>
<p>On peut tracer autant de rectangles qu&#8217;on veut. Par exemple, on peut ne garder que les endroits qui avaient soutenu Bayrou (par exemple Ã  plus de 10%).</p>
<p><a href="http://jckr.github.io/blog/projects/elections/dtour2012.html"><img class="aligncenter size-full wp-image-1267" title="hollande70bayrou10" src="https://jckr.github.io/blog/wp-content/uploads/2012/05/hollande70bayrou10.jpg" alt="" width="700" height="500" /></a></p>
<p>et voilÃ : il n&#8217;y en a plus que 2.</p>
<p>Pour supprimer une sÃ©lection, il suffit de cliquer prÃ¨s de l&#8217;axe sans glisser. Si on clique sur un rectangle, on peut aussi le faire coulisser le long de l&#8217;axe.</p>
<p>Avec cette technique, on peut tout de suite voir les fiefs de tel ou tel candidat: il s&#8217;agit des lignes qui touchent le haut du graphique.</p>
<p>On peut rÃ©pondre Ã  des questions plus complexes. Par exemple, je parlais de l&#8217;explosion du vote blanc au deuxiÃ¨me tour. Que s&#8217;est-il passÃ©?</p>
<p>SÃ©lectionnons les endroits oÃ¹ le vote blanc a dÃ©passÃ© les 4% au deuxiÃ¨me tour, tout en restant Ã  moins de 1.5% au premier tour:</p>
<p><a href="http://jckr.github.io/blog/projects/elections/dtour2012.html"><img class="aligncenter size-full wp-image-1268" title="blanc" src="https://jckr.github.io/blog/wp-content/uploads/2012/05/blanc.jpg" alt="" width="700" height="370" /></a></p>
<p>On voit trois pics: les villes oÃ¹ Marine Le Pen, Jean-Luc MÃ©lenchon ou FranÃ§ois Bayrou ont fait un trÃ¨s gros score. On peut continuer Ã  sÃ©lectionner et voir que ce sont bien les villes qui sont dans la pointe de l&#8217;un des trois triangles et pas celles qui passent par le bas qui se retrouvent dans ce cas de figure. Ces Ã©lecteurs ont prÃ©fÃ©rÃ© voter blanc plutÃ´t que de choisir.</p>
<p>Bonne exploration!</p>
<p><a href="http://jckr.github.io/blog/projects/elections/dtour2012.html">http://jckr.github.io/blog/projects/elections/dtour2012.html</a></p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-1250" class="post-1250 post type-post status-publish format-standard hentry category-data-visualization tag-conference tag-michael-madsen tag-practice tag-see-conference tag-see">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/2012/05/03/impressions-from-wiesbaden/" rel="bookmark"><time class="entry-date published" datetime="2012-05-03T01:59:15+00:00">May 3, 2012</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> on <a href="/category/data-visualization/" rel="category tag">data visualization</a>			</span>
		        <h1 class="post-title"><a href="/2012/05/03/impressions-from-wiesbaden/" rel="bookmark">Impressions from Wiesbaden</a></h1>
         
    </header>
	<section class="post-content">

		<p>I&#8217;m just returning from the 7th <a href="http://see-conference.com/">See conference</a>Â on information visualization. I&#8217;ll do a longer, more descriptive post later (a lot happens in just 2 days) but for now I would like to mention one talk which really moved me. After the conference proper which takes place in the impressive <a href="http://www.lutherkirche-wiesbaden.de/">Lutherkirche</a>Â which sit hundreds, the See+ workshop was held in the offices of the organizing agency, <a href="http://www.s-v.de/">Scholz und Volkmer</a>. Most speakers of the main conference came back for a more laid-back discussion with a much smaller audience.</p>
<p>The theme of See+ was tools. Speakers were invited to tell us how they work.</p>
<p>One characteristic of the See conference is that it offers a broader perspective on data visualization. In addition to well-known datavis specialists, such as Manuel Lima this year, other guests include visual artists and designers who also work with data, as well as experts in communication who apply that skill to data.</p>
<p>Michael Madsen is a Danish film-maker who lives in Berlin. In his see conference talk, he presented <a href="http://www.imdb.com/title/tt1194612/">Into Eternity</a>, a powerful documentary about an incredible facility in <del>Black Mesa</del> Finland which is designed to hold nuclear waste for 100,000 years. While the eerie tone of the narration is fascinating this was perhaps the topic most remote from &#8220;traditional&#8221; datavis (as in data, graphs and stuff).</p>
<p>Then came his See+ talk which took a turn I didn&#8217;t expect.</p>
<p><div style="width: 610px" class="wp-caption alignnone"><img class="" src="http://25.media.tumblr.com/tumblr_m3d58aEkJ51rv82n3o1_1280.jpg" alt="" width="600" height="800" /><p class="wp-caption-text">Pic courtesy of Joshua de Haseth. I&#39;m actually the guy on the right.</p></div></p>
<p>Filming a documentary takes at least two years by a conservative count. A filmmaker first worry is therefore to find what will drive them for that long. More than a 9 to 5 job, more than a simple theme, what they are looking for is a vision, one unique way to treat one unique subject. Michael elaborated on the difference between executing what you are told to do, and a fulfilling calling that comes from the self. The flipside is that it is very difficult to go through times of no project. One subject powerful enough to give one a reason to work everyday for years does not simply come by; it can take months or even years of doubt before one is found. In Michael&#8217;s words: when I have no project, I have no identity. But when he does, his thrill is to seek and explore as he is doing something that has never been done before.</p>
<p>(I&#8217;m leaving a lot out which is more directly related to film-making.)</p>
<p>As he was discussing that I could sense people in the room tune to this, as I did. We datavis practitioners are all makers, tinkerers, inventors. Fortunately, our work cycles are often shorter and it is easier to start a new one. Certainly, there are patterns and recipes and things that need to be done for work. There are also hacks found on stackoverflow (thanks for that) and inspiration from the works of other (and thanks for the debugging console).</p>
<p>But there is also a &#8220;great unknown&#8221; in visualization &#8211; data that has never been collected let alone represented, techniques that have never been used, combinations that have never been tried &#8211; and things that can not even be put in words. All of this requires curiosity, independence and dedication. And the outcome may not live up to expectations. But it&#8217;s just a reminder that to do what we do we must leave our comfort zones and our ways, set off and explore.</p>
<p>&nbsp;</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-1155" class="post-1155 post type-post status-publish format-standard hentry category-book-review category-data-visualization tag-book tag-designing-data-visualizations tag-noah-iliinsky tag-review tag-visualization">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/2012/04/22/designing-data-visualizations/" rel="bookmark"><time class="entry-date published" datetime="2012-04-22T17:32:58+00:00">April 22, 2012</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> on <a href="/category/book-review/" rel="category tag">book review</a>, <a href="/category/data-visualization/" rel="category tag">data visualization</a>			</span>
		        <h1 class="post-title"><a href="/2012/04/22/designing-data-visualizations/" rel="bookmark">Designing data visualizations</a></h1>
         
    </header>
	<section class="post-content">

		<p><a href="http://www.amazon.com/Designing-Data-Visualizations-Noah-Iliinsky/dp/1449312284/ref=tag_stp_s2f_edpp_data_v18on"><img class="alignnone" title="Designing data visualization book cover" src="http://covers.oreilly.com/images/0636920022060/cat.gif" alt="Designing data visualization book cover" width="180" height="236" /></a></p>
<p>Noah Iliinsky and O&#8217;Reilly were kind enough to send me one review copy of Noah&#8217;s book and who says review copy says review, so here goes.</p>
<h2>We need more introductory books to data visualization.</h2>
<p>I&#8217;ve had several discussions with data visualization colleagues who feel that there are too many books already. I strongly believe otherwise.</p>
<p>As of this writing, there are <a href="http://www.amazon.com/gp/tagging/items-tagged-with?ie=UTF8&amp;flatten=1&amp;tag=data%20visualization&amp;search=1">59 books tagged data visualization</a>Â on Amazon, versus well over a thousand for Java (for example). And on those 59, I would say about a dozen qualify as introductory. Here are 3 reasons why introductory books are important.</p>
<ul>
<li><strong>You only need to know a little to start making effective visualizations. </strong>A small book won&#8217;t teach you all there is to know about visualization, but you don&#8217;t need that to get off to a good start. A lot of this has to do with asking yourself the right questions. But this is a very unnatural thing to do, especially when you feel you can do stuff. Fortunately, even a short book can help you to pause and think.</li>
<li><strong>An effective visualization is not harder to make than a poor one</strong>. Well, actually it is, really good visualizations are built after many iterations on one promising concept. But the point is, a lot of efforts and ressources can go into abyssmal visualizations. If you are in a position to buy visualization, having even basic knowledge of how data visualization works can prevent you from wasting your money.</li>
<li><strong>There are many approaches to visualization.</strong>Â The right introductory book will be the one that resonates with you. Some people who are interested in this love to code, some are afraid of programming. Some are accomplished visual artists, some don&#8217;t know to draw. Some have specific needs (business dashboards, presentations, interactive web applications, etc.).</li>
</ul>
<h2><span class="Apple-style-span" style="font-size: 26px;"><strong>Where does designing data visualizations fit?</strong></span></h2>
<p>Designing Data Visualizations is a very short book &#8211; the advantage is that you can read this in a couple of hours. It&#8217;s perfect for a train or plane trip for instance. The format of the book (23 x 17.5 cm, flexible paperback) makes it easy to carry and read anywhere. And it&#8217;s an easy read &#8211; you won&#8217;t need to put down the book every few pages to make sure you understood.</p>
<p>The flipside of this is that you won&#8217;t learn any actionable skills from the book. The book is <strong>never trying to teach you to make things</strong> : this is explicitly outside of its scope. What is does is <strong>make you think on how to do stuff</strong>. It makes you consider the choices you make.</p>
<p>So you&#8217;re making a visualization. Does your choice of representation makes sense? how about your colors? placement? If you&#8217;re not confident that you know the answer to this kind of questions <strong>you must read the book right now</strong>; else, you won&#8217;t be able to improve your work. And again that is what successful designers do &#8211; iterate and improve, again and again and again.</p>
<p>As a non-native speaker of English one reason why I enjoy reading introductory books is for their excellent formulation of things. You know, there are those things you have a vague idea of, and the writer puts the exact words on it. So I&#8217;ll go ahead and quote my favorite paragraph :</p>
<blockquote><p>Consult [your goal] when you are about to be seduced by the siren song of circular layouts, the allure of extra data, the false prophet of &#8220;because I can&#8221;. These are distractions on your journey. As Bruce Lee would say, &#8220;It is like a finger pointing a way to the moon. Don&#8217;t concentrate on the finger or you will miss all that heavenly glory&#8221;.</p></blockquote>
<h3>Who is this book for?</h3>
<p>I think the people who would benefit the most from the books fall in two categories:</p>
<ol>
<li>Those who know absolutely nothing about visualization but have some interest in the subject. And the subset of those who don&#8217;t really have time to find out all about it (think: your client, your n+2 boss). They will appreciate that there is a real take-out value in such a short book.</li>
<li>Those who can create visualization because for instance they are coders, designers, excel users etc. and who see data visualization as a byproduct of their activity, so they never really asked themselves those questions. And among those, I&#8217;m thinking mostly of coders. Noah and I met at last year&#8217;s Strata conference which is also attended by the cream of the crop of the data scientists. I was surprised to see that some of them, despite being able to harness huge quantity of data, were severely limited in their visualization options because they never had an opportunity to learn. These people who are already at ease with the tool will see their activity supercharged thanks to the book.</li>
</ol>
<div>For a data practitioner who has already an interest in theory I won&#8217;t lie to you &#8211; reading the book will feel like patting yourself on the back and there will be little you will learn. But consider, for instance, giving copies to your customers and think of all the fruitless discussions that will Â this will save you in the course of a project.</div>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				<nav class="pagination navigation paging-navigation" role="navigation">
		<div class="nav-links">
						<div class="older-posts"><a href="/category/data-visualization/page/4/" >Older Posts <span class="meta-nav">&rarr;</span></a></div>
							<div class="page-number">Page 3 of 8</div>
						<div class="newer-posts"><a href="/category/data-visualization/page/2/" ><span class="meta-nav">&larr;</span> Newer Posts</a></div>
			
		</div><!-- .nav-links -->
	</nav><!-- .navigation -->
	
		
		</main><!-- #main -->
	</section><!-- #primary -->

	<div id="secondary" class="widget-area" role="complementary">
		<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form></aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h1 class="widget-title">Recent Posts</h1>		<ul>
					<li>
				<a href="/2016/08/17/the-big-leagues/">The big leagues</a>
						</li>
					<li>
				<a href="/2016/08/17/creating-a-react-visualization-web-app/">Creating a React visualization web app</a>
						</li>
					<li>
				<a href="/2016/08/13/beyond-rendering/">Beyond rendering</a>
						</li>
					<li>
				<a href="/2016/08/11/react-components/">React components</a>
						</li>
					<li>
				<a href="/2016/08/10/coding-with-react/">Coding with React</a>
						</li>
				</ul>
		</aside>		<aside id="recent-comments-2" class="widget widget_recent_comments"><h1 class="widget-title">Recent Comments</h1><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link"><a href='http://omeraz.wordpress.com/' rel='external nofollow' class='url'>×¢×•×ž×¨ ×¢×–×¨×™××œ</a></span> on <a href="/2016/08/17/the-big-leagues/#comment-567">The big leagues</a></li><li class="recentcomments"><span class="comment-author-link">Carlos Ayres</span> on <a href="/2012/05/28/manipulating-data-like-a-boss-with-d3/#comment-312">Manipulating data like a boss with d3</a></li><li class="recentcomments"><span class="comment-author-link"><a href='https://migrate.powertripanalytics.com/game-of-thrones-interactions-among-the-top-30-characters/' rel='external nofollow' class='url'>Game of ThronesInteractions Among the Top 30 Characters &#8211; PowerTrip Analytics</a></span> on <a href="/2013/05/13/making-the-game-of-thrones-visualization/#comment-466">Making the game of thrones visualization</a></li><li class="recentcomments"><span class="comment-author-link"><a href='https://abgoswam.wordpress.com/2016/10/08/d3-getting-started/' rel='external nofollow' class='url'>D3 &#8211; Getting Started | abgoswam&#039;s tech blog</a></span> on <a href="/2012/09/04/getting-to-hello-world-with-d3/#comment-419">Getting to &#8220;Hello world&#8221; with d3</a></li><li class="recentcomments"><span class="comment-author-link"><a href='https://plus.google.com/+BrotoBhattacharjee' rel='external nofollow' class='url'>Broto Bhattacharjee</a></span> on <a href="/2012/09/04/getting-to-hello-world-with-d3/#comment-418">Getting to &#8220;Hello world&#8221; with d3</a></li></ul></aside><aside id="archives-2" class="widget widget_archive"><h1 class="widget-title">Archives</h1>		<ul>
			<li><a href='/2016/08/'>August 2016</a></li>
	<li><a href='/2015/05/'>May 2015</a></li>
	<li><a href='/2015/02/'>February 2015</a></li>
	<li><a href='/2014/10/'>October 2014</a></li>
	<li><a href='/2013/11/'>November 2013</a></li>
	<li><a href='/2013/05/'>May 2013</a></li>
	<li><a href='/2013/03/'>March 2013</a></li>
	<li><a href='/2013/01/'>January 2013</a></li>
	<li><a href='/2012/12/'>December 2012</a></li>
	<li><a href='/2012/11/'>November 2012</a></li>
	<li><a href='/2012/10/'>October 2012</a></li>
	<li><a href='/2012/09/'>September 2012</a></li>
	<li><a href='/2012/07/'>July 2012</a></li>
	<li><a href='/2012/06/'>June 2012</a></li>
	<li><a href='/2012/05/'>May 2012</a></li>
	<li><a href='/2012/04/'>April 2012</a></li>
	<li><a href='/2012/01/'>January 2012</a></li>
	<li><a href='/2011/11/'>November 2011</a></li>
	<li><a href='/2011/10/'>October 2011</a></li>
	<li><a href='/2011/09/'>September 2011</a></li>
	<li><a href='/2011/08/'>August 2011</a></li>
	<li><a href='/2011/07/'>July 2011</a></li>
	<li><a href='/2011/06/'>June 2011</a></li>
	<li><a href='/2011/05/'>May 2011</a></li>
	<li><a href='/2011/04/'>April 2011</a></li>
	<li><a href='/2011/03/'>March 2011</a></li>
	<li><a href='/2011/02/'>February 2011</a></li>
	<li><a href='/2011/01/'>January 2011</a></li>
	<li><a href='/2010/11/'>November 2010</a></li>
	<li><a href='/2010/04/'>April 2010</a></li>
	<li><a href='/2010/03/'>March 2010</a></li>
	<li><a href='/2010/02/'>February 2010</a></li>
	<li><a href='/2010/01/'>January 2010</a></li>
	<li><a href='/2009/12/'>December 2009</a></li>
	<li><a href='/2009/10/'>October 2009</a></li>
	<li><a href='/2009/09/'>September 2009</a></li>
	<li><a href='/2009/08/'>August 2009</a></li>
	<li><a href='/2009/07/'>July 2009</a></li>
	<li><a href='/2009/06/'>June 2009</a></li>
	<li><a href='/2009/05/'>May 2009</a></li>
	<li><a href='/2008/12/'>December 2008</a></li>
	<li><a href='/2008/11/'>November 2008</a></li>
	<li><a href='/2008/10/'>October 2008</a></li>
		</ul>
		</aside><aside id="categories-2" class="widget widget_categories"><h1 class="widget-title">Categories</h1>		<ul>
	<li class="cat-item cat-item-2"><a href="/category/book-review/" >book review</a>
</li>
	<li class="cat-item cat-item-3"><a href="/category/charts/" >charts</a>
</li>
	<li class="cat-item cat-item-4"><a href="/category/conferences/" >conferences</a>
</li>
	<li class="cat-item cat-item-5"><a href="/category/d3/" >d3</a>
</li>
	<li class="cat-item cat-item-6"><a href="/category/dashboards/" >dashboards</a>
</li>
	<li class="cat-item cat-item-7"><a href="/category/data-publishing/" >data publishing</a>
</li>
	<li class="cat-item cat-item-8 current-cat"><a href="/category/data-visualization/" >data visualization</a>
</li>
	<li class="cat-item cat-item-9"><a href="/category/francais/" >franÃ§ais</a>
</li>
	<li class="cat-item cat-item-10"><a href="/category/javascript/" >javascript</a>
</li>
	<li class="cat-item cat-item-11"><a href="/category/presentation/" >presentation</a>
</li>
	<li class="cat-item cat-item-12"><a href="/category/protovis/" >protovis</a>
</li>
	<li class="cat-item cat-item-13"><a href="/category/react/" >react</a>
</li>
	<li class="cat-item cat-item-14"><a href="/category/tips/" >tips</a>
</li>
	<li class="cat-item cat-item-1"><a href="/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-15"><a href="/category/web-sites/" >web sites</a>
</li>
		</ul>
</aside><aside id="meta-2" class="widget widget_meta"><h1 class="widget-title">Meta</h1>			<ul>
						<li><a href="/wp-login.php">Log in</a></li>
			<li><a href="/feed/">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="/comments/feed/">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="https://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>			</ul>
			</aside>		<div class="clear">&nbsp;</div>
	</div><!-- #secondary -->
	<footer id="colophon" class="site-footer" role="contentinfo">
	    <a class="subscribe icon-feed" href="/feed/"><span class="tooltip">Subscribe!</span></a>
		<div class="site-info inner">
		    <section class="copyright">
		    			    		<a href="https://github.com/lacymorrow/casper" rel="home">Casper WP</a> by Lacy Morrow		    			    </section>
		</div><!-- .site-info -->
	</footer><!-- #colophon -->
</main><!-- /#content -->

<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.9b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type='text/javascript' src='/wp-content/themes/casper/js/main.js?ver=1.0.0'></script>
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.6.10'></script>
<!--stats_footer_test--></body>
</html>
