<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="HandheldFriendly" content="True" />
<meta name="MobileOptimized" content="320" />

<title>New personal project: slopes of San Francisco | jckr.github.io/blog</title>

<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="/xmlrpc.php">
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="jckr.github.io/blog &raquo; Feed" href="/feed/" />
<link rel="alternate" type="application/rss+xml" title="jckr.github.io/blog &raquo; Comments Feed" href="/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="jckr.github.io/blog &raquo; New personal project: slopes of San Francisco Comments Feed" href="/2014/10/27/new-personal-project-slopes-of-san-francisco/feed/" />
<!-- This site uses the Google Analytics by MonsterInsights plugin v7.0.5 - Using Analytics tracking - https://www.monsterinsights.com/ -->
<!-- Note: MonsterInsights is not currently configured on this site. The site owner needs to authenticate with Google Analytics in the MonsterInsights settings panel. -->
<!-- No UA code set -->
<!-- / Google Analytics by MonsterInsights -->
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/localhost:8888\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.10"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='YoutubeShortcodeMargenn-css'  href='/wp-content/plugins/youtube-shortcode/youtube-shortcode.css?ver=4.6.10' type='text/css' media='all' />
<link rel='stylesheet' id='casper-google-fonts-css'  href='//fonts.googleapis.com/css?family=Noto+Serif%3A400%2C700%2C400italic%7COpen+Sans%3A700%2C400&#038;ver=4.6.10' type='text/css' media='all' />
<link rel='stylesheet' id='casper-style-css'  href='/wp-content/themes/casper/style.css?ver=4.6.10' type='text/css' media='all' />
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Getting beyond hello world with d3' href='/2013/11/20/getting-beyond-hello-world-with-d3/' />
<link rel='next' title='Dashboards ahoy!' href='/2015/02/07/dashboards-ahoy/' />
<meta name="generator" content="WordPress 4.6.10" />
<link rel="canonical" href="/2014/10/27/new-personal-project-slopes-of-san-francisco/" />
<link rel='shortlink' href='http://wp.me/p-pM' />
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2Flocalhost%3A8888%2F2014%2F10%2F27%2Fnew-personal-project-slopes-of-san-francisco%2F" />
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2Flocalhost%3A8888%2F2014%2F10%2F27%2Fnew-personal-project-slopes-of-san-francisco%2F&#038;format=xml" />

   	<style type="text/css">
					.blog-title a, .blog-description, .social-icons a { color: #222222; }
		
						                
		
							.main-navigation a { color: ; }
		                                            </style>
    		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
			<style type="text/css">
			.site-title a,
		.site-description {
			color: #222222;
		}
		</style>
	<style type="text/css" id="syntaxhighlighteranchor"></style>
</head>

<body class="single single-post postid-1598 single-format-standard group-blog">

<header id="masthead" role="banner" class="site-head site-header" style="background-image: url(http://localhost:8888/wp-content/uploads/2018/04/Screenshot-2018-04-09-19.38.59.png);">
    <nav id="site-navigation" class="main-navigation" role="navigation">
        <div>
            <h1 class="menu-toggle">
                <a class="icon-bars" href="#">
                    <span class="hidden">Menu</span>
                </a>
            </h1>
            <a class="skip-link screen-reader-text" href="#content">Skip to content</a>
            <div class="menu"><ul><li ><a href="/">Home</a></li></ul></div>
        </div>
    </nav><!-- #site-navigation -->

    <div class="vertical-row">
        <div class="vertical">
            <div class="site-head-content inner">
                
                <div class="social-icons">
                                                                                                                                                                                                                                                                                                                                                                                                                                                    </div>
                <h1 class="blog-title"><a class="blog-logo" href='/' rel='home'>jckr.github.io/blog</a></h1>
                <h2 class="blog-description">Just another WordPress site</h2>
            </div>
        </div>
    </div>
</header><!-- #masthead -->

<main id="content" class="content" role="main">


		
			<article id="post-1598" class="post-1598 post type-post status-publish format-standard hentry category-d3 category-data-visualization">
    <header class="post-header">
                	<span class="post-meta">
        	    <span class="posted-on"><a href="/2014/10/27/new-personal-project-slopes-of-san-francisco/" rel="bookmark"><time class="entry-date published" datetime="2014-10-27T07:03:30+00:00">October 27, 2014</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> | <a href="/category/d3/" rel="category tag">d3</a>, <a href="/category/data-visualization/" rel="category tag">data visualization</a>        	</span>
		        <h1 class="post-title"><a href="/2014/10/27/new-personal-project-slopes-of-san-francisco/" rel="bookmark">New personal project: slopes of San Francisco</a></h1>
        
    </header>
    		<section class="post-content">
		    <p>Hi, it&#8217;s been a while since I last posted!<br />
Here is a new project using publicly available data: <a href="http://jckr.github.io/blog/projects/slopes/slopes.html">slopes of San Francisco</a>.</p>
<p>As a San Franciscan who likes to walk, I&#8217;m confronted to a common problem. Most cities, such as Paris where I&#8217;m from, are mostly flat. So, in order to go one block east and one block north of where I am standing, I can go North then East or East then North: this is mostly equivalent (except that streets never meet at a right angle in Paris but that&#8217;s another problem). In San Francisco, going North then East can mean climbing a huge hill then down, versus walking on a flat surface. Itineraries matter, and often times I found myself going through mountains and valleys just because I thought the straight line was the simplest way to go from A to B.</p>
<p>Which is why I wanted to create a map of streets by slope, to help me (and my fellow San Franciscans) figure out which streets are practicable, and which should be avoided.</p>
<p>Here&#8217;s how I did it.</p>
<h2>Getting the data</h2>
<p>To compute slopes, I needed elevation data and the most convenient way to obtain it is through <a href="https://developers.google.com/maps/documentation/elevation/">google elevation API</a>. This API takes one or several points (longitude and latitude) and returns an elevation. Now which points was I going to feed it?</p>
<p>I started by the <a href="http://metro.teczno.com/#san-francisco">San Francisco metro extract</a>¬†from Open Street Map. What you get is an XML file which has a list of nodes with longitudes and latitudes, and a list of structures that connect them (such as landmass, streets, buildings, etc.). Now the problem was that the file I used had some 1.4m nodes, and Google Elevation API limits are 25000 locations per 24 hour period.</p>
<p>So my first task was to figure out how many of those 1.4m nodes I really needed. Turns out that the metro extract covers much more than the city but also the whole bay area. So my first pass was to filter out nodes that were outside a bounding box. Then, I only kept nodes that were part of a street, and furthermore, only the ones that would be either at the end of one street or at an intersection. By doing so, I&#8217;m assuming that all streets are straight between any two intersections, which is far from true, but would do for our purposes. I applied further filtering to weed out streets that were made of just one node. Eventually, I arrived at just over 10000 nodes! and in the process, I also extracted from the XML file the shape of the streets, that is, in which order nodes appeared in those streets. After several iterations in my code, I also scrapped their number of lanes when available and the street names.</p>
<h2>Sanity check</h2>
<p>The first thing I did was to plot my nodes on a map.</p>
<p><div style="width: 610px" class="wp-caption alignnone"><img class="" src="http://jckr.github.io/blog/projects/slopes/v0.png" alt="First draft" width="600" height="499" /><p class="wp-caption-text">First draft</p></div></p>
<p>Looks ok. So next, I just drawed my streets. I did that using d3, and each of my streets in this next iteration is a single path object.</p>
<p>&nbsp;</p>
<p><div style="width: 610px" class="wp-caption alignnone"><img class="" src="http://jckr.github.io/blog/projects/slopes/v1.png" alt="First network of streets" width="600" height="506" /><p class="wp-caption-text">First network of streets</p></div></p>
<p>So that&#8217;s a basic node-and-link mesh¬†of San Francisco, the problem with that approach is that I can only style one street (i.e. the links between the nodes) as a whole. However, what I wanted to highlight was where the streets were steep: many streets just go up and down, so giving them a single &#8220;steepness&#8221; rating wasn&#8217;t going to cut it.</p>
<h2>Encoding steepness</h2>
<p><div style="width: 610px" class="wp-caption alignnone"><img class="" src="http://jckr.github.io/blog/projects/slopes/v2.png" alt="Segments of streets" width="600" height="506" /><p class="wp-caption-text">Segments of streets</p></div></p>
<p>The next logical step was to draw each of the edges individually (this time, they are lines, not paths). There are 6000+ &#8220;streets&#8221; (in the OSM¬†sense &#8211; streets can be split in any number of different entities in Open Street Map), versus about 16000 different edges. I also found I didn&#8217;t really need to draw the nodes.</p>
<p>The obvious way was to encode steepness from green to red on a linear scale. That looks ok, but that&#8217;s not super interesting because it&#8217;s very difficult to tell whether one street is steeper than another just by comparing colors. I didn&#8217;t need an infinite variation of colors, I just wanted to know whether a street was flat (or quasi-flat), with a noticeable slope, or really steep. So instead of using a full linear scale, I just used 3 colors from the green &#8211; purple colorbrewer scale.</p>
<p><div style="width: 610px" class="wp-caption alignnone"><img class="" src="http://jckr.github.io/blog/projects/slopes/v3.png" alt="Same map with discrete colors" width="600" height="516" /><p class="wp-caption-text">Same map with discrete colors</p></div></p>
<p>I could see instantly which streets were flat or not, yet wondered if there wasn&#8217;t a good simple way to compare between two streets which would be the steepest. Color is no good for that, but how about line width?</p>
<p><div style="width: 610px" class="wp-caption alignnone"><img class="" src="http://jckr.github.io/blog/projects/slopes/v4.png" alt="Using line width to express steepness" width="600" height="500" /><p class="wp-caption-text">Using line width to express steepness</p></div></p>
<p>That was kind of an interesting aesthetics but I found it was difficult to find a precise cross street. When looking on a map of San Francisco, we instinctively look for larger streets like Market or Van Ness and if width was used by something else, it can be confusing. At that moment I didn&#8217;t have a good measure of street width, so I went back to my OSM extract and tried to scrap the number of lanes from my dataset.</p>
<p><div style="width: 610px" class="wp-caption alignnone"><img class="" src="http://jckr.github.io/blog/projects/slopes/v5.png" alt="using street widths" width="600" height="374" /><p class="wp-caption-text">using street widths</p></div></p>
<p>You will notice that the streets now have an outline. I don&#8217;t draw the shape of each block, that would be too difficult given my dataset. Instead, for each street segment, I first draw a dark grey line, then on top of it, a slightly thinner colored line üôÇ</p>
<h2>Have the map do something</h2>
<p>This being a data visualization I thought there could be interesting calculations that could be done with the map. My first intuition was to reuse the ideas of my <a href="http://jckr.github.io/blog/projects/metro/map.html">interactive Paris metro map</a>¬†and make a deformed SF map based on the effort needed to go from one point of the map to everywhere, taking the slopes of the streets into account.</p>
<p>I basically refactored my code which I hadn&#8217;t visited in almost two years&#8230; and adapted shortest-path algorithms to my network of streets. It confirmed what I feared, that not all of my streets connect. Some streets in the map form tiny islands which are isolated from the rest of the network, and so cannot be reached from outside. I decided not to deal with it, debugging the dataset was really too complicated at this stage (and to be honest the filters I had used to extract the street data had already gone through many, many iterations).</p>
<p>I also used voronoi tessellation to create a layer of polygons on top of my nodes to capture clicks. The user can choose where to base their map, not by clicking on a precise cross street, but in the area around it, like so:</p>
<p><div style="width: 610px" class="wp-caption alignnone"><img class="" src="http://jckr.github.io/blog/projects/slopes/v31.png" alt="Showing the voronoi layer on top of the map" width="600" height="353" /><p class="wp-caption-text">Showing the voronoi layer on top of the map</p></div></p>
<p>However, the results proved to be underwhelming.</p>
<p><div style="width: 610px" class="wp-caption alignnone"><img class="" src="http://jckr.github.io/blog/projects/slopes/v6.png" alt="Deformed map by effort needed to walk from a given point" width="600" height="536" /><p class="wp-caption-text">Deformed map by effort needed to walk from a given point</p></div></p>
<p>All right, so some points are closer, some points are further, but overall it&#8217;s not a super interesting map. It&#8217;s less legible, and it doesn&#8217;t help me figuring out my initial problem: from a given point, which streets should I take to not go up and down?</p>
<p>So I was back to the drawing board. Now with the Dijkstra algorithm which I use to compute the shortest distance from one point to the others in the network, I can also get which path is the shortest, i.e. which is the actual itinerary, edge by edge, that takes me from one point to the others using the shortest path.</p>
<h2>Path-finding</h2>
<p>So my next idea was to hide all the edges that would not be in a shortest path. Again there were about 16000 edges, and 10000 nodes; there is only 1 shortest-path edge per node, so that&#8217;s hiding about 1/3 of the streets. Let&#8217;s see how this looks:</p>
<p><div style="width: 610px" class="wp-caption alignnone"><img class="" src="http://jckr.github.io/blog/projects/slopes/v7.png" alt="All streets which are not in a shortest path are hidden." width="600" height="347" /><p class="wp-caption-text">All streets which are not in a shortest path are hidden.</p></div></p>
<p>That&#8217;s more interesting! At least, I know which streets I should not even consider from a given starting point.</p>
<p>I could do better: once this is done and a starting point is selected, I can actually draw the shortest path to wherever the user moves his or her mouse:</p>
<p><div style="width: 610px" class="wp-caption alignnone"><img class="" src="http://jckr.github.io/blog/projects/slopes/v8.png" alt="Drawing the shortest path" width="600" height="346" /><p class="wp-caption-text">Drawing the shortest path</p></div></p>
<h2>Styling and wrapping it up</h2>
<p>In parallel I had worked on a page template to put everything on and my map looked kind of abstract. I had considered adding street names but algorithmically it&#8217;s pretty complicated (it would have been much quicker to do it completely manually but eventually I decided against that). I needed the map to belong to one specific part of the page as opposed to be just hanging in free space. For this I thought I really needed the shape of the land.</p>
<p>So I went back to my OSM dataset and this time looked at the nodes which were on coastlines. Coastlines, though, are lines, not shapes, so some reworking was in order. In the original dataset there were some 200 different lines. Many of them were outside San Francisco proper, but still by removing those there were about 50 left. Many of them could be joined, and I had just to do a tiny bit of manual stitching to come up with one landmass shape for San Francisco.</p>
<p><div style="width: 610px" class="wp-caption alignnone"><img class="" src="http://jckr.github.io/blog/projects/slopes/v9.png" alt="Now with a landmass" width="600" height="330" /><p class="wp-caption-text">Now with a landmass</p></div></p>
<p>I tried various combinations for styling and finally fell back on using green, orange and red for the steepness &#8211; the very palette I avoided in the beginning. I used more balanced, slightly less saturated colors though.</p>
<p>One last thing I did on the data side was to get, for every node (which is every end of street or cross-street) the name of all the streets that go through it, so I could describe them &#8211; both the first node the user will click on and anyone he or she will mouseover on.</p>
<p><div style="width: 610px" class="wp-caption alignnone"><img class="" src="http://jckr.github.io/blog/projects/slopes/v10.png" alt="The end result!" width="600" height="361" /><p class="wp-caption-text">The end result!</p></div></p>
		    			<div class="clear">&nbsp;</div>
		</section>
	
	<footer class="post-footer">

	    <section class="author">
	    	<img alt='' src='http://0.gravatar.com/avatar/9bb03f0a91eab52fe022450c323810f2?s=100&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/9bb03f0a91eab52fe022450c323810f2?s=200&amp;d=mm&amp;r=g 2x' class='avatar avatar-100 photo' height='100' width='100' />	        <h4>jerome</h4>
	        <p></p>
			<div class="clear">&nbsp;</div>
	    </section>
	</footer>
</article><!-- #post-## -->

				<nav class="pagination navigation post-navigation" role="navigation">
		<div class="nav-links">
			<div class="older-posts"><a href="/2013/11/20/getting-beyond-hello-world-with-d3/" rel="prev">Getting beyond hello world with d3 <span class="meta-nav">&rarr;</span></a></div>				<div class="page-number">&bull;</div>
				<div class="newer-posts"><a href="/2015/02/07/dashboards-ahoy/" rel="next"><span class="meta-nav">&larr;</span> Dashboards ahoy!</a></div>		</div><!-- .nav-links -->
	</nav><!-- .navigation -->
	
			
<div id="comments" class="comments-area">

	
			<h2 class="comments-title">
			9 thoughts on &ldquo;<span>New personal project: slopes of San Francisco</span>&rdquo;		</h2>

		
		<ol class="comment-list">
					<li id="comment-518" class="comment even thread-even depth-1 parent">
			<article id="div-comment-518" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://0.gravatar.com/avatar/9844226bd6afc96b3851249cc58a96e4?s=32&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/9844226bd6afc96b3851249cc58a96e4?s=64&amp;d=mm&amp;r=g 2x' class='avatar avatar-32 photo' height='32' width='32' />						<b class="fn"><a href='http://twitter.com/hyperboreans' rel='external nofollow' class='url'>Claudio Squarcella (@hyperboreans)</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="/2014/10/27/new-personal-project-slopes-of-san-francisco/#comment-518">
							<time datetime="2014-10-28T18:56:44+00:00">
								October 28, 2014 at 6:56 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi, congrats on your work. Would like to actually see it in action but the link at the top does not work (it redirects to your homepage), can you fix it?</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/2014/10/27/new-personal-project-slopes-of-san-francisco/?replytocom=518#respond' onclick='return addComment.moveForm( "div-comment-518", "518", "respond", "1598" )' aria-label='Reply to Claudio Squarcella (@hyperboreans)'>Reply</a></div>			</article><!-- .comment-body -->
<ol class="children">
		<li id="comment-521" class="comment byuser comment-author-jerome bypostauthor odd alt depth-2">
			<article id="div-comment-521" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://0.gravatar.com/avatar/9bb03f0a91eab52fe022450c323810f2?s=32&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/9bb03f0a91eab52fe022450c323810f2?s=64&amp;d=mm&amp;r=g 2x' class='avatar avatar-32 photo' height='32' width='32' />						<b class="fn"><a href='http://jckr.github.io/blog/' rel='external nofollow' class='url'>jerome</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="/2014/10/27/new-personal-project-slopes-of-san-francisco/#comment-521">
							<time datetime="2014-10-28T20:06:33+00:00">
								October 28, 2014 at 8:06 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>thanks! typo in the link fixed</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/2014/10/27/new-personal-project-slopes-of-san-francisco/?replytocom=521#respond' onclick='return addComment.moveForm( "div-comment-521", "521", "respond", "1598" )' aria-label='Reply to jerome'>Reply</a></div>			</article><!-- .comment-body -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-519" class="comment even thread-odd thread-alt depth-1">
			<article id="div-comment-519" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://0.gravatar.com/avatar/0f56e9adf61998fe31f52c3888cec3d1?s=32&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/0f56e9adf61998fe31f52c3888cec3d1?s=64&amp;d=mm&amp;r=g 2x' class='avatar avatar-32 photo' height='32' width='32' />						<b class="fn"><a href='https://plus.google.com/+MicahStubbs' rel='external nofollow' class='url'>Micah Stubbs</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="/2014/10/27/new-personal-project-slopes-of-san-francisco/#comment-519">
							<time datetime="2014-10-28T19:35:31+00:00">
								October 28, 2014 at 7:35 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I&#8217;ve experienced this routing problem too.  For Bike directions, Google Maps shows elevation change along a proposed route with a line chart with distance traveled on the x-axis and elevation on the y-axis.  The line chart is a small inset layered over the top-right corner of the map.</p>
<p>To show an example, I&#8217;ve tried to pick starting and ending points near to those shown in the &#8216;Drawing the Shortest Path&#8217; map image.</p>
<p>a map:<br />
<a href="https://www.google.com/maps/dir/4550+Geary+Blvd,+San+Francisco,+CA+94118/37.802712,-122.4281773/@37.7936641,-122.4500266,14z/data=!4m9!4m8!1m5!1m1!1s0x8085873de3f56681:0xda42e472efc0d3c3!2m2!1d-122.468389!2d37.781143!1m0!3e1" rel="nofollow">https://www.google.com/maps/dir/4550+Geary+Blvd,+San+Francisco,+CA+94118/37.802712,-122.4281773/@37.7936641,-122.4500266,14z/data=!4m9!4m8!1m5!1m1!1s0x8085873de3f56681:0xda42e472efc0d3c3!2m2!1d-122.468389!2d37.781143!1m0!3e1</a></p>
<p>images of three possible routes:<br />
<a href="http://imgur.com/a/fOcW9" rel="nofollow">http://imgur.com/a/fOcW9</a></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/2014/10/27/new-personal-project-slopes-of-san-francisco/?replytocom=519#respond' onclick='return addComment.moveForm( "div-comment-519", "519", "respond", "1598" )' aria-label='Reply to Micah Stubbs'>Reply</a></div>			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-520" class="comment odd alt thread-even depth-1 parent">
			<article id="div-comment-520" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://0.gravatar.com/avatar/0f56e9adf61998fe31f52c3888cec3d1?s=32&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/0f56e9adf61998fe31f52c3888cec3d1?s=64&amp;d=mm&amp;r=g 2x' class='avatar avatar-32 photo' height='32' width='32' />						<b class="fn"><a href='https://plus.google.com/+MicahStubbs' rel='external nofollow' class='url'>Micah Stubbs</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="/2014/10/27/new-personal-project-slopes-of-san-francisco/#comment-520">
							<time datetime="2014-10-28T19:42:00+00:00">
								October 28, 2014 at 7:42 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Interesting enough, if you view Walking Directions in Google Maps, it gives to you an option to show terrain.  I feel like it is tough to infer hill-climbing difficulty from the altitude encoded in the terrain shading.</p>
<p>map:<br />
<a href="https://www.google.com/maps/dir/4550+Geary+Blvd,+San+Francisco,+CA+94118/37.802712,-122.4281773/@37.7918046,-122.4660525,14z/data=!4m10!4m9!1m5!1m1!1s0x8085873de3f56681:0xda42e472efc0d3c3!2m2!1d-122.468389!2d37.781143!1m0!3e2!5i2" rel="nofollow">https://www.google.com/maps/dir/4550+Geary+Blvd,+San+Francisco,+CA+94118/37.802712,-122.4281773/@37.7918046,-122.4660525,14z/data=!4m10!4m9!1m5!1m1!1s0x8085873de3f56681:0xda42e472efc0d3c3!2m2!1d-122.468389!2d37.781143!1m0!3e2!5i2</a></p>
<p>images of three possible routes:<br />
<a href="http://imgur.com/a/ycWVv" rel="nofollow">http://imgur.com/a/ycWVv</a></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/2014/10/27/new-personal-project-slopes-of-san-francisco/?replytocom=520#respond' onclick='return addComment.moveForm( "div-comment-520", "520", "respond", "1598" )' aria-label='Reply to Micah Stubbs'>Reply</a></div>			</article><!-- .comment-body -->
<ol class="children">
		<li id="comment-522" class="comment byuser comment-author-jerome bypostauthor even depth-2">
			<article id="div-comment-522" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://0.gravatar.com/avatar/9bb03f0a91eab52fe022450c323810f2?s=32&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/9bb03f0a91eab52fe022450c323810f2?s=64&amp;d=mm&amp;r=g 2x' class='avatar avatar-32 photo' height='32' width='32' />						<b class="fn"><a href='http://jckr.github.io/blog/' rel='external nofollow' class='url'>jerome</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="/2014/10/27/new-personal-project-slopes-of-san-francisco/#comment-522">
							<time datetime="2014-10-28T20:11:05+00:00">
								October 28, 2014 at 8:11 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I don&#8217;t know how they compute traveling time for walking or cycling. I don&#8217;t ride bikes so I won&#8217;t comment on this but one walk I know well is from my house on the top of a hill to Crissy Field where I run, which is about 30 mins downhill, and maybe 45 minutes uphill. Google maps gives me 50 mins both ways and I&#8217;m not too sure about their recommended route either. Capturing or calculating walking speeds has got to be a tricky problem.</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/2014/10/27/new-personal-project-slopes-of-san-francisco/?replytocom=522#respond' onclick='return addComment.moveForm( "div-comment-522", "522", "respond", "1598" )' aria-label='Reply to jerome'>Reply</a></div>			</article><!-- .comment-body -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-523" class="comment odd alt thread-odd thread-alt depth-1">
			<article id="div-comment-523" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://0.gravatar.com/avatar/0f56e9adf61998fe31f52c3888cec3d1?s=32&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/0f56e9adf61998fe31f52c3888cec3d1?s=64&amp;d=mm&amp;r=g 2x' class='avatar avatar-32 photo' height='32' width='32' />						<b class="fn"><a href='https://plus.google.com/+MicahStubbs' rel='external nofollow' class='url'>Micah Stubbs</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="/2014/10/27/new-personal-project-slopes-of-san-francisco/#comment-523">
							<time datetime="2014-10-31T00:57:18+00:00">
								October 31, 2014 at 12:57 am							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Agreed!  I usually walk a bit faster than Google&#8217;s maps estimate.  I wonder if the estimated walking time changes with the grade of the road ( ie hills take longer to walk ).</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/2014/10/27/new-personal-project-slopes-of-san-francisco/?replytocom=523#respond' onclick='return addComment.moveForm( "div-comment-523", "523", "respond", "1598" )' aria-label='Reply to Micah Stubbs'>Reply</a></div>			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-524" class="comment even thread-even depth-1 parent">
			<article id="div-comment-524" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://1.gravatar.com/avatar/a170dab58674805b060d0b86bb823c23?s=32&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/a170dab58674805b060d0b86bb823c23?s=64&amp;d=mm&amp;r=g 2x' class='avatar avatar-32 photo' height='32' width='32' />						<b class="fn"><a href='http://driven-by-data.net/' rel='external nofollow' class='url'>Gregor</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="/2014/10/27/new-personal-project-slopes-of-san-francisco/#comment-524">
							<time datetime="2014-11-04T05:05:55+00:00">
								November 4, 2014 at 5:05 am							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Not colorblind-safe üòâ  Just kidding. So good to have you back blogging&#8230;</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/2014/10/27/new-personal-project-slopes-of-san-francisco/?replytocom=524#respond' onclick='return addComment.moveForm( "div-comment-524", "524", "respond", "1598" )' aria-label='Reply to Gregor'>Reply</a></div>			</article><!-- .comment-body -->
<ol class="children">
		<li id="comment-525" class="comment byuser comment-author-jerome bypostauthor odd alt depth-2">
			<article id="div-comment-525" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://0.gravatar.com/avatar/9bb03f0a91eab52fe022450c323810f2?s=32&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/9bb03f0a91eab52fe022450c323810f2?s=64&amp;d=mm&amp;r=g 2x' class='avatar avatar-32 photo' height='32' width='32' />						<b class="fn"><a href='http://jckr.github.io/blog/' rel='external nofollow' class='url'>jerome</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="/2014/10/27/new-personal-project-slopes-of-san-francisco/#comment-525">
							<time datetime="2014-11-06T02:15:40+00:00">
								November 6, 2014 at 2:15 am							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>plot twist: i am colorblind üôÇ</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/2014/10/27/new-personal-project-slopes-of-san-francisco/?replytocom=525#respond' onclick='return addComment.moveForm( "div-comment-525", "525", "respond", "1598" )' aria-label='Reply to jerome'>Reply</a></div>			</article><!-- .comment-body -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-526" class="pingback even thread-odd thread-alt depth-1">
			<div class="comment-body">
				Pingback: <a href='http://www.reportonobamacare.com/name-that-data-2/' rel='external nofollow' class='url'>Name That Data! | Report On Obamacare</a> 			</div>
</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		
	
	
					<div id="respond" class="comment-respond">
			<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2014/10/27/new-personal-project-slopes-of-san-francisco/#respond" style="display:none;">Cancel reply</a></small></h3>				<form action="/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate>
					<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" aria-required='true' required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" aria-describedby="email-notes" aria-required='true' required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='1598' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="c9eddabebf" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="29"/></p>				</form>
					</div><!-- #respond -->
		
</div><!-- #comments -->

		

	<div id="secondary" class="widget-area" role="complementary">
		<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form></aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h1 class="widget-title">Recent Posts</h1>		<ul>
					<li>
				<a href="/2016/08/17/the-big-leagues/">The big leagues</a>
						</li>
					<li>
				<a href="/2016/08/17/creating-a-react-visualization-web-app/">Creating a React visualization web app</a>
						</li>
					<li>
				<a href="/2016/08/13/beyond-rendering/">Beyond rendering</a>
						</li>
					<li>
				<a href="/2016/08/11/react-components/">React components</a>
						</li>
					<li>
				<a href="/2016/08/10/coding-with-react/">Coding with React</a>
						</li>
				</ul>
		</aside>		<aside id="recent-comments-2" class="widget widget_recent_comments"><h1 class="widget-title">Recent Comments</h1><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link"><a href='http://omeraz.wordpress.com/' rel='external nofollow' class='url'>◊¢◊ï◊û◊® ◊¢◊ñ◊®◊ô◊ê◊ú</a></span> on <a href="/2016/08/17/the-big-leagues/#comment-567">The big leagues</a></li><li class="recentcomments"><span class="comment-author-link">Carlos Ayres</span> on <a href="/2012/05/28/manipulating-data-like-a-boss-with-d3/#comment-312">Manipulating data like a boss with d3</a></li><li class="recentcomments"><span class="comment-author-link"><a href='https://migrate.powertripanalytics.com/game-of-thrones-interactions-among-the-top-30-characters/' rel='external nofollow' class='url'>Game of ThronesInteractions Among the Top 30 Characters &#8211; PowerTrip Analytics</a></span> on <a href="/2013/05/13/making-the-game-of-thrones-visualization/#comment-466">Making the game of thrones visualization</a></li><li class="recentcomments"><span class="comment-author-link"><a href='https://abgoswam.wordpress.com/2016/10/08/d3-getting-started/' rel='external nofollow' class='url'>D3 &#8211; Getting Started | abgoswam&#039;s tech blog</a></span> on <a href="/2012/09/04/getting-to-hello-world-with-d3/#comment-419">Getting to &#8220;Hello world&#8221; with d3</a></li><li class="recentcomments"><span class="comment-author-link"><a href='https://plus.google.com/+BrotoBhattacharjee' rel='external nofollow' class='url'>Broto Bhattacharjee</a></span> on <a href="/2012/09/04/getting-to-hello-world-with-d3/#comment-418">Getting to &#8220;Hello world&#8221; with d3</a></li></ul></aside><aside id="archives-2" class="widget widget_archive"><h1 class="widget-title">Archives</h1>		<ul>
			<li><a href='/2016/08/'>August 2016</a></li>
	<li><a href='/2015/05/'>May 2015</a></li>
	<li><a href='/2015/02/'>February 2015</a></li>
	<li><a href='/2014/10/'>October 2014</a></li>
	<li><a href='/2013/11/'>November 2013</a></li>
	<li><a href='/2013/05/'>May 2013</a></li>
	<li><a href='/2013/03/'>March 2013</a></li>
	<li><a href='/2013/01/'>January 2013</a></li>
	<li><a href='/2012/12/'>December 2012</a></li>
	<li><a href='/2012/11/'>November 2012</a></li>
	<li><a href='/2012/10/'>October 2012</a></li>
	<li><a href='/2012/09/'>September 2012</a></li>
	<li><a href='/2012/07/'>July 2012</a></li>
	<li><a href='/2012/06/'>June 2012</a></li>
	<li><a href='/2012/05/'>May 2012</a></li>
	<li><a href='/2012/04/'>April 2012</a></li>
	<li><a href='/2012/01/'>January 2012</a></li>
	<li><a href='/2011/11/'>November 2011</a></li>
	<li><a href='/2011/10/'>October 2011</a></li>
	<li><a href='/2011/09/'>September 2011</a></li>
	<li><a href='/2011/08/'>August 2011</a></li>
	<li><a href='/2011/07/'>July 2011</a></li>
	<li><a href='/2011/06/'>June 2011</a></li>
	<li><a href='/2011/05/'>May 2011</a></li>
	<li><a href='/2011/04/'>April 2011</a></li>
	<li><a href='/2011/03/'>March 2011</a></li>
	<li><a href='/2011/02/'>February 2011</a></li>
	<li><a href='/2011/01/'>January 2011</a></li>
	<li><a href='/2010/11/'>November 2010</a></li>
	<li><a href='/2010/04/'>April 2010</a></li>
	<li><a href='/2010/03/'>March 2010</a></li>
	<li><a href='/2010/02/'>February 2010</a></li>
	<li><a href='/2010/01/'>January 2010</a></li>
	<li><a href='/2009/12/'>December 2009</a></li>
	<li><a href='/2009/10/'>October 2009</a></li>
	<li><a href='/2009/09/'>September 2009</a></li>
	<li><a href='/2009/08/'>August 2009</a></li>
	<li><a href='/2009/07/'>July 2009</a></li>
	<li><a href='/2009/06/'>June 2009</a></li>
	<li><a href='/2009/05/'>May 2009</a></li>
	<li><a href='/2008/12/'>December 2008</a></li>
	<li><a href='/2008/11/'>November 2008</a></li>
	<li><a href='/2008/10/'>October 2008</a></li>
		</ul>
		</aside><aside id="categories-2" class="widget widget_categories"><h1 class="widget-title">Categories</h1>		<ul>
	<li class="cat-item cat-item-2"><a href="/category/book-review/" >book review</a>
</li>
	<li class="cat-item cat-item-3"><a href="/category/charts/" >charts</a>
</li>
	<li class="cat-item cat-item-4"><a href="/category/conferences/" >conferences</a>
</li>
	<li class="cat-item cat-item-5"><a href="/category/d3/" >d3</a>
</li>
	<li class="cat-item cat-item-6"><a href="/category/dashboards/" >dashboards</a>
</li>
	<li class="cat-item cat-item-7"><a href="/category/data-publishing/" >data publishing</a>
</li>
	<li class="cat-item cat-item-8"><a href="/category/data-visualization/" >data visualization</a>
</li>
	<li class="cat-item cat-item-9"><a href="/category/francais/" >fran√ßais</a>
</li>
	<li class="cat-item cat-item-10"><a href="/category/javascript/" >javascript</a>
</li>
	<li class="cat-item cat-item-11"><a href="/category/presentation/" >presentation</a>
</li>
	<li class="cat-item cat-item-12"><a href="/category/protovis/" >protovis</a>
</li>
	<li class="cat-item cat-item-13"><a href="/category/react/" >react</a>
</li>
	<li class="cat-item cat-item-14"><a href="/category/tips/" >tips</a>
</li>
	<li class="cat-item cat-item-1"><a href="/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-15"><a href="/category/web-sites/" >web sites</a>
</li>
		</ul>
</aside><aside id="meta-2" class="widget widget_meta"><h1 class="widget-title">Meta</h1>			<ul>
						<li><a href="/wp-login.php">Log in</a></li>
			<li><a href="/feed/">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="/comments/feed/">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="https://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>			</ul>
			</aside>		<div class="clear">&nbsp;</div>
	</div><!-- #secondary -->
	<footer id="colophon" class="site-footer" role="contentinfo">
	    <a class="subscribe icon-feed" href="/feed/"><span class="tooltip">Subscribe!</span></a>
		<div class="site-info inner">
		    <section class="copyright">
		    			    		<a href="https://github.com/lacymorrow/casper" rel="home">Casper WP</a> by Lacy Morrow		    			    </section>
		</div><!-- .site-info -->
	</footer><!-- #colophon -->
</main><!-- /#content -->

<script type='text/javascript' src='/wp-content/themes/casper/js/main.js?ver=1.0.0'></script>
<script type='text/javascript' src='/wp-includes/js/comment-reply.min.js?ver=4.6.10'></script>
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.6.10'></script>
<script async="async" type='text/javascript' src='/wp-content/plugins/akismet/_inc/form.js?ver=4.0.3'></script>
<!--stats_footer_test--></body>
</html>
