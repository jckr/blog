<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="HandheldFriendly" content="True" />
<meta name="MobileOptimized" content="320" />

<title>Tableau | jckr.github.io/blog</title>

<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="/xmlrpc.php">
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="jckr.github.io/blog &raquo; Feed" href="/feed/" />
<link rel="alternate" type="application/rss+xml" title="jckr.github.io/blog &raquo; Comments Feed" href="/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="jckr.github.io/blog &raquo; Tableau Tag Feed" href="/tag/tableau/feed/" />
<!-- This site uses the Google Analytics by MonsterInsights plugin v7.0.5 - Using Analytics tracking - https://www.monsterinsights.com/ -->
<!-- Note: MonsterInsights is not currently configured on this site. The site owner needs to authenticate with Google Analytics in the MonsterInsights settings panel. -->
<!-- No UA code set -->
<!-- / Google Analytics by MonsterInsights -->
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/localhost:8888\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.10"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='YoutubeShortcodeMargenn-css'  href='/wp-content/plugins/youtube-shortcode/youtube-shortcode.css?ver=4.6.10' type='text/css' media='all' />
<link rel='stylesheet' id='casper-google-fonts-css'  href='//fonts.googleapis.com/css?family=Noto+Serif%3A400%2C700%2C400italic%7COpen+Sans%3A700%2C400&#038;ver=4.6.10' type='text/css' media='all' />
<link rel='stylesheet' id='casper-style-css'  href='/wp-content/themes/casper/style.css?ver=4.6.10' type='text/css' media='all' />
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.6.10" />

   	<style type="text/css">
					.blog-title a, .blog-description, .social-icons a { color: #222222; }
		
						                
		
							.main-navigation a { color: ; }
		                                            </style>
    		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
			<style type="text/css">
			.site-title a,
		.site-description {
			color: #222222;
		}
		</style>
	<style type="text/css" id="syntaxhighlighteranchor"></style>
</head>

<body class="archive tag tag-tableau tag-370 group-blog">

<header id="masthead" role="banner" class="site-head site-header" style="background-image: url(/wp-content/uploads/2018/04/Screenshot-2018-04-09-19.38.59.png);">
    <nav id="site-navigation" class="main-navigation" role="navigation">
        <div>
            <h1 class="menu-toggle">
                <a class="icon-bars" href="#">
                    <span class="hidden">Menu</span>
                </a>
            </h1>
            <a class="skip-link screen-reader-text" href="#content">Skip to content</a>
            <div class="menu"><ul><li ><a href="/">Home</a></li></ul></div>
        </div>
    </nav><!-- #site-navigation -->

    <div class="vertical-row">
        <div class="vertical">
            <div class="site-head-content inner">
                
                <div class="social-icons">
                                                                                                                                                                                                                                                                                                                                                                                                                                                    </div>
                <h1 class="blog-title"><a class="blog-logo" href='/' rel='home'>jckr.github.io/blog</a></h1>
                <h2 class="blog-description">Just another WordPress site</h2>
            </div>
        </div>
    </div>
</header><!-- #masthead -->

<main id="content" class="content" role="main">

	<section id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			<header class="page-header">
				<h1 class="page-title">
					Tableau				</h1>
							</header><!-- .page-header -->

						
				
<article id="post-1465" class="post-1465 post type-post status-publish format-standard hentry category-uncategorized tag-dimensionality-reduction tag-politics tag-principal-components-analysis tag-tableau">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/2012/09/10/dimensionality-reduction/" rel="bookmark"><time class="entry-date published" datetime="2012-09-10T11:13:45+00:00">September 10, 2012</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/2012/09/10/dimensionality-reduction/" rel="bookmark">Dimensionality reduction</a></h1>
         
    </header>
	<section class="post-content">

		<p>Following my <a href="http://jckr.github.io/blog/blog/2012/09/05/which-way-to-the-right/">Tableau politics contest entry</a>, here is another view I had developed but which I didn&#8217;t include in the already full dashboard. </p>
<p><iframe style="border: 0px;" src="http://public.tableausoftware.com/views/politics/DR_EN" scrolling="no" width="710px" height="810px"></iframe></p>
<p>In the <a href="http://public.tableausoftware.com/views/politics/DashEN">main view</a> I have tried to show how the values of candidates relate to those of the French. It&#8217;s difficult to convey that graphically when these values are determined by the answers to as many as 19 questions (and there are many many more that could be used to that effect).</p>
<p>Enter a technique called dimensionality reduction. The idea is to turn a dataset with many dimensions into a dataset with much fewer dimensions, as little as one, two or three. So we compute new variables, so that they capture virtually all the variability of the original dataset. In other words, if two records have different values in the original dataset, they should have different values in the transformed dataset too. </p>
<p>If you&#8217;re not allergic to words like eigenvalues the math <a href="http://en.wikipedia.org/wiki/Principal_component_analysis">is actually pretty simple</a>. But let&#8217;s not go into that. The point is that with this technique <strong>you can represent a complex dataset as a two-dimensional dataset with very little loss</strong>.</p>
<p>Of course the technique doesn&#8217;t tell you what these new variables represent. Getting a feel for the data I postulate that the one on the X axis represents the toughness of a candidate (pro-security measures, no sensitivity for minorities, etc.) and the one on the Y axis is happiness with previous government. Or possibly, lover of the capitalistic doctrine.</p>
<p>Now you get a better feel for how close or distant the various candidates are from individual voters. You can also see which &#8220;spaces&#8221; remain empty or which are competitive. The top-right quadrant, for instance, looks tempting, but it is really nearly empty (about 200 respondents on over 1500). The right half of the matrix, that is the one which is sensitive to strength, has only one possible competitor but also few voters (~400 respondents). It makes more sense to remain an acceptable choice for the top half (750 voters) and especially the top left (550). In other words the Sarkozy mark should drift slightly towards the top left for optimal impact.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-1458" class="post-1458 post type-post status-publish format-standard hentry category-uncategorized tag-contest tag-politics tag-sarkozy tag-tableau tag-ump">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/2012/09/05/tableau-2012-politics-contest-justification-and-making-of/" rel="bookmark"><time class="entry-date published" datetime="2012-09-05T20:14:30+00:00">September 5, 2012</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/2012/09/05/tableau-2012-politics-contest-justification-and-making-of/" rel="bookmark">Tableau 2012 politics contest &#8211; justification and making-of</a></h1>
         
    </header>
	<section class="post-content">

		<h2>what led me to those choices</h2>
<p>I was technically happy of my entry for the <a href="http://jckr.github.io/blog/blog/2012/06/30/tableau-2012-sports-visualization-contest-entry/">sports contest</a>. I had done what I wanted: obtain a hard-to-find, interesting dataset, attempt to create an exotic, hard-to-make and never-tableau&#8217;d-before shape with aesthetic appeal and insights.</p>
<p>Yet the rules stated that the entries shall be judged on the story-telling front. While there were interesting insights, indeed, they didn&#8217;t constitute a story, a structured narration with a beginning and an end. Having <a href="http://thevcl.com/storytelling/">worked</a> <a href="http://flowingdata.com/2011/11/04/telling-stories-with-data-visweek-2011/">on that subject</a> on occasion, I think there is an inherent contradiction between a dashboard tool that lets a user freely manipulate a bunch of data and that articulated story where the user is more led throughout a process.</p>
<p>So that&#8217;s what led most of the work.</p>
<p>The second idea was that there is an unspoken, but IMO unnecessary rule about making Tableau dashboards compact things, highly interactive and interconnected. First, the elephant in the room: Tableau public is slow. It&#8217;s too slow. So too many interactions do not make a pleasant experience. Second, it is true that in Tableau oneÂ <em>can</em> assemble a dashboard out of interconnected worksheets, where clicking on one makes things happen in another. But just because you can doesn&#8217;t mean youÂ <em>should</em>. Remember the &lt;BLINK&gt; element in the webpage of the 1990s? And this is this interconnectivity that causes dashboards to be compact and fit over the fold. If clicking on one element causes changes on another, you&#8217;d better be able to see both even on a laptop screen.</p>
<p>So the second idea was to create instead a long dashboard where a user would be held by the hand as she&#8217;s taken from point A to point B. Along the way, there would be texts and images to explain what&#8217;s going on, data &#8211; not necessarily interconnected, worksheets with little interactivity which can be understood at first sight, and which can stand some manipulation but don&#8217;t need to.</p>
<p>When visualization and storytelling intersect <a href="http://www.slideshare.net/vozome/dont-take-my-word-for-it-10279298">there is one form that I like</a>Â which is to start with a preconception and to let the user find through manipulation that this idea is wrong. So I tried to use that in the dashboard as well.</p>
<h2>The subject</h2>
<p>That&#8217;s actually the #1 issue in French politics right now. Which strategy should the main right-wing party adopt? Typically, during the presidential campaign, both large parties fight for the votes of the center and are less radical than usual. But during this campaign the UMP, the party of the former president Nicolas Sarkozy, steered hard to the right in an attempt to steal back the voters gone to the far-right.</p>
<p>Apparently, that strategy was successful, even if he lost the presidential rate, he managed to somehow catch up against his rival.</p>
<p>Yet there are those who argue that if the party was more moderate, it would have been more successful and possibly win.</p>
<p>Anyway. The presidential race is over. But now the party is deciding which way to go next by electing its next leader.</p>
<p>Fortunately, there is data that can be used to determine whether the far-right or the moderate strategy can be more fruitful. This is what it is about.</p>
<h2>Making the viz</h2>
<p>Tableau dashboards can go up to 4000px in height, so that&#8217;s what I shot for.</p>
<p>So let&#8217;s say it loud and clear, it&#8217;s hell to manipulate large dashboards in Tableau, even with a very strong computer. When you add a new worksheet the legend part and the quickfilter part are added whenever there is room which could be thousands of pixels away. Since you can&#8217;t drag an element across screens you may have to proceed in babysteps. Once there is a certain number of elements, be they text, blanks or very simple and stable worksheets, adding another element takes a very long time, so does moving them around, etc.</p>
<p>As usual fixed size is your only friend, fixed heights, fixed widths, alternating horizontal and vertical layout containers.</p>
<p>So up to the last 2 worksheets there is really nothing to write home about. Only this: when you interact on the published workbook on the web it is painstakingly slow as the dashboard is reloaded and recomputed in its entirety. While this is ok for most of the worksheet, for the most complex one (the one with many sliders) it&#8217;s just unacceptable because the sheet won&#8217;t have time to be redrawn between two interactions.</p>
<p>So I came up with an idea: create a secondary dashboard with just that sheet, publish it independently, and then, in the previous dashboard, I have added a web page object. And that web page pointed to that other dashboard. So in effect, there is a dashboard within a dashboard, so when there is interactions in the complex worksheet, the secondary, smaller dashboard is the only one which is reloaded and recomputed, which is noticeably faster. Still not faster as in fast, but usable.</p>
<p>now publishing aspects aside this worksheet is interesting. The idea is to update a model based on 19 criteria. For every record, the outcome depends the &#8220;closeness&#8221; of the answers of the record and those of the candidates. The 19 parameters control the position of one of the candidates: Nicolas Sarkozy. So what I&#8217;ve done is calculate, outside of Tableau, the &#8220;distance&#8221; between each record and each of the other 8, and in the data file, I&#8217;ve specified that minimal distance and the name of the corresponding candidate. Then, in Tableau, I compute in real time the distance between the record and the parameters, and if that score is inferior to the threshold in the data file, then Sarkozy is deemed to be the closest, else it is the one from the data file. The worksheet tallies up the number of records which are closest to each candidate. Also, in order to keep the parameters legible I have constrained them to 9 values, when they really represent numbers between -2 and 2.</p>
<p>Also for the record, I have made a French and an English version. Why? Because I hope to get the French version published in a media and weight in on the debate, while I need the English version for the contest. This raises a lot of issues, all the worksheets need to exist in 2 versions, many variables need to be duplicated as well. As a sidenote the marks concerning a candidate are colored in tableau blue /orange in English in order to highlight candidate Sarkozy, but according to the campaign colors of the candidates in the French version.</p>
<p>That&#8217;s about it. I hope you enjoy my viz!</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-1445" class="post-1445 post type-post status-publish format-standard hentry category-uncategorized tag-contest tag-iron-viz tag-politics tag-right-wing tag-sarkozy tag-tableau tag-ump">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/2012/09/05/which-way-to-the-right/" rel="bookmark"><time class="entry-date published" datetime="2012-09-05T20:14:03+00:00">September 5, 2012</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/2012/09/05/which-way-to-the-right/" rel="bookmark">Which way to the right?</a></h1>
         
    </header>
	<section class="post-content">

		<p>Here is my entry for the Tableau 2012 politics contest.</p>
<p><iframe style="border: 0px;" src="http://public.tableausoftware.com/views/politics/DashEN" scrolling="no" width="802px" height="4000px"></iframe></p>
<p>Source of the data:</p>
<p>Economic statistics from OECD, opinion data from TNS Sofres.</p>
<p>Making-of and explanation post to follow.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-1395" class="post-1395 post type-post status-publish format-standard hentry category-d3 category-data-visualization category-tips tag-d3 tag-embedding tag-tableau tag-wordpress">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/2012/07/02/embedding-tableau-visualizations-on-the-web/" rel="bookmark"><time class="entry-date published" datetime="2012-07-02T19:42:13+00:00">July 2, 2012</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> on <a href="/category/d3/" rel="category tag">d3</a>, <a href="/category/data-visualization/" rel="category tag">data visualization</a>, <a href="/category/tips/" rel="category tag">tips</a>			</span>
		        <h1 class="post-title"><a href="/2012/07/02/embedding-tableau-visualizations-on-the-web/" rel="bookmark">Embedding tableau visualizations on the web</a></h1>
         
    </header>
	<section class="post-content">

		<p>I&#8217;m writing this short post because I see that exact phrase come up in the search engine terms of the blog now and again (along with &#8220;<a href="http://thazing.com/hello-this-is-bathtub/#.T_HYBsXxqGM">Hello this is bathtub</a>&#8221; but I can&#8217;t really help there).</p>
<p>Long story short. I run into problems all the time trying to properly embed Tableau vis into wordpress blog posts. Does it happen outside of wordpress, I don&#8217;t know, because I don&#8217;t really try to embed Tableau vis outside of wordpress. That said, I have the same problem with d3 vis in wordpress and I&#8217;ve been asked several times how do I do it.</p>
<h3>iframes.</h3>
<p>That&#8217;s how.</p>
<p>Here is what I did <a href="http://jckr.github.io/blog/blog/2012/06/30/tableau-2012-sports-visualization-contest-entry/">last time</a>.</p>
<pre class="brush: jscript; title: ; notranslate" title="">
&lt;iframe
  style=&quot;border: 0px;&quot;
  src=&quot;http://public.tableausoftware.com/views/champions/champions?:embed=y&amp;amp;:from_wg=true&quot;
  scrolling=&quot;no&quot;
  width=&quot;652px&quot;
  height=&quot;756px&quot;&gt;
&lt;/iframe&gt;
</pre>
<p>so you&#8217;ll have to go to HTML mode and type it out. When it&#8217;s done, you can safely go back to visual mode if you feel like it.<br />
Let&#8217;s go through these lines one by one (btw, they don&#8217;t have to appear one line at a time, it&#8217;s just for presentation purposes).</p>
<p>Most important, what in on src. That&#8217;s simply the link to the page of your tableau vis. And if that&#8217;s not clear enough, it goes like this:<br />
http://public.tableausoftware.com/views/ + <em>name of your workbook</em> + / + <em>name of your dashboard or sheet</em>.</p>
<p>Since I want to show a dashboard called champions in a workbook called champions as well, that&#8217;sÂ http://public.tableausoftware.com/views/champions/champions.</p>
<p>I&#8217;m not sure whether what&#8217;s after the dashboard name is important. I&#8217;ll leave that as an exercise to figure it out. I&#8217;m pretty confident things work without it.</p>
<p>Then the rest.</p>
<p>style=&#8221;border: 0px&#8221; Yes, because you don&#8217;t want an ugly border around your iframe. or do you?</p>
<p>scrolling=&#8221;no&#8221;. So there&#8217;s no scrollbar. Look. Scrollbars in iframes were pretty rad in 1996, but if you want to give that embed feeling, you have to do without them.</p>
<p>height=&#8230;px, width=&#8230;px. Here&#8217;s the tricky part. You have to manually set the size of your visualisation and add a couple of pixels for good measure.</p>
<p>In tableau, when creating dashboards, I have always used the option to size themÂ <em>exactlyÂ </em>at a precise size and I recommend you do that too. Then add 2-6 px to each dimension and use that as width and height.</p>
<p>In my experience going through these steps is really less painful than using the &#8220;native&#8221; embed functionality of tableau vis which sometimes work and sometimes doesn&#8217;t. The added bonus is that the resulting html is much more legible than what Tableau generates, which, for the record, is:</p>
<pre>&lt;script type="text/javascript" src="http://public.tableausoftware.com/javascripts/api/viz_v1.js"&gt;&lt;/script&gt;&lt;div style="width:654px; height:799px;"&gt;&lt;noscript&gt;&lt;a href="http:&amp;#47;&amp;#47;www.jckr.github.io/blog&amp;#47;blog&amp;#47;2012&amp;#47;06&amp;#47;30&amp;#47;tableau-2012-sports-visualization-contest-entry&amp;#47;"&gt;&lt;img alt="champions " src="http:&amp;#47;&amp;#47;public.tableausoftware.com&amp;#47;static&amp;#47;images&amp;#47;ch&amp;#47;champions&amp;#47;champions&amp;#47;1_rss.png" style="border: none" /&gt;&lt;/a&gt;&lt;/noscript&gt;&lt;object width="654" height="799" style="display:none;"&gt;&lt;param name="host_url" value="http%3A%2F%2Fpublic.tableausoftware.com%2F" /&gt;&lt;param name="site_root" value="" /&gt;&lt;param name="name" value="champions&amp;#47;champions" /&gt;&lt;param name="tabs" value="no" /&gt;&lt;param name="toolbar" value="yes" /&gt;&lt;param name="static_image" value="http:&amp;#47;&amp;#47;public.tableausoftware.com&amp;#47;static&amp;#47;images&amp;#47;ch&amp;#47;champions&amp;#47;champions&amp;#47;1.png" /&gt;&lt;param name="animate_transition" value="yes" /&gt;&lt;param name="display_static_image" value="yes" /&gt;&lt;param name="display_spinner" value="yes" /&gt;&lt;param name="display_overlay" value="yes" /&gt;&lt;param name="display_count" value="yes" /&gt;&lt;param name="from_wg" value="true" /&gt;&lt;/object&gt;&lt;/div&gt;&lt;div style="width:654px;height:22px;padding:0px 10px 0px 0px;color:black;font:normal 8pt verdana,helvetica,arial,sans-serif;"&gt;&lt;div style="float:right; padding-right:8px;"&gt;&lt;a href="http://www.tableausoftware.com/public?ref=http://public.tableausoftware.com/views/champions/champions" target="_blank"&gt;Powered by Tableau&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;</pre>
<p>Yeah. You say &amp;#47; i say %2F. anyway, this is a bit difficult to troubleshoot.</p>
<p>The drawback when using iframes is that you lose the nice static image which is generated for RSS flows and other environments without interactivity. If you don&#8217;t know what I&#8217;m talking about (if you&#8217;re not familiar with that large orange arrow at the center) you&#8217;ll have no regrets.</p>
<h3>Bonus: d3.</h3>
<p>It turns out that the iframe is the simplest solution to have d3 work within wordpress, too. Sure, in theory it is possible to upload a js file as a media file, so you get a url with the date in it or something, which you can link to from the&#8230; whatever. It just never works and it&#8217;s a pain to maintain.</p>
<p>so instead, use iframes. Make your d3 visualisation into an html file which will have all the necessary links. Then upload the file to a location you know (and possibly dependencies) and you&#8217;re all set! set an iframe with the same guidelines as above. To make the process even less painful, I use a plug-in called <a href="http://wordpress.org/extend/plugins/wp-filemanager/">FileManager</a> which lets me upload and manage files from within my dashboard environment. On another server I use another app also called <a href="http://www.gerd-tentler.de/tools/filemanager/">FileManager</a> (quite a catchy name, apparently) which runs outside of the wordpress environment.</p>
<p>Happy embedding!</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-1384" class="post-1384 post type-post status-publish format-standard hentry category-data-visualization tag-apoel-nicosia tag-chamions-league tag-contest tag-football tag-real-madrid tag-sports tag-tableau">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/2012/06/30/tableau-2012-sports-visualization-contest-entry/" rel="bookmark"><time class="entry-date published" datetime="2012-06-30T01:21:26+00:00">June 30, 2012</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> on <a href="/category/data-visualization/" rel="category tag">data visualization</a>			</span>
		        <h1 class="post-title"><a href="/2012/06/30/tableau-2012-sports-visualization-contest-entry/" rel="bookmark">Tableau 2012 sports visualization contest entry</a></h1>
         
    </header>
	<section class="post-content">

		<p><iframe style="border: 0px;" src="http://public.tableausoftware.com/views/champions/champions?:embed=y&amp;:from_wg=true" scrolling="no" width="652px" height="756px"></iframe></p>
<p>So here goes for the 2012 Tableau contest entry.<br />
Before I go on explaining what this is about and how it&#8217;s been made, I&#8217;d like to express my thanks to <a href="http://www.optasports.com/">Opta</a> for letting me use this awesome dataset. They have been very reactive and supportive.</p>
<h2>So what is this?</h2>
<p>So the assignment was to create a visualization about sports. and who says sports, says football. There&#8217;s been a number of epic football games in recent history, and the Real Madrid / APOEL Nicosia match up last April is definitely one of them. It&#8217;s that game where APOEL defender Paolo Jorge, after losing 2 teeth after an unfortunate collision with a teammate, decided to pull out a third one that was hanging lose. And although Real ended up winning by a large margin 5-2, few teams were able to score 1 goal against 2012&#8217;s Real Madrid, let alone 2.</p>
<p>So I chose to represent the game as a network.</p>
<p>The circles on the right (Real Madrid) are much larger, which means that Real players were involved in more events in the game than their APOEL counterparts. The dataset I could work from had all sorts of events recorded such as passes or shots. The lines linking the left side also seem darker. You can also tell that lines across attackers (lower part of screen) are much thinner than those who involve mid-fields, who are really building the game, or defenders. Lines are colored by the team who initiated the action. So if a line of the color of one team ends connected to the player of another team, it means the ball has been stolen. So you can explore how defenders were able to stop individual attackers, duels among midfielders, etc.</p>
<p>This being a contest, I&#8217;ve thrown in a little subtlety with the possibility of switching the form of the display from a more abstract circle diagram network, to a second representation where players are positioned according to their average physical position during the game. For this second representation, I&#8217;ve chosen to show teams side by side, and not one on top of the other, as to keep the chart legible.</p>
<h2>How is this done?</h2>
<p>First let me explain what I attempt to do in a contest.</p>
<p>I try to do three things. First, work on interesting, non-trivial data. Second, aim for virtuosity in the execution, try to come up with a difficult technique and hopefully pull it out nicely. Finally, link the two together: make the visualization relevant, so it supports the interestingness of the data, without being too busy or complex.</p>
<p>So we talked about the data. Again I must say it&#8217;s been really comfortable working with a professional dataset. The football statistics that reach mass audiences are usually very aggregated, so it&#8217;s really nice to have access to a degree of finesse. And by the way, I only used the tip of the iceberg of that data.</p>
<p>Now the technique.</p>
<p>Some time ago I wrote how <a href="http://www.google.fr/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;ved=0CFQQFjAA&amp;url=http%3A%2F%2Fwww.jckr.github.io/blog%2Fblog%2F2011%2F11%2F04%2Fan-open-letter-to-tableau%2F&amp;ei=gzDuT8WQPMfK0QWn5rmJDg&amp;usg=AFQjCNFHshZKvXmHRXzX1KnxvxTBc-dJKA&amp;sig2=i3qKGtUrVLrR0OWQkZnpoA">I regretted that Tableau doesn&#8217;t have a network graph module</a>. Though, I had a fair idea how to hack one.</p>
<p>As in a previous post on treemaps, we are using the line mark with aptly chosen coordinates. Note that since the lines I am drawing rely on two records, we won&#8217;t be needing the path shelf this time.</p>
<p>There are two kinds of &#8220;lines&#8221; here: those who act as nodes, and those who act as links.</p>
<p>Nodes are where the players circles are, and are also used to support labels. Those are given a size depending on the number of events each player is involved in. That number has been precomputed and is made available with the data.</p>
<p>To explain how links work, I have 3 sheets in my data. One on players (which provide the location of each player depending on each mode, their names, and other such details), one on points, which lists all the begin- and end-points of all the links, all of these points being linked to a record in the player sheet. The final sheet is the one on lines, where each record has a start and an end point.</p>
<p>So essentially, all the positioning happens in the player sheet. Each player and each special location there is assigned two positions, one around the circle diagram and one in the other form. Both are calculated before the data is supplied to Tableau. In Tableau using a parameter we can simulate a transition from one form to another &#8211; the intermediary states are even legible ðŸ™‚</p>
<p>For the tooltips, I have prepared different scenarios depending on the type of line which will be mouseovered (passes, shots, goals, players&#8230;) so one formula can be used to generate a useful and relevant text.</p>
<p>Finally, I used a little trick around transparency. Here it is absolutely necessary to use transparency because else the networks will become very, very busy and difficult to read. However, I did want the goal lines to stand out. I wanted them to be not transparent. Problem: there is no transparency shelf. You can only set transparency for all the marks at once. So, each goal link is really several links one on top of the other, so the resulting line is really opaque.</p>
<p>And finally the relevance.</p>
<p>I didn&#8217;t want to pack too much data at once, I mean sure there is much more data than on a traditional game report we see in the sports press, but not to the point that it&#8217;s overwhelming. I tried to make it so that it&#8217;s possible to immediately see the outcome of the game by counting the thicker lines going out of the circle. 2 to 5.</p>
<p>Instead of packing the dashboard with tightly fitted panels I have used just this one and only used one control to let the user change the representation.</p>
<p>So, I hope you all like it!</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-1211" class="post-1211 post type-post status-publish format-standard hentry category-d3 category-tips tag-d3 tag-tableau tag-treemaps tag-tutorial">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/2012/04/19/treemaps-in-tableau-can-be-done/" rel="bookmark"><time class="entry-date published" datetime="2012-04-19T13:16:13+00:00">April 19, 2012</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> on <a href="/category/d3/" rel="category tag">d3</a>, <a href="/category/tips/" rel="category tag">tips</a>			</span>
		        <h1 class="post-title"><a href="/2012/04/19/treemaps-in-tableau-can-be-done/" rel="bookmark">Treemaps in Tableau? can be done.</a></h1>
         
    </header>
	<section class="post-content">

		Tableau can do many things natively but there are a couple of basic primitives that are not built in because they behave somewhat differently from the overall logic. And <a href="http://www.tableausoftware.com/about/blog/2011/05/alternative-tree-maps-0">treemaps is one of them</a>. Then again treemaps are arguably one of the best way to express complex hierarchical information, i.e. to show the proportions in a large dataset.</p>

Fortunately, thanks to Tableau flexibility there are ways to do that. In the tutorial I'm going to cover 2 cases. First, we'll create a somewhat complex treemap off data which will not change in runtime. Then, we'll create mini-treemaps which can change dynamically.</p>
<h2>A complex treemap</h2>
<script type="text/javascript" src="http://public.tableausoftware.com/javascripts/api/viz_v1.js"></script>
<noscript><a href="#"><img alt="ComplexTM " src="http:&#47;&#47;public.tableausoftware.com&#47;static&#47;images&#47;tr&#47;treemaps&#47;ComplexTM&#47;1_rss.png" style="border: none" /></a></noscript><object class="tableauViz" width="604" height="369" style="display:none;"><param name="host_url" value="http%3A%2F%2Fpublic.tableausoftware.com%2F" /><param name="site_root" value="" /><param name="name" value="treemaps&#47;ComplexTM" /><param name="tabs" value="no" /><param name="toolbar" value="yes" /><param name="static_image" value="http:&#47;&#47;public.tableausoftware.com&#47;static&#47;images&#47;tr&#47;treemaps&#47;ComplexTM&#47;1.png" /><param name="animate_transition" value="yes" /><param name="display_static_image" value="yes" /><param name="display_spinner" value="yes" /><param name="display_overlay" value="yes" /><param name="display_count" value="yes" /></object>
<div style="width:604px;height:22px;padding:0px 10px 0px 0px;color:black;font:normal 8pt verdana,helvetica,arial,sans-serif;"><div style="float:right; padding-right:8px;"><a href="http://www.tableausoftware.com/public?ref=http://public.tableausoftware.com/views/treemaps/ComplexTM" target="_blank">Powered by Tableau</a></div></div>
Before we go in the details the main ideas are deceptively simple.</p>
<ul>
	<li>we use the polygon mark,</li>
	<li>we generate the treemap layout outside of tableau.</li>
</ul>
What we want (and what we'll get) is a dataset that can be directly imported in Tableau and -boom- makes a treemap in a few clicks.</p>

To make this dataset we can use d3. The treemap I am making is directly inspired from the <a href="/tag/tableau/mbostock.github.com/d3/ex/treemap.html">d3 treemap example</a>. d3 is already computing all of the node positions so what we'll do is modify the program slightly so that it outputs them in a way that can be directly used in Tableau.</p>

Here is the <a href="http://jckr.github.io/blog/wp-content/uploads/2012/04/treemap.html">modified file</a>Â which you can download and run on your computer. To work it needs to be in the same folder as a <a href="http://jckr.github.io/blog/wp-content/uploads/2012/04/data.js">data file</a>Â called data.js which will hold your hiearchical data and which has the same structure as the one linked here.</p>

You can just copy/paste the table that's displayed below the treemap and put it in Tableau or save it in a file for good measure. Here is <a href="http://jckr.github.io/blog/wp-content/uploads/2012/04/data.csv">the output</a> of the data file linked above.</p>

Let's take a look at a few rows :</p>
<table>
<tbody>
<tr>
<td>Id</td>
<td>Path</td>
<td>Top-level category</td>
<td>Name</td>
<td>Value</td>
<td>Corner</td>
<td>x</td>
<td>y</td>
</tr>
<tr>
<td>0</td>
<td>flare&gt;analytics&gt;cluster</td>
<td>flare</td>
<td>AgglomerativeCluster</td>
<td>3938</td>
<td>0</td>
<td>89</td>
<td>167</td>
</tr>
<tr>
<td>0</td>
<td>flare&gt;analytics&gt;cluster</td>
<td>flare</td>
<td>AgglomerativeCluster</td>
<td>3938</td>
<td>1</td>
<td>167</td>
<td>167</td>
</tr>
<tr>
<td>0</td>
<td>flare&gt;analytics&gt;cluster</td>
<td>flare</td>
<td>AgglomerativeCluster</td>
<td>3938</td>
<td>2</td>
<td>167</td>
<td>192</td>
</tr>
<tr>
<td>0</td>
<td>flare&gt;analytics&gt;cluster</td>
<td>flare</td>
<td>AgglomerativeCluster</td>
<td>3938</td>
<td>3</td>
<td>89</td>
<td>192</td>
</tr>
<tr>
<td>1</td>
<td>flare&gt;analytics&gt;cluster</td>
<td>flare</td>
<td>CommunityStructure</td>
<td>3812</td>
<td>0</td>
<td>102</td>
<td>138</td>
</tr>
<tr>
<td>1</td>
<td>flare&gt;analytics&gt;cluster</td>
<td>flare</td>
<td>CommunityStructure</td>
<td>3812</td>
<td>1</td>
<td>167</td>
<td>138</td>
</tr>
<tr>
<td>1</td>
<td>flare&gt;analytics&gt;cluster</td>
<td>flare</td>
<td>CommunityStructure</td>
<td>3812</td>
<td>2</td>
<td>167</td>
<td>167</td>
</tr>
<tr>
<td>1</td>
<td>flare&gt;analytics&gt;cluster</td>
<td>flare</td>
<td>CommunityStructure</td>
<td>3812</td>
<td>3</td>
<td>102</td>
<td>167</td>
</tr>
<tr>
<td>2</td>
<td>flare&gt;analytics&gt;cluster</td>
<td>flare</td>
<td>HierarchicalCluster</td>
<td>6714</td>
<td>0</td>
<td>89</td>
<td>192</td>
</tr>
<tr>
<td>2</td>
<td>flare&gt;analytics&gt;cluster</td>
<td>flare</td>
<td>HierarchicalCluster</td>
<td>6714</td>
<td>1</td>
<td>167</td>
<td>192</td>
</tr>
<tr>
<td>2</td>
<td>flare&gt;analytics&gt;cluster</td>
<td>flare</td>
<td>HierarchicalCluster</td>
<td>6714</td>
<td>2</td>
<td>167</td>
<td>236</td>
</tr>
<tr>
<td>2</td>
<td>flare&gt;analytics&gt;cluster</td>
<td>flare</td>
<td>HierarchicalCluster</td>
<td>6714</td>
<td>3</td>
<td>89</td>
<td>236</td>
</tr>
</tbody>
</table>
I'm creating 4 lines per "leaf" node. So in this example which has 220 nodes, that amounts to 880 lines. Why 4? Because to draw a rectangle in Tableau you really need to define 4 corners. This is why there is a column "Corner" which is worth 0,1,2 and 3. This, we will use to tell Tableau to read our corners in bottom left, bottom right, top right, top left order which produces a nice convex rectangle and not a concave hourglass shape.</p>

Now off to Tableau with this data.Â <a href="http://jckr.github.io/blog/wp-content/uploads/2012/04/complex.png"><img class="aligncenter size-full wp-image-1212" title="complex" src="http://jckr.github.io/blog/wp-content/uploads/2012/04/complex.png" alt="" width="558" height="477" /></a></p>

Now it's just a matter of doing like this screen. Unsurprisingly the columns and rows are going to be determined by x and y. You want a polygon mark, and you absolutely must use your corner measure in the path. For color, you'll have a choice, you can use the top-level category column (as I have) or the full path which will divide your treemap in finer parts. Finally, level of detail: you must use the Id and not the name in case several of your nodes have the same name. It's quite important at this point to uncheck aggregate measures in Analysis. You do NOT want aggregate measures (though it's quite pretty). To be able to use the name, you must first make a measure out of it. And finally, you'll want to update your infotip slightly.</p>

All of this you can see if you download the tableau file.</p>

And voilÃ ! Treemaps for your Tableau workbooks.</p>

<em>Caveat:</em> the polygon mark doesn't support labels so you can't write on top of the small rectangles what they are but that's not the point of the treemap, which is instead to give an immediate first impression of the relative size of large groups of your data, then allow you to explore them, to that end the infotip function works just fine.</p>
<h2>Simpler but dynamic treemaps</h2>
This is fine and dandy if your data doesn't change but it won't scale if you need to make many treemaps based on selections. What to do? You could use pie charts, but let's not.</p>

To that end I've tried to emulate the <a href="http://www.congressspeaks.com/">Congress speaks</a>Â visualization by <a href="http://periscopic.com/">Periscopic</a>.Â I really like it. When you've selected representatives at the end of the process you are taken to a screen which shows the following mini-treemap:</p>

<a href="http://jckr.github.io/blog/wp-content/uploads/2012/04/votingrecord.png"><img class="aligncenter size-full wp-image-1213" title="votingrecord" src="http://jckr.github.io/blog/wp-content/uploads/2012/04/votingrecord.png" alt="" width="246" height="166" /></a></p>

There are just 5 rectangles. But they will change for any representative that we choose. Can this be done with Tableau? Obviously.</p>

Now the Tableau part of this is slightly trickier than above. The idea is that we are going to use formulas to generate the coordinates of all 20 corners of the rectangles, in other words we are going to let Tableau calculate the layout. We can do it because the way that rectangles are going to be arranged is quite predictible. There is one on the left, then 4 stacked on the right one on top of the other. Again, we could compute all of these coordinates outside of Tableau but that would be a hassle and so for a large number of cases it becomes easier and more reliable to do this inside of Tableau.</p>
<h3>Data</h3>
For this I have used completely random data. I have <a href="http://www.kleimo.com/random/name.cfm">generated 20 names</a>, and for each I have generated 5 values in a likely range, number of possible votes, number of votes the representative actually voted, number of times they voted yes, number of times they voted yes with their party, and the same for no. (or nay, technically).</p>

At the end of the day I need 20 records per representative (5 rectangles of 4 corners each), so I can either replicate the line 20 times, or use linked tables. The idea is to get something like this for all of the representatives that can somehow get into Tableau.</p>
<table width="640" border="0" cellspacing="0" cellpadding="0"><colgroup> <col span="10" width="64" /> </colgroup>
<tbody>
<tr>
<td width="64" height="17">Id</td>
<td width="64">representative</td>
<td width="64">corner</td>
<td width="64">rectangle</td>
<td width="64">possible votes</td>
<td width="64">total votes</td>
<td width="64">voted yes</td>
<td width="64">yes with party</td>
<td width="64">voted no</td>
<td width="64">no with party</td>
</tr>
<tr>
<td align="right" height="17">16</td>
<td>Nelson Thiede</td>
<td align="right">0</td>
<td>no against party</td>
<td align="right">888</td>
<td align="right">784</td>
<td align="right">320</td>
<td align="right">274</td>
<td align="right">464</td>
<td align="right">373</td>
</tr>
<tr>
<td align="right" height="17">16</td>
<td>Nelson Thiede</td>
<td align="right">1</td>
<td>no against party</td>
<td align="right">888</td>
<td align="right">784</td>
<td align="right">320</td>
<td align="right">274</td>
<td align="right">464</td>
<td align="right">373</td>
</tr>
<tr>
<td align="right" height="17">16</td>
<td>Nelson Thiede</td>
<td align="right">2</td>
<td>no against party</td>
<td align="right">888</td>
<td align="right">784</td>
<td align="right">320</td>
<td align="right">274</td>
<td align="right">464</td>
<td align="right">373</td>
</tr>
<tr>
<td align="right" height="17">16</td>
<td>Nelson Thiede</td>
<td align="right">3</td>
<td>no against party</td>
<td align="right">888</td>
<td align="right">784</td>
<td align="right">320</td>
<td align="right">274</td>
<td align="right">464</td>
<td align="right">373</td>
</tr>
<tr>
<td align="right" height="17">16</td>
<td>Nelson Thiede</td>
<td align="right">0</td>
<td>no vote</td>
<td align="right">888</td>
<td align="right">784</td>
<td align="right">320</td>
<td align="right">274</td>
<td align="right">464</td>
<td align="right">373</td>
</tr>
<tr>
<td align="right" height="17">16</td>
<td>Nelson Thiede</td>
<td align="right">1</td>
<td>no vote</td>
<td align="right">888</td>
<td align="right">784</td>
<td align="right">320</td>
<td align="right">274</td>
<td align="right">464</td>
<td align="right">373</td>
</tr>
<tr>
<td align="right" height="17">16</td>
<td>Nelson Thiede</td>
<td align="right">2</td>
<td>no vote</td>
<td align="right">888</td>
<td align="right">784</td>
<td align="right">320</td>
<td align="right">274</td>
<td align="right">464</td>
<td align="right">373</td>
</tr>
<tr>
<td align="right" height="17">16</td>
<td>Nelson Thiede</td>
<td align="right">3</td>
<td>no vote</td>
<td align="right">888</td>
<td align="right">784</td>
<td align="right">320</td>
<td align="right">274</td>
<td align="right">464</td>
<td align="right">373</td>
</tr>
<tr>
<td align="right" height="17">16</td>
<td>Nelson Thiede</td>
<td align="right">0</td>
<td>no with party</td>
<td align="right">888</td>
<td align="right">784</td>
<td align="right">320</td>
<td align="right">274</td>
<td align="right">464</td>
<td align="right">373</td>
</tr>
<tr>
<td align="right" height="17">16</td>
<td>Nelson Thiede</td>
<td align="right">1</td>
<td>no with party</td>
<td align="right">888</td>
<td align="right">784</td>
<td align="right">320</td>
<td align="right">274</td>
<td align="right">464</td>
<td align="right">373</td>
</tr>
<tr>
<td align="right" height="17">16</td>
<td>Nelson Thiede</td>
<td align="right">2</td>
<td>no with party</td>
<td align="right">888</td>
<td align="right">784</td>
<td align="right">320</td>
<td align="right">274</td>
<td align="right">464</td>
<td align="right">373</td>
</tr>
<tr>
<td align="right" height="17">16</td>
<td>Nelson Thiede</td>
<td align="right">3</td>
<td>no with party</td>
<td align="right">888</td>
<td align="right">784</td>
<td align="right">320</td>
<td align="right">274</td>
<td align="right">464</td>
<td align="right">373</td>
</tr>
<tr>
<td align="right" height="17">16</td>
<td>Nelson Thiede</td>
<td align="right">0</td>
<td>yes against party</td>
<td align="right">888</td>
<td align="right">784</td>
<td align="right">320</td>
<td align="right">274</td>
<td align="right">464</td>
<td align="right">373</td>
</tr>
<tr>
<td align="right" height="17">16</td>
<td>Nelson Thiede</td>
<td align="right">1</td>
<td>yes against party</td>
<td align="right">888</td>
<td align="right">784</td>
<td align="right">320</td>
<td align="right">274</td>
<td align="right">464</td>
<td align="right">373</td>
</tr>
<tr>
<td align="right" height="17">16</td>
<td>Nelson Thiede</td>
<td align="right">2</td>
<td>yes against party</td>
<td align="right">888</td>
<td align="right">784</td>
<td align="right">320</td>
<td align="right">274</td>
<td align="right">464</td>
<td align="right">373</td>
</tr>
<tr>
<td align="right" height="17">16</td>
<td>Nelson Thiede</td>
<td align="right">3</td>
<td>yes against party</td>
<td align="right">888</td>
<td align="right">784</td>
<td align="right">320</td>
<td align="right">274</td>
<td align="right">464</td>
<td align="right">373</td>
</tr>
<tr>
<td align="right" height="17">16</td>
<td>Nelson Thiede</td>
<td align="right">0</td>
<td>yes with party</td>
<td align="right">888</td>
<td align="right">784</td>
<td align="right">320</td>
<td align="right">274</td>
<td align="right">464</td>
<td align="right">373</td>
</tr>
<tr>
<td align="right" height="17">16</td>
<td>Nelson Thiede</td>
<td align="right">1</td>
<td>yes with party</td>
<td align="right">888</td>
<td align="right">784</td>
<td align="right">320</td>
<td align="right">274</td>
<td align="right">464</td>
<td align="right">373</td>
</tr>
<tr>
<td align="right" height="17">16</td>
<td>Nelson Thiede</td>
<td align="right">2</td>
<td>yes with party</td>
<td align="right">888</td>
<td align="right">784</td>
<td align="right">320</td>
<td align="right">274</td>
<td align="right">464</td>
<td align="right">373</td>
</tr>
<tr>
<td align="right" height="17">16</td>
<td>Nelson Thiede</td>
<td align="right">3</td>
<td>yes with party</td>
<td align="right">888</td>
<td align="right">784</td>
<td align="right">320</td>
<td align="right">274</td>
<td align="right">464</td>
<td align="right">373</td>
</tr>
</tbody>
</table>
<h3>In Tableau</h3>
In Tableau we are going to use the same idea as above: polygon mark, disable aggregate measures, and use x and y for columns and rows.</p>

Only, x and y are going to be much more complex. Sorry about that. Well, not that complex but definitely longer.</p>

Here's x:</p>

<pre class="brush: plain; title: ; notranslate" title="">

case [rectangle]
when &quot;no vote&quot; then
 Â Â Â Â case [corner]
 Â Â Â Â Â Â when 0 then 0
 Â Â Â Â Â Â when 1 then (([possible votes]-[total votes])/[possible votes])
 Â Â Â Â Â Â when 2 then (([possible votes]-[total votes])/[possible votes])
 Â Â Â Â Â Â when 3 then 0
 Â Â Â Â end
else
 Â Â Â Â case [corner]
 Â Â Â Â Â Â when 0 then (([possible votes]-[total votes])/[possible votes])
 Â Â Â Â Â Â when 1 then 1
 Â Â Â Â Â Â when 2 then 1
 Â Â Â Â Â Â when 3 then (([possible votes]-[total votes])/[possible votes])
 Â Â end
end

</pre>

Depending on the rectangle we are trying to draw we can find ourselves in one of two cases (hence the use of case).</p>

If we draw "no vote" then we are on the left of our vis. The left corners are on the leftmost side of the vis (hence value: 0) and the right corners correspond to the proportion of possible votes which where not cast by this representative, which we can compute as ([possible votes]-[total votes])/[possible votes].</p>

In the other case, we are drawing one of the 4 stacked rectangles, so the right corners are on the rightmost side of the vis (hence value: 1) and the left corners correspond to the value we just computed.</p>

And now, y:</p>

<pre class="brush: plain; title: ; notranslate" title="">
case [rectangle]
when &quot;no vote&quot; then
case [corner]
when 0 then 0
when 1 then 0
when 2 then 1
when 3 then 1
end
when &quot;yes against party&quot; then
case [corner]
when 0 then 0
when 1 then 0
when 2 then (([voted yes]-[yes with party])/[total votes])
when 3 then (([voted yes]-[yes with party])/[total votes])
end
when &quot;yes with party&quot; then
case [corner]
when 0 then (([voted yes]-[yes with party])/[total votes])
when 1 then (([voted yes]-[yes with party])/[total votes])
when 2 then ((2*[voted yes]-[yes with party])/[total votes])
when 3 then ((2*[voted yes]-[yes with party])/[total votes])
end
when &quot;no with party&quot; then
case [corner]
when 0 then ((2*[voted yes]-[yes with party])/[total votes])
when 1 then ((2*[voted yes]-[yes with party])/[total votes])
when 2 then ((2*[voted yes]+[no with party]-[yes with party])/[total votes])
when 3 then ((2*[voted yes]+[no with party]-[yes with party])/[total votes])
end
when &quot;no against party&quot; then
case [corner]
when 0 then ((2*[voted yes]+[no with party]-[yes with party])/[total votes])
when 1 then ((2*[voted yes]+[no with party]-[yes with party])/[total votes])
when 2 then 1
when 3 then 1
end
end
</pre>

y is longer but this is the same general idea. For the "no vote" rectangle, the corners are either to the top or bottom of the vis. But for the other, we can predict where the rectangle will start and when it will end, as a proportion of the [possible votes] field. The values we want are going to be correspond to these proportions, plus that of all the rectangles below so we can achieve that stacked effect (as opposed to have all rectangles superimposed at the bottom of the vis). This is why I am entering the rectangles in stacking order. Each time, the bottom corners get the value of the top corners of the previous rectangle.</p>

Here is the final result:</p>

&nbsp;
<script type="text/javascript" src="http://public.tableausoftware.com/javascripts/api/viz_v1.js"></script>
<noscript><a href="#"><img alt="mini TM " src="http:&#47;&#47;public.tableausoftware.com&#47;static&#47;images&#47;B5&#47;B5PW2XJWX&#47;1_rss.png" style="border: none" /></a></noscript>
<object class="tableauViz" width="404" height="269" style="display:none;">
<param name="host_url" value="http%3A%2F%2Fpublic.tableausoftware.com%2F" />
<param name="path" value="shared&#47;B5PW2XJWX" />
<param name="toolbar" value="yes" />
<param name="static_image" value="http:&#47;&#47;public.tableausoftware.com&#47;static&#47;images&#47;B5&#47;B5PW2XJWX&#47;1.png" />
<param name="animate_transition" value="yes" />
<param name="display_static_image" value="yes" />
<param name="display_spinner" value="yes" />
<param name="display_overlay" value="yes" />
<param name="display_count" value="yes" />
</object>
<div style="width:404px;height:22px;padding:0px 10px 0px 0px;color:black;font:normal 8pt verdana,helvetica,arial,sans-serif;"><div style="float:right; padding-right:8px;"><a href="http://www.tableausoftware.com/public?ref=http://public.tableausoftware.com/shared/B5PW2XJWX" target="_blank">Powered by Tableau</a></div></div>	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-1081" class="post-1081 post type-post status-publish format-standard hentry category-data-visualization tag-new-features tag-tableau tag-wishlist">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/2011/11/04/an-open-letter-to-tableau/" rel="bookmark"><time class="entry-date published" datetime="2011-11-04T12:51:13+00:00">November 4, 2011</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> on <a href="/category/data-visualization/" rel="category tag">data visualization</a>			</span>
		        <h1 class="post-title"><a href="/2011/11/04/an-open-letter-to-tableau/" rel="bookmark">An open letter to Tableau</a></h1>
         
    </header>
	<section class="post-content">

		<p>Normally, at this time of the year, I&#8217;ll be writing a recap of VisWeek. And I will &#8211; the writeups I have been doing for<a href="http://www.visualisingdata.com/"> visualisingdata.com</a> were just highlights of individual talks. But much of my VisWeek 2011 experience happened in between the talks. People you meet, ideas you glimpse, that collide and generate new ideas, plans you make&#8230;</p>
<p>One person I am always happy to meet at VisWeek, and who is visible from afar, is Tableau&#8217;s Jock MacKinlay. Since I couldn&#8217;t attend TCC11, I spent some time talking with Jock and Lori Williams about 7 and plans for the future. Whenever I would start a sentence by &#8220;hmm, you know&#8230;&#8221; Lori or Jock would write it down and ask me to send any remark in writing, so I thought I should do that, but rather than keeping this private, I&#8217;m going to stick to what&#8217;s written on one button I picked up on their stand: do it in public.</p>
<p>For a piece of software that complex, Tableau Desktop/Public has received improvements at an astonishing rate. So fast that one of the recommendations I had is already implemented or ready in the next release. So I have the conviction that Tableau product people care and are on the lookout for useful suggestions on how to move forward. Here are a few.</p>
<h2>On design</h2>
<h3>More fonts please!</h3>
<p>In Tableau Public, you&#8217;re stuck with the windows XP default fonts. That&#8217;s not an awful lot. Is that enough?</p>
<p>For the first 15 years or so of the web, webmasters had to be content with so called web-safe fonts. There was a time where the web was probably 90% verdana and people accepted this like death and taxes. But this is now 2011 and any personal website can be a marvel of customized typography &#8211; at least, the parts around a Tableau viz.</p>
<p>More specifically there are two issues with the current set of fonts.</p>
<p>First, there is no condensed font (think Helvetica Condensed, etc.). But condensed fonts are extremely useful to display numbers in callouts or on axes.</p>
<p>Second, the default font is Arial. This is not a neutral choice. There are lots of adjectives that can be associated with Arial, and frankly I don&#8217;t think it&#8217;s right these qualifiers should apply to Tableau. Arial is the default font of Excel pre-2007 , it&#8217;s the font of those bullet-ridden, unstyled, unsavory powerpoint slides that bore us to death for over a decade of unnecessary meetings. Many say it&#8217;s a rip-off of Helvetica.</p>
<p><div id="attachment_1082" style="width: 590px" class="wp-caption aligncenter"><a href="http://www.rottentomatoes.com/m/crazy_stupid_love/quotes/"><img class="size-full wp-image-1082" title="crazy-stupid-love-ryan-gosling-steve-carell" src="http://jckr.github.io/blog/wp-content/uploads/2011/11/crazy-stupid-love-ryan-gosling-steve-carell.jpg" alt="" width="580" height="387" /></a><p class="wp-caption-text">Tableau, you&#39;re better than Arial. Say it.</p></div></p>
<p>Being able to chose one&#8217;s font is essential to branding. The typography of my vizzes should concord with that of my website and my brand. Same goes with my colours (more on that in a second). Conversely if any output on my website is not aligned with my brand it denotes a lack of control.</p>
<h3>So what should Tableau do?</h3>
<p>Offer more fonts! There are literally hundreds of proven fonts which would be very well suited for dashboards. Fonts which are not unheard of, yet not trite. Legible, yet distinct.</p>
<p>Ideally, Tableau should commission its own font. There is no agreement about which is the best font to display numbers. Settle the question by creating that font! Anyone who would use this font in Desktop, Public or otherwise will subtly scream &#8220;Ra Ra Tableau&#8221;.</p>
<p>Then, offer several themes to choose from. In my view, Tableau encourages user to focus on what question to ask the data. Once this is done the resulting &#8220;visual query&#8221; should look ok, or require very little rework to be publishable as is. Today moving away from the arial bold, arial, light gray background on header scheme does require a lot of rework, and shouldn&#8217;t. Other Washington-based software firms have been offering themes for ages. Now look at all the existing Office palettes. They all are quite good. I have trouble using the default colors because it really says: this guy hasn&#8217;t given half a thought to color. At least I am aware that many very acceptable choices exist. I think it&#8217;s a reasonable stance.</p>
<h2>Node-link graphs</h2>
<p>Node-link graphs, or as they really should be called, graphs, are the most useful way to represent relationship across data elements. If your dataset has items and relationship between them (like movements from a place to another, transactions from an entity to another, people and how they relate to another&#8230; there are really many examples), a graph can show quickly and elegantly what there is to know about the data.</p>
<p><div id="attachment_1084" style="width: 606px" class="wp-caption aligncenter"><a href="http://bl.ocks.org/1153292"><img class="size-full wp-image-1084" title="Moblie-patent-suits" src="http://jckr.github.io/blog/wp-content/uploads/2011/11/Moblie-patent-suits.png" alt="" width="596" height="390" /></a><p class="wp-caption-text">Mobile patent suits, by Mike Bostock</p></div></p>
<p>I insist on the &#8220;quick insight&#8221; part because I believe that fundamentally this is what Tableau is about. Many people, including me, use Tableau systematically on a new dataset they try to understand. It&#8217;s very quick and efficient to explore data with Tableau and find out what&#8217;s interesting in a dataset. You&#8217;ll find consensus in the visual community that Tableau is the best &#8220;drafting tool&#8221; ever.</p>
<p>Back on graphs. One problem with graphs is that since they are not in the Excel canonical list of charts, they are not in the mindset of most corporate users.</p>
<p>Graphs, I believe, would be relatively easy to include in the Tableau toolkit. There are several algorithms that can calculate where the nodes should be drawn. This is not unlike drawing a map &#8211; suddenly the x and y come from lat-lon coordinates which are deduced from the underlying data. Likewise an algorithm could assign x and y coordinates to any row. Â Then all there remains to do is draw a dot or shape with all the standard attributes, color, size, etc. Links between nodes could be handled by the line object.</p>
<p>When I told Jock about graphs he asked me what would I do with that. Oh, I had some ready ideas: as an HR manager, I could visualize all the relationship in my company. There are many explicit (work in the same team) but also implicit (have worked together in the past, graduated in the same school, similar interests, offices close by etc) relationship in HR files. Or, logistics &#8211; I could represent my itinerariesÂ non-geographically. Suddenly I can make cartograms (which are usually tricky to do) instead of maps.</p>
<p>In retrospect this is not the right way to approach the problem. I&#8217;ve only worked in a handful of positions and industries. There are thousands of different jobs in as many domains who can look at data with different lenses. What I do know as a data visualization person is that graphs are useful and that if people who traditionally didn&#8217;t have access to them could pull them instantly on their data &#8211; fantastic things may occur.</p>
<h2>Treemaps and hierarchical charts</h2>
<p>&nbsp;</p>
<div class="wp-caption aligncenter" style:"width:354px">
<script type="text/javascript" src="http://public.tableausoftware.com/javascripts/api/viz_v1.js"></script>
<div class="tableauPlaceholder" style="width:354px; height:419px;"><noscript><a href="#"><img alt="circle " src="http:&#47;&#47;public.tableausoftware.com&#47;static&#47;images&#47;pa&#47;packing&#47;circle&#47;1_rss.png" style="height: 100%; width: 100%; border: none" /></a></noscript><object class="tableauViz" width="354" height="419" style="display:none;"><param name="host_url" value="http%3A%2F%2Fpublic.tableausoftware.com%2F" /><param name="name" value="packing&#47;circle" /><param name="tabs" value="no" /><param name="toolbar" value="no" /><param name="static_image" value="http:&#47;&#47;public.tableausoftware.com&#47;static&#47;images&#47;pa&#47;packing&#47;circle&#47;1.png" /><param name="animate_transition" value="yes" /><param name="display_static_image" value="yes" /><param name="display_spinner" value="yes" /><param name="display_overlay" value="yes" /></object></div>
<div style="width:354px;height:22px;padding:0px 10px 0px 0px;color:black;font:normal 8pt verdana,helvetica,arial,sans-serif;">
<div style="float:right; padding-right:8px;"><a href="http://www.tableausoftware.com/public?ref=http://public.tableausoftware.com/views/packing/circle" target="_blank">Powered by Tableau</a></div>
</div>
<p class="wp-caption-text">A circle map done with Tableau. This was slightly cumbersome and doesn&#8217;t work so well. This is also the biggest you can do as it uses the size property of circles, here at its maximum. Coordinates of circles are computed outside of Tableau. My attempts at making a treemap are, well, less polished. The dataset is the flare class hierarchy as in <a href="http://mbostock.github.com/d3/ex/pack.html">here</a></p>
</div>
<p>I could say pretty much the same thing about treemaps: they are very useful, especially since tabulated datasets, the bread and butter of Tableau, often contain hiearachies. Yet they are not part of the Excel family so if you&#8217;ve never worked with them you can&#8217;t feel you need them.</p>
<p>So I asked Jock, why doesn&#8217;t Tableau have treemaps? It makes sense, IMO. Treemaps are one of the few &#8220;advanced&#8221; visualization tools which have gained quasi-acceptance. I really see that as a progress. Isn&#8217;t there a natural match with Tableau? Jock answer was that the problem with treemap is that they do not fit well with Tableau algebra. To turn a dataset into a treemap would require a specific process that can&#8217;t generalize well like the rest of Tableau.</p>
<h3>See? There&#8217;s your problem</h3>
<p>So instead (or rather as a first step) I suggest Tableau adds an attribute to marks: a secondary size attribute. See it this way: if only one size attribute is filled, then it governs all aspects of the size of a mark (height, width, area, diagonal you name it. It would be proportional to all). But if there are two sizes one will affect height, the other, width. So yes, we can do rectangles. And ellipses too. Now that in itself is not half-bad. Fattened stars or what not, I don&#8217;t know what to do with them but rectangles and ellipses, now&#8230;</p>
<p>Now once you can handle rectangles, once you can handle layouts (which you can, because: maps), you can have treemaps, and/or any hierarchy or packing algorithm. I think we can stop at treemaps but folks at Tableau know there are wide, (mostly) unexplored territories beyond this point.</p>
<h2>Tableau and storytelling</h2>
<h3>Stateful urls</h3>
<p>OK this is the innovation that was already in the pipeline when I mentioned it. It would be very useful to have a system of stateful urls for Tableau public. What is that? The possibility to pass a set of parameters in addition to the url of a view, so that it is in a certain state. So the same dashboard could be shared in different states (for instance, with different items selected, or different filters) without having to be saved several times under several different names.</p>
<p>Bonus: dashboards under a certain state, if they can be uniquely identified through those parameters, can then be shared on facebook and twitter as is.</p>
<p>All of this is taken care of.</p>
<h3>Interactive slides framework</h3>
<p>Now the next step: an interactive slides framework.</p>
<p>The interactive slideshow, once<a href="http://www.nytimes.com/interactive/2010/11/03/us/politics/election-results-house-shift.html?ref=politics"> quasi-exclusive to the New York Times</a>, is now <a href="http://riskreport.weforum.org/#/0/1">gaining in popularity</a>.</p>
<p>The idea? there is a structure like the common slideshow, where the user can go to the next or previous slide, guided by a narrative. But at any step instead of following the flow, they can stop and interact with the view they have.</p>
<p>That said despite being a simple idea it requires quite an amount of overwork to implement properly. It makes sense for Tableau to have their own framework so users can arrange nicely a sequence of views in the desktop tool, for instance dashboards in specific states, with an extra layer of commentary if needs be, and then deploy the finished product which can be embedded in one location as opposed to requiring the user to embed several vizzes in one page. The advantage would be that the reader would go from one to the other as intended by the author, with a supporting narrative or explanations, and wouldn&#8217;t be required to explore or interact with each one to get an idea of what is going on.</p>
<h2>What do you think?</h2>
<p>What would <strong>you</strong> like in Tableau?</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-925" class="post-925 post type-post status-publish format-standard hentry category-data-visualization tag-rgb tag-tableau tag-violette tag-vision">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/2011/06/10/red-green-blue-something-else/" rel="bookmark"><time class="entry-date published" datetime="2011-06-10T18:35:34+00:00">June 10, 2011</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> on <a href="/category/data-visualization/" rel="category tag">data visualization</a>			</span>
		        <h1 class="post-title"><a href="/2011/06/10/red-green-blue-something-else/" rel="bookmark">Red + green + blue = something else</a></h1>
         
    </header>
	<section class="post-content">

		<p>I&#8217;ve been posting quite a few times on Tableau these last few days, so I&#8217;ll end up the week with one viz I had previously shared on twitter with some success.<br />
<script type="text/javascript" src="http://public.tableausoftware.com/javascripts/api/viz_v1.js"></script><object class="tableauViz" width="1667" height="870" style="display:none;"><param name="host_url" value="http%3A%2F%2Fpublic.tableausoftware.com%2F" /><param name="name" value="violette&#47;Sheet1" /><param name="tabs" value="no" /><param name="toolbar" value="yes" /><param name="animate_transition" value="yes" /><param name="display_static_image" value="yes" /><param name="display_spinner" value="yes" /><param name="display_overlay" value="yes" /></object><noscript>Sheet 1 <br /><a href="#"><img alt="Sheet 1 " src="http:&#47;&#47;public.tableausoftware.com&#47;static&#47;images&#47;vi&#47;violette&#47;Sheet1&#47;1_rss.png" height="100%" /></a></noscript>
<div style="width:1667px;height:22px;padding:0px 10px 0px 0px;color:black;font:normal 8pt verdana,helvetica,arial,sans-serif;">
<div style="float:right; padding-right:8px;"><a href="http://www.tableausoftware.com/public?ref=http://public.tableausoftware.com/views/violette/Sheet1" target="_blank">Powered by Tableau</a></div>
</div>
<p>so what&#8217;s the story?<br />
I have been inspired to do this via the work on <a href="http://www.onformative.com/work/fragments-of-rgb/">onformative</a> which I discovered on <a href="http://butdoesitfloat.com/1420489/One-has-to-arrive-at-a-specific-temperature-at-which-the-objects">But does it float</a>.</p>
<p>I was struck by how the proximity of a red dot, a green dot and a blue dot was interpreted by our human eyes as a spot of another color. Then again, this is how <a href="http://electronics.howstuffworks.com/lcd5.htm">monitors</a> <a href="http://computer.howstuffworks.com/monitor7.htm">work</a>. If you look hard enough on your lcd screen you may see the sub-pixels.<br />
This is also why, in an image such as this one, the segments of the line appear unaligned, although logically this line is one pixel wide.<br />
<a href="http://jckr.github.io/blog/wp-content/uploads/2011/06/unaligned.png"><img src="http://jckr.github.io/blog/wp-content/uploads/2011/06/unaligned.png" alt="" title="unaligned" class="aligncenter size-full wp-image-926" /></a><br />
Physically, the segments are <em>indeed</em> unaligned, as the each segment uses sub-pixels of a different color which don&#8217;t have the same horizontal position within one pixel. </p>
<p>However, I didn&#8217;t realize that this effect would work with patches of blue, green and red much bigger than a subpixel.<br />
I made the underlying dataset from a picture of my daughter Violette when she was 2. I converted the picture to a list of values of red, green and blue (thanks, processing) which were all associated to a x and y position on the screen and the name of their layer (so they could be turned on or off). These x and y positions were derived from the position of the pixel on the original image, but the red, blue and green dots are all shifted in one direction so they form a triangle.<br />
Then, I&#8217;ve added some extra layers as noise to obfuscate the image. </p>
<p>Here, the effect is voluntary. Then again, if you position lots of marks one next to the other, you could re-create it accidentally, and instead of seeing three distinct dots, your users would see just one and of a different color at that!</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-917" class="post-917 post type-post status-publish format-standard hentry category-data-visualization tag-contest tag-maps tag-real-estate tag-tableau">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/2011/06/09/and-tableau-contest-results/" rel="bookmark"><time class="entry-date published" datetime="2011-06-09T18:57:49+00:00">June 9, 2011</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> on <a href="/category/data-visualization/" rel="category tag">data visualization</a>			</span>
		        <h1 class="post-title"><a href="/2011/06/09/and-tableau-contest-results/" rel="bookmark">&#8230; and tableau contest results</a></h1>
         
    </header>
	<section class="post-content">

		<p>have been <a href="http://www.tableausoftware.com/about/blog/2011/06/dozens-vizzes-shine-tableau-interactive-viz-contest-11481">announced</a>. <a href="http://jckr.github.io/blog/blog/2011/06/03/tableau-contest-2011/">My entry</a> got honorary mentions which is the best I could hope for not being based in the US! anyway, the rewards is going through the process, seeing what <a href="http://www.datadrivenconsulting.com/2011/05/the-us-has-3-years-of-oil-in-the-ground-oil-exports-imports-and-consumption/">others</a> <a href="http://vizwiz.blogspot.com/2011/06/tableau-viz-contest-support-my-entry.html">have</a> <a href="http://russiansphinx.blogspot.com/2011/05/prices-of-real-estate-by-moscow.html">done</a>. and learn from the process. </p>
<p>I was pleasantly surprised to see that Agnieszka &#8211; Russian Sphinx chose a subject similar to mine &#8211; real estate, but in Moscow. Here&#8217;s her entry:<br />
<script type="text/javascript" src="http://public.tableausoftware.com/javascripts/api/viz_v1.js"></script><object class="tableauViz" width="654" height="732" style="display:none;"><param name="host_url" value="http%3A%2F%2Fpublic.tableausoftware.com%2F" /><param name="name" value="Moscow_prices&#47;Dashboard1" /><param name="tabs" value="no" /><param name="toolbar" value="yes" /><param name="animate_transition" value="yes" /><param name="display_static_image" value="yes" /><param name="display_spinner" value="yes" /><param name="display_overlay" value="yes" /><param name="host_url" value="http%3A%2F%2Fpublic.tableausoftware.com%2F" /><param name="animate_transition" value="yes" /><param name="display_static_image" value="yes" /><param name="display_spinner" value="yes" /><param name="display_overlay" value="yes" /></object><noscript>Prices of real estate by Moscow Districts in April 2011 (Click district to filter, keep Shift to select more districts. Click in white space to remove filter) <br /><a href="#"><img alt="Prices of real estate by Moscow Districts in April 2011 (Click district to filter, keep Shift to select more districts. Click in white space to remove filter) " src="http:&#47;&#47;public.tableausoftware.com&#47;static&#47;images&#47;Mo&#47;Moscow_prices&#47;Dashboard1&#47;1_rss.png" height="100%" /></a></noscript>
<div style="width:654px;height:22px;padding:0px 10px 0px 0px;color:black;font:normal 8pt verdana,helvetica,arial,sans-serif;">
<div style="float:right; padding-right:8px;"><a href="http://www.tableausoftware.com/public?ref=http://public.tableausoftware.com/views/Moscow_prices/Dashboard1" target="_blank">Powered by Tableau</a></div>
</div>
<p>Now she and I used a different approach to display our map and I didn&#8217;t really comment on how I made mine (let alone how she made hers)<br />
Here&#8217;s my map for the record:<br />
<script type="text/javascript" src="http://public.tableausoftware.com/javascripts/api/viz_v1.js"></script><object class="tableauViz" width="654" height="719" style="display:none;"><param name="host_url" value="http%3A%2F%2Fpublic.tableausoftware.com%2F" /><param name="name" value="contest2011&#47;WMap" /><param name="tabs" value="no" /><param name="toolbar" value="yes" /><param name="animate_transition" value="yes" /><param name="display_static_image" value="yes" /><param name="display_spinner" value="yes" /><param name="display_overlay" value="yes" /></object><noscript>Real-estate transactions in Manhattan Residential buildings, 2003-present <br /><a href="#"><img alt="Real-estate transactions in Manhattan Residential buildings, 2003-present " src="http:&#47;&#47;public.tableausoftware.com&#47;static&#47;images&#47;co&#47;contest2011&#47;WMap&#47;1_rss.png" height="100%" /></a></noscript>
<div style="width:654px;height:22px;padding:0px 10px 0px 0px;color:black;font:normal 8pt verdana,helvetica,arial,sans-serif;">
<div style="float:right; padding-right:8px;"><a href="http://www.tableausoftware.com/public?ref=http://public.tableausoftware.com/views/contest2011/WMap" target="_blank">Powered by Tableau</a></div>
</div>
<p>To create my map, I used the default mapping function of Tableau, where you declare the geographic role of two of your measures &#8211; one as latitude, one as longitude &#8211; and you can plot marks on a map, that can be zoomed, panned etc.<br />
<a href="http://jckr.github.io/blog/wp-content/uploads/2011/06/latitude.png"><img src="http://jckr.github.io/blog/wp-content/uploads/2011/06/latitude.png" alt="" title="latitude" class="aligncenter size-full wp-image-918" /></a><br />
If one of your dimensions is geographical in nature, like a country, US state, US county name or code, Tableau can calculate latitude and longitude so you don&#8217;t have to provide them. This also works for zip codes. So, if you have a valid US address, you can extract the zip code out of that (before you put your data in Tableau) and Tableau can represent this on a map quite accurately.<br />
In my case, I had tens of thousands of marks, which were available at a much finer level than the zip code (sometimes down to the appartment number) so I thought it would be a pity to aggregate them so. My data came with notions like neighborhood or block numbers, which is specific to the New York administration I suppose, but interesting in my context. That idea of block number sounded like the right level of aggregation for my data.<br />
The problem is, how do I get the latitude and longitude of each of the blocks?<br />
How I did this was to chose one address per block, and then geocode it with python and google maps. <a href="http://www.google.com/search?sourceid=chrome&#038;ie=UTF-8&#038;q=geocoding+python&#038;safe=active">Geocoding </a>is the process of converting addresses, well, in geographical coordinates and while doing it in Python does require coding it is trivial and there are many ready-made examples around which can be reused as is.<br />
then, in my data, I put the coordinates of each block for every record. So any building sale can be associated with a laritude and longitude, which is that of their block.<br />
In another view, I have a simpler map &#8211; by neighborhood. Neighborhoods are another proprietary notion, they are groups of blocks. So, I simply average the latitude and longitude of all the buildings in the neighborhood to position their mark.</p>
<p>While it can be desirable to let users interact with the map, in many cases it is not a safe option. Once you let your users unzoom and/or scrool away from the action, it is not obvious for them to get back.<br />
So Agnieszka has used another nifty technique, that of background images.<br />
Her map is really a static file imported with the background image function which is found in the data menu:<br />
<a href="http://jckr.github.io/blog/wp-content/uploads/2011/06/background-image.png"><img src="http://jckr.github.io/blog/wp-content/uploads/2011/06/background-image.png" alt="" title="background image" class="aligncenter size-full wp-image-919" /></a><br />
Like this, the user can really specify what to use for a map, when does it start, where does it end. The map won&#8217;t move afterwards.<br />
However, by doing so one cannot use geographic coordinates to display marks. One has to obtain, outside of Tableau, the x and y coordinates of each mark on the screen. Then, those x and y coordinates can be made into measures, and assigned respectively to the column and row shelves of the viz. </p>
<p>I&#8217;ll let you figure out which one is best for your next map project. Note that you can generate highly customizable map backgrounds with a service like <a href="http://www.cloudmade.com/">cloudmade</a>.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-906" class="post-906 post type-post status-publish format-standard hentry category-data-visualization tag-17 tag-contest tag-manhattan tag-real-estate tag-scatterplot tag-tableau tag-viz">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/2011/06/03/tableau-contest-2011/" rel="bookmark"><time class="entry-date published" datetime="2011-06-03T02:17:19+00:00">June 3, 2011</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> on <a href="/category/data-visualization/" rel="category tag">data visualization</a>			</span>
		        <h1 class="post-title"><a href="/2011/06/03/tableau-contest-2011/" rel="bookmark">Tableau contest 2011</a></h1>
         
    </header>
	<section class="post-content">

		<p><script type="text/javascript" src="http://public.tableausoftware.com/javascripts/api/viz_v1.js"></script><object class="tableauViz" width="654" height="719" style="display:none;"><param name="host_url" value="http%3A%2F%2Fpublic.tableausoftware.com%2F" /><param name="name" value="contest2011&#47;Winning" /><param name="tabs" value="no" /><param name="toolbar" value="yes" /><param name="animate_transition" value="yes" /><param name="display_static_image" value="yes" /><param name="display_spinner" value="yes" /><param name="display_overlay" value="yes" /></object><noscript>Real-estate transactions in ManhattanResidential buildings, 2003-present <br /><a href="#"><img alt="Real-estate transactions in ManhattanResidential buildings, 2003-present " src="http:&#47;&#47;public.tableausoftware.com&#47;static&#47;images&#47;co&#47;contest2011&#47;Winning&#47;1_rss.png" height="100%" /></a></noscript>
<div style="width:654px;height:22px;padding:0px 10px 0px 0px;color:black;font:normal 8pt verdana,helvetica,arial,sans-serif;">
<div style="float:right; padding-right:8px;"><a href="http://www.tableausoftware.com/public?ref=http://public.tableausoftware.com/views/contest2011/Winning" target="_blank">Powered by Tableau</a></div>
</div>
<p>Here is my Tableau contest 2011 entry.<br />
The rules stipulated it had to be about business, real-estate or finance, so I chose real-estate. Since everyone loves New-York, and since the data for real-estate transaction is <a href="http://www.nyc.gov/html/dof/html/property/property_val_sales.shtml">relatively easy to get</a>, that&#8217;s what I show. In order to be within Tableau Public 100,000 row limit, I chose to show only the residential transactions (apartment buildings or buildings converted to apartment buildings), larger than 100 square foot and sold at at least $1. </p>
<p>Before I started, I wanted to create a Tableau that would be legible as a static image.<br />
We tableau tribe have seen a lot of interactive dashboards with sophisticated action. Here, I wanted to cater to the discriminate analyst who gets their kicks from seeing patterns emerge with a glance to 90k datapoints. </p>
<p>What does it show for instance? well, while the bulk of transactions are at a price close to the average there are a large part which are done considerably below that, and comparatively, very few which are markedly over that.<br />
The marks which are aligned show either many transactions at the same price (there are distinct $1, $10 and $100 lines for instance) or sales of similar properties. There were a string of sales of identical apartments at 1335 6th Avenue, for instance.</p>
<p>It&#8217;s possible to switch the function of the Y-axis of the scatterplot, which can either represent square feet or sale price. The largest transaction on the period was around $4 billion, and the largest in terms of area was just above 10m square feet.<br />
It is also possible to explore through the lists on the right. By selecting &#8220;other types&#8221; of buildings for instance you can see which apartment buildings once were yeshivas or fire stations or (what?) &#8220;detention houses for wayward girls&#8221; (there&#8217;s one in upper east side).<br />
You can also switch to a <a href="http://public.tableausoftware.com/views/contest2011/WMap">map-based version of this dashboard</a>. Speaking of maps, a right-click on any mark can open a google maps window centered on that address for you.</p>
<p>So here goes, enjoy the viz and good luck to all contestants</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				<nav class="pagination navigation paging-navigation" role="navigation">
		<div class="nav-links">
						<div class="older-posts"><a href="/tag/tableau/page/2/" >Older Posts <span class="meta-nav">&rarr;</span></a></div>
							<div class="page-number">Page 1 of 2</div>
			
		</div><!-- .nav-links -->
	</nav><!-- .navigation -->
	
		
		</main><!-- #main -->
	</section><!-- #primary -->

	<div id="secondary" class="widget-area" role="complementary">
		<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form></aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h1 class="widget-title">Recent Posts</h1>		<ul>
					<li>
				<a href="/2016/08/17/the-big-leagues/">The big leagues</a>
						</li>
					<li>
				<a href="/2016/08/17/creating-a-react-visualization-web-app/">Creating a React visualization web app</a>
						</li>
					<li>
				<a href="/2016/08/13/beyond-rendering/">Beyond rendering</a>
						</li>
					<li>
				<a href="/2016/08/11/react-components/">React components</a>
						</li>
					<li>
				<a href="/2016/08/10/coding-with-react/">Coding with React</a>
						</li>
				</ul>
		</aside>		<aside id="recent-comments-2" class="widget widget_recent_comments"><h1 class="widget-title">Recent Comments</h1><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link"><a href='http://omeraz.wordpress.com/' rel='external nofollow' class='url'>×¢×•×ž×¨ ×¢×–×¨×™××œ</a></span> on <a href="/2016/08/17/the-big-leagues/#comment-567">The big leagues</a></li><li class="recentcomments"><span class="comment-author-link">Carlos Ayres</span> on <a href="/2012/05/28/manipulating-data-like-a-boss-with-d3/#comment-312">Manipulating data like a boss with d3</a></li><li class="recentcomments"><span class="comment-author-link"><a href='https://migrate.powertripanalytics.com/game-of-thrones-interactions-among-the-top-30-characters/' rel='external nofollow' class='url'>Game of ThronesInteractions Among the Top 30 Characters &#8211; PowerTrip Analytics</a></span> on <a href="/2013/05/13/making-the-game-of-thrones-visualization/#comment-466">Making the game of thrones visualization</a></li><li class="recentcomments"><span class="comment-author-link"><a href='https://abgoswam.wordpress.com/2016/10/08/d3-getting-started/' rel='external nofollow' class='url'>D3 &#8211; Getting Started | abgoswam&#039;s tech blog</a></span> on <a href="/2012/09/04/getting-to-hello-world-with-d3/#comment-419">Getting to &#8220;Hello world&#8221; with d3</a></li><li class="recentcomments"><span class="comment-author-link"><a href='https://plus.google.com/+BrotoBhattacharjee' rel='external nofollow' class='url'>Broto Bhattacharjee</a></span> on <a href="/2012/09/04/getting-to-hello-world-with-d3/#comment-418">Getting to &#8220;Hello world&#8221; with d3</a></li></ul></aside><aside id="archives-2" class="widget widget_archive"><h1 class="widget-title">Archives</h1>		<ul>
			<li><a href='/2016/08/'>August 2016</a></li>
	<li><a href='/2015/05/'>May 2015</a></li>
	<li><a href='/2015/02/'>February 2015</a></li>
	<li><a href='/2014/10/'>October 2014</a></li>
	<li><a href='/2013/11/'>November 2013</a></li>
	<li><a href='/2013/05/'>May 2013</a></li>
	<li><a href='/2013/03/'>March 2013</a></li>
	<li><a href='/2013/01/'>January 2013</a></li>
	<li><a href='/2012/12/'>December 2012</a></li>
	<li><a href='/2012/11/'>November 2012</a></li>
	<li><a href='/2012/10/'>October 2012</a></li>
	<li><a href='/2012/09/'>September 2012</a></li>
	<li><a href='/2012/07/'>July 2012</a></li>
	<li><a href='/2012/06/'>June 2012</a></li>
	<li><a href='/2012/05/'>May 2012</a></li>
	<li><a href='/2012/04/'>April 2012</a></li>
	<li><a href='/2012/01/'>January 2012</a></li>
	<li><a href='/2011/11/'>November 2011</a></li>
	<li><a href='/2011/10/'>October 2011</a></li>
	<li><a href='/2011/09/'>September 2011</a></li>
	<li><a href='/2011/08/'>August 2011</a></li>
	<li><a href='/2011/07/'>July 2011</a></li>
	<li><a href='/2011/06/'>June 2011</a></li>
	<li><a href='/2011/05/'>May 2011</a></li>
	<li><a href='/2011/04/'>April 2011</a></li>
	<li><a href='/2011/03/'>March 2011</a></li>
	<li><a href='/2011/02/'>February 2011</a></li>
	<li><a href='/2011/01/'>January 2011</a></li>
	<li><a href='/2010/11/'>November 2010</a></li>
	<li><a href='/2010/04/'>April 2010</a></li>
	<li><a href='/2010/03/'>March 2010</a></li>
	<li><a href='/2010/02/'>February 2010</a></li>
	<li><a href='/2010/01/'>January 2010</a></li>
	<li><a href='/2009/12/'>December 2009</a></li>
	<li><a href='/2009/10/'>October 2009</a></li>
	<li><a href='/2009/09/'>September 2009</a></li>
	<li><a href='/2009/08/'>August 2009</a></li>
	<li><a href='/2009/07/'>July 2009</a></li>
	<li><a href='/2009/06/'>June 2009</a></li>
	<li><a href='/2009/05/'>May 2009</a></li>
	<li><a href='/2008/12/'>December 2008</a></li>
	<li><a href='/2008/11/'>November 2008</a></li>
	<li><a href='/2008/10/'>October 2008</a></li>
		</ul>
		</aside><aside id="categories-2" class="widget widget_categories"><h1 class="widget-title">Categories</h1>		<ul>
	<li class="cat-item cat-item-2"><a href="/category/book-review/" >book review</a>
</li>
	<li class="cat-item cat-item-3"><a href="/category/charts/" >charts</a>
</li>
	<li class="cat-item cat-item-4"><a href="/category/conferences/" >conferences</a>
</li>
	<li class="cat-item cat-item-5"><a href="/category/d3/" >d3</a>
</li>
	<li class="cat-item cat-item-6"><a href="/category/dashboards/" >dashboards</a>
</li>
	<li class="cat-item cat-item-7"><a href="/category/data-publishing/" >data publishing</a>
</li>
	<li class="cat-item cat-item-8"><a href="/category/data-visualization/" >data visualization</a>
</li>
	<li class="cat-item cat-item-9"><a href="/category/francais/" >franÃ§ais</a>
</li>
	<li class="cat-item cat-item-10"><a href="/category/javascript/" >javascript</a>
</li>
	<li class="cat-item cat-item-11"><a href="/category/presentation/" >presentation</a>
</li>
	<li class="cat-item cat-item-12"><a href="/category/protovis/" >protovis</a>
</li>
	<li class="cat-item cat-item-13"><a href="/category/react/" >react</a>
</li>
	<li class="cat-item cat-item-14"><a href="/category/tips/" >tips</a>
</li>
	<li class="cat-item cat-item-1"><a href="/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-15"><a href="/category/web-sites/" >web sites</a>
</li>
		</ul>
</aside><aside id="meta-2" class="widget widget_meta"><h1 class="widget-title">Meta</h1>			<ul>
						<li><a href="/wp-login.php">Log in</a></li>
			<li><a href="/feed/">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="/comments/feed/">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="https://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>			</ul>
			</aside>		<div class="clear">&nbsp;</div>
	</div><!-- #secondary -->
	<footer id="colophon" class="site-footer" role="contentinfo">
	    <a class="subscribe icon-feed" href="/feed/"><span class="tooltip">Subscribe!</span></a>
		<div class="site-info inner">
		    <section class="copyright">
		    			    		<a href="https://github.com/lacymorrow/casper" rel="home">Casper WP</a> by Lacy Morrow		    			    </section>
		</div><!-- .site-info -->
	</footer><!-- #colophon -->
</main><!-- /#content -->

<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.9b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPlain.js?ver=3.0.9b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type='text/javascript' src='/wp-content/themes/casper/js/main.js?ver=1.0.0'></script>
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.6.10'></script>
<!--stats_footer_test--></body>
</html>
