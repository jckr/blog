<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="HandheldFriendly" content="True" />
<meta name="MobileOptimized" content="320" />

<title>The big leagues | jckr.github.io/blog</title>

<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="/xmlrpc.php">
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="jckr.github.io/blog &raquo; Feed" href="/feed/" />
<link rel="alternate" type="application/rss+xml" title="jckr.github.io/blog &raquo; Comments Feed" href="/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="jckr.github.io/blog &raquo; The big leagues Comments Feed" href="/2016/08/17/the-big-leagues/feed/" />
<!-- This site uses the Google Analytics by MonsterInsights plugin v7.0.5 - Using Analytics tracking - https://www.monsterinsights.com/ -->
<!-- Note: MonsterInsights is not currently configured on this site. The site owner needs to authenticate with Google Analytics in the MonsterInsights settings panel. -->
<!-- No UA code set -->
<!-- / Google Analytics by MonsterInsights -->
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/localhost:8888\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.10"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='YoutubeShortcodeMargenn-css'  href='/wp-content/plugins/youtube-shortcode/youtube-shortcode.css?ver=4.6.10' type='text/css' media='all' />
<link rel='stylesheet' id='casper-google-fonts-css'  href='//fonts.googleapis.com/css?family=Noto+Serif%3A400%2C700%2C400italic%7COpen+Sans%3A700%2C400&#038;ver=4.6.10' type='text/css' media='all' />
<link rel='stylesheet' id='casper-style-css'  href='/wp-content/themes/casper/style.css?ver=4.6.10' type='text/css' media='all' />
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Creating a React visualization web app' href='/2016/08/17/creating-a-react-visualization-web-app/' />
<link rel='next' title='Hello world!' href='/2018/04/09/hello-world/' />
<meta name="generator" content="WordPress 4.6.10" />
<link rel="canonical" href="/2016/08/17/the-big-leagues/" />
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2Flocalhost%3A8888%2F2016%2F08%2F17%2Fthe-big-leagues%2F" />
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2Flocalhost%3A8888%2F2016%2F08%2F17%2Fthe-big-leagues%2F&#038;format=xml" />

   	<style type="text/css">
					.blog-title a, .blog-description, .social-icons a { color: #ffffff; }
		
						                
		
							.main-navigation a { color: ; }
		                                            </style>
    		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		<style type="text/css" id="syntaxhighlighteranchor"></style>
</head>

<body class="single single-post postid-1765 single-format-standard group-blog">

<header id="masthead" role="banner" class="site-head site-header" >
    <nav id="site-navigation" class="main-navigation" role="navigation">
        <div>
            <h1 class="menu-toggle">
                <a class="icon-bars" href="#">
                    <span class="hidden">Menu</span>
                </a>
            </h1>
            <a class="skip-link screen-reader-text" href="#content">Skip to content</a>
            <div class="menu"><ul><li ><a href="/">Home</a></li><li class="page_item page-item-6"><a href="/about/">About</a></li><li class="page_item page-item-1073"><a href="/data-stories/">Data with stories workshop &#8211; examples</a></li><li class="page_item page-item-437"><a href="/proofs-of-concept/">Private section</a></li><li class="page_item page-item-2"><a href="/sample-page/">Sample Page</a></li></ul></div>
        </div>
    </nav><!-- #site-navigation -->

    <div class="vertical-row">
        <div class="vertical">
            <div class="site-head-content inner">
                
                <div class="social-icons">
                                                                                                                                                                                                                                                                                                                                                                                                                                                    </div>
                <h1 class="blog-title"><a class="blog-logo" href='/' rel='home'>jckr.github.io/blog</a></h1>
                <h2 class="blog-description">Just another WordPress site</h2>
            </div>
        </div>
    </div>
</header><!-- #masthead -->

<main id="content" class="content" role="main">


		
			<article id="post-1765" class="post-1765 post type-post status-publish format-standard hentry category-uncategorized">
    <header class="post-header">
                	<span class="post-meta">
        	    <span class="posted-on"><a href="/2016/08/17/the-big-leagues/" rel="bookmark"><time class="entry-date published" datetime="2016-08-17T07:36:39+00:00">August 17, 2016</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/jerome/">jerome</a></span></span> | <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>        	</span>
		        <h1 class="post-title"><a href="/2016/08/17/the-big-leagues/" rel="bookmark">The big leagues</a></h1>
        
    </header>
    		<section class="post-content">
		    <p>This is the 7th and last post in my <a href="/2016/08/09/visualization-with-react/">Visualization with React</a> series. Previous post: <a href="/2016/08/17/creating-a-react-visualization-web-app/">Creating a React visualization web app</a></p>
<p>We can finally take the little wheels off and create a real React app.<br />
That&#8217;s what we&#8217;ll make:<br />
<img src="http://jckr.github.io/blog/assets/visualization-with-react/react-weather-app.png" alt="App screenshot" /><br />
You can <a href="http://jckr.github.io/blog/projects/react-weather/">try the app for yourself here</a>. The code is available on <a href="https://github.com/jckr/react-weather">github</a>. </p>
<p>This time, instead of loading data from a paltry CSV file, we&#8217;ll go live and hit the <a href="http://openweathermap.org/">openweathermap</a> API and get live weather data.</p>
<p>The app may be more complex than anything we&#8217;ve done before, but it&#8217;s really more of the same, so I&#8217;ll be probably quicker. </p>
<p>First, look at the secrets.json file. As you can guess, it can&#8217;t work as is &#8211; if you want to try this at home, you must get your own (free) API key from openweathermap. </p>
<p>Next, let&#8217;s take a look at our constants.js file.<br />
At this stage, you might ask: why not put the API key in that constants file? Well, it&#8217;s good practice to never store your API keys in your code. So, I put it in a separate file.<br />
Constants.js is pretty simple. It has: a url prefix (that of the openweathermap api). If they change it, I can just edit the constants file. The CITY_ID holds the identifier of San Francisco. You can replace it by whatever you want (it&#8217;s not too difficult to find the city_id for any given city at the OWM web site).<br />
Finally, I have a json object called KEYS where I store what I&#8217;m interested in getting from the API. </p>
<p>Let&#8217;s move to the App.js file, which is the top-level react file.</p>
<pre class="brush: plain; title: ; notranslate" title="">
import React, { Component } from 'react';
import './App.css';
import '../node_modules/react-vis/main.css';
import {json} from 'd3-request';
import * as CONSTANTS from './constants';
import secrets from './secrets.json';
const {API} = secrets;
</pre>
<p>Note that I can import my json file like a code file. </p>
<p>We start, unsurprisingly, by creating an App component, and by a constructor method.</p>
<pre class="brush: plain; title: ; notranslate" title="">
class App extends Component {
  constructor(props) {
    super(props);
    this.state = {
      highlighted: null
    };
    this.highlightX = this.highlightX.bind(this);
    this.processResults = this.processResults.bind(this);
  }
</pre>
<p>We initialize the state, and bind two methods. Nothing we haven&#8217;t seen.</p>
<pre class="brush: plain; title: ; notranslate" title="">
  componentWillMount() {
    json(`${CONSTANTS.QUERY_PREFIX}?id=${CONSTANTS.CITY_ID}&amp;appid=${API}&amp;units=imperial`,
      this.processResults);
  }
</pre>
<p>Things get interesting with the componentWillMount method.<br />
We use our d3-request json function to read the url in the first line, which we compose by joining the URL prefix, the city id, the api key, and I&#8217;ve added &#8216;units=imperial&#8217; so that temperatures are in Farenheit. Feel free to change this to units=metric or remove it (in which case temperatures will be in Kelvin, why not).<br />
The second argument of the json function is what is done with the request &#8211; this is our first private method, processResults, which is what comes next.</p>
<pre class="brush: plain; title: ; notranslate" title="">
processResults(error, queryResults) {
  if (error) {
    this.setState({error});
  }
  const data = CONSTANTS.KEYS.map(key =&gt; ({
    key,
    values: queryResults.list.map((d, i) =&gt; ({
      i,
      x: d.dt * 1000,
      y: d[key.key1] ? d[key.key1][key.key2] || 0 : 0 
    }))
  })).reduce((prev, curr) =&gt; {
    return {...prev, [curr.key.name]: curr.values}
  }, {
    'city-name': (
      queryResults &amp;&amp;
      queryResults.city &amp;&amp;
      queryResults.city.name
    ) || 'Unkown'
  });
  this.setState({data});
}
</pre>
<p>If the data can&#8217;t load, error will have a value, and we&#8217;ll pass it to the state.<br />
Else, we&#8217;re going to process the result of the query (queryResults) according to the structure that we want (CONSTANTS.KEYS).<br />
Here, I&#8217;m using a sequence of map and reduce.<br />
Map turns an array into another array of the same shape. Reduce turns an array into something else, such as an object as here.<br />
queryResults is an object which has a list property. queryResults.list is an array of nested objects. This is why each entry of CONSTANTS.KEYS specifies two keys.<br />
To simplify, one of these objects could look like this: </p>
<pre class="brush: plain; title: ; notranslate" title="">
{
  &quot;dt&quot;: 1471413600,
  &quot;main&quot;: {
    &quot;temp&quot;: 57.22,
    &quot;temp_min&quot;: 53.32,
    &quot;temp_max&quot;: 57.22,
    &quot;pressure&quot;: 1017.57,
    &quot;sea_level&quot;: 1025.63,
    &quot;grnd_level&quot;: 1017.57,
    &quot;humidity&quot;: 100,
    &quot;temp_kf&quot;: 2.17
  },
  &quot;weather&quot;: [
    {
      &quot;id&quot;: 500,
      &quot;main&quot;: &quot;Rain&quot;,
      &quot;description&quot;: &quot;light rain&quot;,
      &quot;icon&quot;: &quot;10n&quot;
    }
  ],
  &quot;clouds&quot;: {
    &quot;all&quot;: 24
  },
  &quot;wind&quot;: {
    &quot;speed&quot;: 3.42,
    &quot;deg&quot;: 234.501
  },
  &quot;rain&quot;: {
    &quot;3h&quot;: 0.02
  },
  &quot;sys&quot;: {
    &quot;pod&quot;: &quot;n&quot;
  },
  &quot;dt_txt&quot;: &quot;2016-08-17 06:00:00&quot;
}
</pre>
<p>So, if I&#8217;m interested in the temperature, I have to get it from main, then temp. (two keys)<br />
For each entry of CONSTANTS.KEYS, I&#8217;m <em>mapping</em> queryResults to create a time series of objects with three properties: in x, a date in timestamp format (number of milliseconds since 1970). in y, the value I&#8217;m interested in. and in i, the index of that object in the time series.</p>
<p>When I&#8217;m done mapping CONSTANTS.KEYS, I have an array of such time series, or more exactly: an array of objects with a name property (which comes from CONSTANTS.KEYS) and a values property (the array of objects described above). </p>
<p>Finally, I&#8217;m reducing it to an object using reduce.<br />
The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce">reduce method</a> works like this: </p>
<pre class="brush: plain; title: ; notranslate" title="">
myArray.reduce(function(prev, curr) {
  // operation involving the previous result (prev) and the current element of the array (curr)
  return resultOfThatOperation;}, // which becomes prev in the next loop
  initialValueOfReduce) // which will go into prev the first time 
</pre>
<p>What mine does is turn that array into an object. The keys of that object are the name property of each element, and the values are what&#8217;s behind the values property of that object (our time series).<br />
And that final object has an extra property: city-name, the name of the city for which weather is being queried, if it exists. </p>
<p>When this object is created, we send it to the state. </p>
<pre class="brush: plain; title: ; notranslate" title="">
  highlightX(highlighted) {
    this.setState({highlighted});
  }
</pre>
<p>highlightX is our other private method. What it does is send whatever it&#8217;s passed to the state. But since we create it here, it will pass that to the state of App, the top level component. If that state is changed, all the children (ie everything) may be re-rendered.</p>
<p>Finally, we have our render method.<br />
We&#8217;ll skip on the styling &#8211; codewise, we&#8217;ll see that this method calls two components, LargeChart and SmallChart, with similar properties:</p>
<pre class="brush: plain; title: ; notranslate" title="">
&lt;LargeChart
  highlighted={highlighted}
  highlightX={this.highlightX}
  series={data.Temperature}
  title='Temperature'
/&gt;

// ...

&lt;SmallChart
  highlighted={highlighted}
  highlightX={this.highlightX}
  series={data.Pressure}
  title='Pressure'
/&gt;
</pre>
<p>highlighted comes from the state of App.<br />
highlightX is the callback method. We&#8217;ve seen this before &#8211; we give children components the ability to change the state of their parent, and we also pass them the result of that change.<br />
Else, we pass to each component a part of our data object, and a different title. </p>
<p>Let&#8217;s move on to the large chart component: </p>
<pre class="brush: plain; title: ; notranslate" title="">
import React, { Component } from 'react';
import moment from 'moment';
import {
  LineSeries,
  makeWidthFlexible,
  MarkSeries,
  VerticalGridLines,
  XAxis,
  XYPlot,
  YAxis
} from 'react-vis';

const HOUR_IN_MS = 60 * 60 * 1000;
const DAY_IN_MS = 24 * HOUR_IN_MS;

const FlexibleXYPlot = makeWidthFlexible(XYPlot);
</pre>
<p>so far, we&#8217;re importing a bunch of stuff.<br />
the two constants that we create are the numbers of milliseconds in an hour, and in a day, which will be useful in a bit.<br />
FlexibleXYPlot is a special react-vis component that can resize (in width). By using this as opposed to XYPlot with a fixed width, we can make our app layout responsive (<a href="http://jckr.github.io/blog/projects/react-weather/">try resizing the window!</a>) without having to think too hard it.</p>
<pre class="brush: plain; title: ; notranslate" title="">
export default class LargeChart extends Component {
  render() {
  	const {highlighted, highlightX, series} = this.props;
   	const minValue = Math.min(...series.map(d =&gt; d.y));
  	const maxValue = Math.max(...series.map(d =&gt; d.y));

  	const yDomain = [0.98 * minValue, 1.02 * maxValue];
  	const tickValues = series.map(d =&gt; d.x);

    const labelValues = makeLabelValues(series);
</pre>
<p>Eh, we could have made a pure functional component, since this one only has a render method and no state.<br />
First, we come up with the bounds of the domain. We don&#8217;t have to. Note the use of the spread operator for a very concise way to write this.<br />
We create yDomain with a little bit of margin &#8211; we start with 98% of the smallest value, and go to 102% of the maximum value.<br />
If we don&#8217;t define a domain, then react-vis will create it based on the data &#8211; it will start with exactly the smallest value and end with exactly the highest. </p>
<p>tickValues will be all the different x values.<br />
labelValues will be created by a separate function (in the end). We&#8217;ll write a label for every day of our time series at precisely midnight.</p>
<p>Now we&#8217;ll create the chart proper. </p>
<pre class="brush: plain; title: ; notranslate" title="">
&lt;FlexibleXYPlot
    height={300}
    margin={{top: 5, bottom: 25, left: 40, right: 0}}
    onMouseLeave={() =&gt; this.props.highlightX(null)}
    	yDomain={yDomain}
    &gt;
    &lt;VerticalGridLines 
    	values={labelValues}
    /&gt;
    &lt;HorizontalGridLines /&gt;
    &lt;LineSeries 
    	data={series}
    	onNearestX={highlightX}
    	stroke='#11939a'
    	strokeWidth={2}
    /&gt;
    {highlighted ? 
    	&lt;LineSeries
    		data={[
    			{x: highlighted &amp;&amp; highlighted.x, y: yDomain[0]},
    			{x: highlighted &amp;&amp; highlighted.x, y: yDomain[1]}
    		]}
    		stroke='rgba(17,147,154,0.7)'
    		strokeWidth={2}
    	/&gt; : null
    }
    {highlighted ?  
    &lt;MarkSeries
    	data={[{
        	x: highlighted &amp;&amp; highlighted.x,
            y: highlighted &amp;&amp; series[highlighted.i].y
        }]}
        color='rgba(17,147,154,0.7)'
    /&gt; : null
    }
    &lt;XAxis 
    	tickSize={4}
    	tickValues={tickValues}
    	labelValues={labelValues}
    	labelFormat={(d) =&gt; moment(new Date(d)).format('MM/DD')}
    /&gt;
    &lt;YAxis 
    	tickSize={4}
    /&gt;
    	
    &lt;/FlexibleXYPlot&gt;
</pre>
<p>The first interesting thing is the onMouseLeave property of FlexibleXYPlot. If the mouse leaves the chart, we&#8217;ll use our highlightX callback function to pass &#8220;null&#8221; to the state of App.<br />
In other words, when the mouse is not on a chart, the value of highlighted is null. </p>
<p>A bit later, we see that the first LineSeries has an onNearestX property. What it does is that when somebody mouseovers the chart, it sends the underlying datapoint to the state of App. Remember that these datapoints are objects with three property: x, i and y.</p>
<p>So, at a given moment, highlighted is either null, or of the form: {x: (a date in timestamps format), y: (a value), i: (the position of that datapoint in the time series, ie 10 if that&#8217;s the 10th point)}.</p>
<p>Let&#8217;s go on.<br />
There&#8217;s an interesting construct between curly braces. Remember that in JSX, whatever is between curly braces will be evaluated. Here, we have a ternary operator (condition ? true : false). If highlighted exists, then we will create a LineSeries, else nothing.<br />
What this means is that if there&#8217;s a value for highlighted, we are going to draw a vertical line that spans the whole chart, at the level of the mouseover.<br />
We then have a similar construction for a MarkSeries, which, likewise, draws a circle at the same position as the highlighted data point. </p>
<p>Finally, we create the axes. The XAxis has a few interesting properties: tickValues, which we defined above &#8211; all the possible x values, labelValues and labelFormat. labelValues determine <em>where</em> the labels will be drawn. Finally, labelFormat determines <em>what</em> will be drawn, as a function of each value in labelValues.  </p>
<pre class="brush: plain; title: ; notranslate" title="">
export function makeLabelValues(series) {
  const firstDate = new Date(series[0].x);
  const firstDateHour = firstDate.getHours();
  const firstMidnight = series[0].x + (24 - firstDateHour) * HOUR_IN_MS;

  return [0, 1, 2, 3, 4].map(d =&gt; firstMidnight + d * DAY_IN_MS);
}
</pre>
<p>the last part of this module creates those label values. </p>
<p>Our time series has a number of elements (normally 39), every 3 hours. But the first element is probably not the very beginning of a day. We&#8217;d like our labels to be exactly aligned with the start of a day (midnight).<br />
So we are going to figure out what time it is on the first element of the time series, compute when exactly is the next day, and then create an array of 5 values corresponding to the time we just computed, then the time 24 hours after (start of the next day), the time 24 hours after that, etc.<br />
As a result, we&#8217;ll have a list of 5 &#8216;midnights&#8217; exactly a day apart. </p>
<p>Finally, let&#8217;s look at SmallChart. </p>
<p>SmallChart is very similar to LargeChart. The styling is a bit different (these charts are, well, smaller). The Smallchart component also have an onNearestX hook that sends a datapoint to the state of App.<br />
Unlike LargeChart, it doesn&#8217;t draw a vertical line; it just draws a dot on the curve corresponding to the highlighted time.</p>
<p>So, since App sends the same highlighted to all chart components, mousing over any chart makes that dot appear on all charts. How do we know where to draw it?<br />
If I mouseover on a chart, onNearestX will send to its corresponding callback function the underlying datapoint, that has an x and a y property (and possibly others). If I wanted to draw a dot on that same chart, that would be easy &#8211; I already know the x and y coordinates where I would have to draw it. But how can I draw a dot on all the other charts?<br />
This is why I added that i property to the timeseries to begin with. When I mouseover on a point on any chart, the object I send to App&#8217;s state has that i property. In other words, I can know that I&#8217;ve mouseovered the 10th point of the chart (or the 17th, or the 3rd, etc.). When the LargeChart and SmallChart components will draw the dot, they will draw it on top of the 10th (or 17th, or 3rd&#8230; well, the i-th) point of their own chart. </p>
<pre class="brush: plain; title: ; notranslate" title="">
&lt;MarkSeries
  data={[{
    x: highlighted &amp;&amp; highlighted.x,
    y: highlighted &amp;&amp; series[highlighted.i].y
  }]}
  color='rgba(17,147,154,0.7)'
  size='2'
/&gt;
</pre>
<p>That&#8217;s what series[highlighted.i].y means.</p>
<p>And that&#8217;s it! A complete dashboard with linked charts. You can tell that temperature is lower at night, and probably lower when there are clouds, but then again it&#8217;s San Francisco so it&#8217;s probably always 60 more or less.</p>
<p>This project could be much more complex &#8211; we could have added a tooltip like in our previous app&#8230; added extra series&#8230; and arranged info in a lot of different ways. We could also let the user change the city through a text box. Well, you can make your own version! </p>
<p>(if you&#8217;re curious why I haven&#8217;t hosted this app on github, it&#8217;s because we can only access an HTTP version of the OWM API for free, and since github pages are hosted over HTTPS those requests will be blocked.)</p>
<h1>Now, what</h1>
<p>Congratulations for reading that far, you are awesome.<br />
So you want to take your react game to the next level and do amazing visualizations?<br />
You should continue exploring react-vis. I&#8217;ve only used a very basic case. We use it at Uber to create pretty elaborated charts and dashboards.<br />
Our visualization team is also behind three amazing open source libraries which play well with React: <a href="https://github.com/uber/react-map-gl">React-Map-GL</a>, to create maps with MapBox and React; <a href="https://github.com/uber/deck.gl">Deck.gl</a>, to create webGL layers over maps, and <a href="https://github.com/uber/luma.gl">Luma.gl</a>, a WebGL framework. </p>
<p>One of the best features of React is that it has so many existing modules. <a href="https://github.com/chenglou/react-motion">React-motion</a> is, IMO, the best way to handle animation in React as of now, especially when SVG elements are concerned. Check out that <a href="https://medium.com/@nashvail/a-gentle-introduction-to-react-motion-dc50dd9f2459#.6in161dz0">great article</a> by Nash Vail. </p>
<p>The <a href="https://github.com/facebook/react/">React project page</a> is an evident resource. React is alive, keeps adding features, and there is constantly more code out there using react and pushing the envelope. </p>
<p>The <a href="https://github.com/airbnb/javascript">Airbnb style guide</a> is a solid reference for writing good modern javascript. We don&#8217;t follow it at Uber; we have slightly different rules, which are not published. Anyway, the best part of such a system is its consistency, and Airbnb style guide is definitely consistent.</p>
<p><a href="http://react.rocks/">React Rocks!</a> is a great collection of examples and a source of inspiration.</p>
<p>Once your application become complex enough, it&#8217;s difficult to handle states and callbacks everywhere. You can use a store to address this. Right now the state of the art solution is <a href="http://redux.js.org/">redux</a>. The author of Redux, Dan Abramov, gives an <a href="https://egghead.io/courses/getting-started-with-redux">amazing video tutorial</a> which doubles as an excellent showcase for React and ES6.</p>
		    			<div class="clear">&nbsp;</div>
		</section>
	
	<footer class="post-footer">

	    <section class="author">
	    	<img alt='' src='http://0.gravatar.com/avatar/9bb03f0a91eab52fe022450c323810f2?s=100&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/9bb03f0a91eab52fe022450c323810f2?s=200&amp;d=mm&amp;r=g 2x' class='avatar avatar-100 photo' height='100' width='100' />	        <h4>jerome</h4>
	        <p></p>
			<div class="clear">&nbsp;</div>
	    </section>
	</footer>
</article><!-- #post-## -->

				<nav class="pagination navigation post-navigation" role="navigation">
		<div class="nav-links">
			<div class="older-posts"><a href="/2016/08/17/creating-a-react-visualization-web-app/" rel="prev">Creating a React visualization web app <span class="meta-nav">&rarr;</span></a></div>				<div class="page-number">&bull;</div>
				<div class="newer-posts"><a href="/2018/04/09/hello-world/" rel="next"><span class="meta-nav">&larr;</span> Hello world!</a></div>		</div><!-- .nav-links -->
	</nav><!-- .navigation -->
	
			
<div id="comments" class="comments-area">

	
			<h2 class="comments-title">
			One thought on &ldquo;<span>The big leagues</span>&rdquo;		</h2>

		
		<ol class="comment-list">
					<li id="comment-567" class="comment even thread-even depth-1">
			<article id="div-comment-567" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://1.gravatar.com/avatar/7362b6d590e0542cb8038a0c4f3f10a0?s=32&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/7362b6d590e0542cb8038a0c4f3f10a0?s=64&amp;d=mm&amp;r=g 2x' class='avatar avatar-32 photo' height='32' width='32' />						<b class="fn"><a href='http://omeraz.wordpress.com/' rel='external nofollow' class='url'>עומר עזריאל</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="/2016/08/17/the-big-leagues/#comment-567">
							<time datetime="2016-12-11T23:06:23+00:00">
								December 11, 2016 at 11:06 pm							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>wow, man, thanks for sharing so much knowledge! I am starting my first project in vis, gonna be way more fun now. </p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/2016/08/17/the-big-leagues/?replytocom=567#respond' onclick='return addComment.moveForm( "div-comment-567", "567", "respond", "1765" )' aria-label='Reply to עומר עזריאל'>Reply</a></div>			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		
	
	
					<div id="respond" class="comment-respond">
			<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2016/08/17/the-big-leagues/#respond" style="display:none;">Cancel reply</a></small></h3>				<form action="/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate>
					<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" aria-required='true' required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" aria-describedby="email-notes" aria-required='true' required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='1765' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="47d493f198" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="4"/></p>				</form>
					</div><!-- #respond -->
		
</div><!-- #comments -->

		

	<div id="secondary" class="widget-area" role="complementary">
		<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form></aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h1 class="widget-title">Recent Posts</h1>		<ul>
					<li>
				<a href="/2018/04/09/hello-world/">Hello world!</a>
						</li>
					<li>
				<a href="/2016/08/17/the-big-leagues/">The big leagues</a>
						</li>
					<li>
				<a href="/2016/08/17/creating-a-react-visualization-web-app/">Creating a React visualization web app</a>
						</li>
					<li>
				<a href="/2016/08/13/beyond-rendering/">Beyond rendering</a>
						</li>
					<li>
				<a href="/2016/08/11/react-components/">React components</a>
						</li>
				</ul>
		</aside>		<aside id="recent-comments-2" class="widget widget_recent_comments"><h1 class="widget-title">Recent Comments</h1><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link"><a href='https://wordpress.org/' rel='external nofollow' class='url'>A WordPress Commenter</a></span> on <a href="/2018/04/09/hello-world/#comment-1">Hello world!</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://omeraz.wordpress.com/' rel='external nofollow' class='url'>עומר עזריאל</a></span> on <a href="/2016/08/17/the-big-leagues/#comment-567">The big leagues</a></li><li class="recentcomments"><span class="comment-author-link">Carlos Ayres</span> on <a href="/2012/05/28/manipulating-data-like-a-boss-with-d3/#comment-312">Manipulating data like a boss with d3</a></li><li class="recentcomments"><span class="comment-author-link"><a href='https://migrate.powertripanalytics.com/game-of-thrones-interactions-among-the-top-30-characters/' rel='external nofollow' class='url'>Game of ThronesInteractions Among the Top 30 Characters &#8211; PowerTrip Analytics</a></span> on <a href="/2013/05/13/making-the-game-of-thrones-visualization/#comment-466">Making the game of thrones visualization</a></li><li class="recentcomments"><span class="comment-author-link"><a href='https://abgoswam.wordpress.com/2016/10/08/d3-getting-started/' rel='external nofollow' class='url'>D3 &#8211; Getting Started | abgoswam&#039;s tech blog</a></span> on <a href="/2012/09/04/getting-to-hello-world-with-d3/#comment-419">Getting to &#8220;Hello world&#8221; with d3</a></li></ul></aside><aside id="archives-2" class="widget widget_archive"><h1 class="widget-title">Archives</h1>		<ul>
			<li><a href='/2018/04/'>April 2018</a></li>
	<li><a href='/2016/08/'>August 2016</a></li>
	<li><a href='/2015/05/'>May 2015</a></li>
	<li><a href='/2015/02/'>February 2015</a></li>
	<li><a href='/2014/10/'>October 2014</a></li>
	<li><a href='/2013/11/'>November 2013</a></li>
	<li><a href='/2013/05/'>May 2013</a></li>
	<li><a href='/2013/03/'>March 2013</a></li>
	<li><a href='/2013/01/'>January 2013</a></li>
	<li><a href='/2012/12/'>December 2012</a></li>
	<li><a href='/2012/11/'>November 2012</a></li>
	<li><a href='/2012/10/'>October 2012</a></li>
	<li><a href='/2012/09/'>September 2012</a></li>
	<li><a href='/2012/07/'>July 2012</a></li>
	<li><a href='/2012/06/'>June 2012</a></li>
	<li><a href='/2012/05/'>May 2012</a></li>
	<li><a href='/2012/04/'>April 2012</a></li>
	<li><a href='/2012/01/'>January 2012</a></li>
	<li><a href='/2011/11/'>November 2011</a></li>
	<li><a href='/2011/10/'>October 2011</a></li>
	<li><a href='/2011/09/'>September 2011</a></li>
	<li><a href='/2011/08/'>August 2011</a></li>
	<li><a href='/2011/07/'>July 2011</a></li>
	<li><a href='/2011/06/'>June 2011</a></li>
	<li><a href='/2011/05/'>May 2011</a></li>
	<li><a href='/2011/04/'>April 2011</a></li>
	<li><a href='/2011/03/'>March 2011</a></li>
	<li><a href='/2011/02/'>February 2011</a></li>
	<li><a href='/2011/01/'>January 2011</a></li>
	<li><a href='/2010/11/'>November 2010</a></li>
	<li><a href='/2010/04/'>April 2010</a></li>
	<li><a href='/2010/03/'>March 2010</a></li>
	<li><a href='/2010/02/'>February 2010</a></li>
	<li><a href='/2010/01/'>January 2010</a></li>
	<li><a href='/2009/12/'>December 2009</a></li>
	<li><a href='/2009/10/'>October 2009</a></li>
	<li><a href='/2009/09/'>September 2009</a></li>
	<li><a href='/2009/08/'>August 2009</a></li>
	<li><a href='/2009/07/'>July 2009</a></li>
	<li><a href='/2009/06/'>June 2009</a></li>
	<li><a href='/2009/05/'>May 2009</a></li>
	<li><a href='/2008/12/'>December 2008</a></li>
	<li><a href='/2008/11/'>November 2008</a></li>
	<li><a href='/2008/10/'>October 2008</a></li>
		</ul>
		</aside><aside id="categories-2" class="widget widget_categories"><h1 class="widget-title">Categories</h1>		<ul>
	<li class="cat-item cat-item-2"><a href="/category/book-review/" >book review</a>
</li>
	<li class="cat-item cat-item-3"><a href="/category/charts/" >charts</a>
</li>
	<li class="cat-item cat-item-4"><a href="/category/conferences/" >conferences</a>
</li>
	<li class="cat-item cat-item-5"><a href="/category/d3/" >d3</a>
</li>
	<li class="cat-item cat-item-6"><a href="/category/dashboards/" >dashboards</a>
</li>
	<li class="cat-item cat-item-7"><a href="/category/data-publishing/" >data publishing</a>
</li>
	<li class="cat-item cat-item-8"><a href="/category/data-visualization/" >data visualization</a>
</li>
	<li class="cat-item cat-item-9"><a href="/category/francais/" >français</a>
</li>
	<li class="cat-item cat-item-10"><a href="/category/javascript/" >javascript</a>
</li>
	<li class="cat-item cat-item-11"><a href="/category/presentation/" >presentation</a>
</li>
	<li class="cat-item cat-item-12"><a href="/category/protovis/" >protovis</a>
</li>
	<li class="cat-item cat-item-13"><a href="/category/react/" >react</a>
</li>
	<li class="cat-item cat-item-14"><a href="/category/tips/" >tips</a>
</li>
	<li class="cat-item cat-item-1"><a href="/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-15"><a href="/category/web-sites/" >web sites</a>
</li>
		</ul>
</aside><aside id="meta-2" class="widget widget_meta"><h1 class="widget-title">Meta</h1>			<ul>
						<li><a href="/wp-login.php">Log in</a></li>
			<li><a href="/feed/">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="/comments/feed/">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="https://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>			</ul>
			</aside>		<div class="clear">&nbsp;</div>
	</div><!-- #secondary -->
	<footer id="colophon" class="site-footer" role="contentinfo">
	    <a class="subscribe icon-feed" href="/feed/"><span class="tooltip">Subscribe!</span></a>
		<div class="site-info inner">
		    <section class="copyright">
		    			    		<a href="https://github.com/lacymorrow/casper" rel="home">Casper WP</a> by Lacy Morrow		    			    </section>
		</div><!-- .site-info -->
	</footer><!-- #colophon -->
</main><!-- /#content -->

<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPlain.js?ver=3.0.9b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type='text/javascript' src='/wp-content/themes/casper/js/main.js?ver=1.0.0'></script>
<script type='text/javascript' src='/wp-includes/js/comment-reply.min.js?ver=4.6.10'></script>
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.6.10'></script>
<script async="async" type='text/javascript' src='/wp-content/plugins/akismet/_inc/form.js?ver=4.0.3'></script>
<!--stats_footer_test--></body>
</html>
